<html><head><meta content="text/html; charset=UTF-8" http-equiv="content-type"><style type="text/css">@import url('https://themes.googleusercontent.com/fonts/css?kit=lhDjYqiy3mZ0x6ROQEUoUw');.lst-kix_vnrcm0t6c2nt-8>li:before{content:"\0025a0  "}ul.lst-kix_dprdarz0rdq9-7{list-style-type:none}ul.lst-kix_dprdarz0rdq9-6{list-style-type:none}ul.lst-kix_dprdarz0rdq9-8{list-style-type:none}.lst-kix_vnrcm0t6c2nt-6>li:before{content:"\0025cf  "}ul.lst-kix_dprdarz0rdq9-3{list-style-type:none}ul.lst-kix_dprdarz0rdq9-2{list-style-type:none}ul.lst-kix_dprdarz0rdq9-5{list-style-type:none}ul.lst-kix_dprdarz0rdq9-4{list-style-type:none}.lst-kix_vnrcm0t6c2nt-7>li:before{content:"\0025cb  "}.lst-kix_vnrcm0t6c2nt-0>li:before{content:"\0025cf  "}.lst-kix_vnrcm0t6c2nt-2>li:before{content:"\0025a0  "}.lst-kix_vnrcm0t6c2nt-1>li:before{content:"\0025cb  "}.lst-kix_vnrcm0t6c2nt-5>li:before{content:"\0025a0  "}.lst-kix_vnrcm0t6c2nt-4>li:before{content:"\0025cb  "}.lst-kix_vnrcm0t6c2nt-3>li:before{content:"\0025cf  "}.lst-kix_dprdarz0rdq9-8>li:before{content:"\0025a0  "}.lst-kix_dprdarz0rdq9-7>li:before{content:"\0025cb  "}.lst-kix_dprdarz0rdq9-6>li:before{content:"\0025cf  "}.lst-kix_kjowfq3cv3xf-3>li:before{content:"\0025cf  "}.lst-kix_kjowfq3cv3xf-4>li:before{content:"\0025cb  "}.lst-kix_kjowfq3cv3xf-5>li:before{content:"\0025a0  "}.lst-kix_6ffqlpfm8a8u-7>li{counter-increment:lst-ctn-kix_6ffqlpfm8a8u-7}.lst-kix_dprdarz0rdq9-1>li:before{content:"\0025cb  "}ul.lst-kix_dprdarz0rdq9-1{list-style-type:none}ul.lst-kix_dprdarz0rdq9-0{list-style-type:none}.lst-kix_kjowfq3cv3xf-6>li:before{content:"\0025cf  "}.lst-kix_kjowfq3cv3xf-8>li:before{content:"\0025a0  "}.lst-kix_dprdarz0rdq9-2>li:before{content:"\0025a0  "}.lst-kix_rh6tmhhl63to-4>li:before{content:"\0025cb  "}.lst-kix_kjowfq3cv3xf-7>li:before{content:"\0025cb  "}.lst-kix_dprdarz0rdq9-4>li:before{content:"\0025cb  "}.lst-kix_rh6tmhhl63to-2>li:before{content:"\0025a0  "}.lst-kix_rh6tmhhl63to-3>li:before{content:"\0025cf  "}.lst-kix_dprdarz0rdq9-3>li:before{content:"\0025cf  "}.lst-kix_dprdarz0rdq9-5>li:before{content:"\0025a0  "}.lst-kix_rh6tmhhl63to-1>li:before{content:"\0025cb  "}ol.lst-kix_6ffqlpfm8a8u-6.start{counter-reset:lst-ctn-kix_6ffqlpfm8a8u-6 0}ul.lst-kix_rh6tmhhl63to-6{list-style-type:none}.lst-kix_nd6w1jiz3gae-4>li:before{content:"\0025cb  "}.lst-kix_nd6w1jiz3gae-5>li:before{content:"\0025a0  "}ul.lst-kix_rh6tmhhl63to-7{list-style-type:none}ul.lst-kix_rh6tmhhl63to-8{list-style-type:none}.lst-kix_nd6w1jiz3gae-3>li:before{content:"\0025cf  "}.lst-kix_nd6w1jiz3gae-7>li:before{content:"\0025cb  "}.lst-kix_nd6w1jiz3gae-0>li:before{content:"\0025cf  "}.lst-kix_nd6w1jiz3gae-1>li:before{content:"\0025cb  "}.lst-kix_nd6w1jiz3gae-8>li:before{content:"\0025a0  "}.lst-kix_6ffqlpfm8a8u-3>li{counter-increment:lst-ctn-kix_6ffqlpfm8a8u-3}.lst-kix_nd6w1jiz3gae-2>li:before{content:"\0025a0  "}.lst-kix_rh6tmhhl63to-5>li:before{content:"\0025a0  "}.lst-kix_dprdarz0rdq9-0>li:before{content:"\0025cf  "}.lst-kix_rh6tmhhl63to-6>li:before{content:"\0025cf  "}.lst-kix_rh6tmhhl63to-7>li:before{content:"\0025cb  "}.lst-kix_rh6tmhhl63to-8>li:before{content:"\0025a0  "}ul.lst-kix_rh6tmhhl63to-0{list-style-type:none}ul.lst-kix_rh6tmhhl63to-1{list-style-type:none}ul.lst-kix_rh6tmhhl63to-2{list-style-type:none}.lst-kix_nd6w1jiz3gae-6>li:before{content:"\0025cf  "}ul.lst-kix_rh6tmhhl63to-3{list-style-type:none}ul.lst-kix_rh6tmhhl63to-4{list-style-type:none}ul.lst-kix_rh6tmhhl63to-5{list-style-type:none}ul.lst-kix_dlxp9ba8pb9h-8{list-style-type:none}ul.lst-kix_dlxp9ba8pb9h-0{list-style-type:none}ul.lst-kix_dlxp9ba8pb9h-1{list-style-type:none}ul.lst-kix_dlxp9ba8pb9h-2{list-style-type:none}ul.lst-kix_dlxp9ba8pb9h-3{list-style-type:none}ol.lst-kix_6ffqlpfm8a8u-1.start{counter-reset:lst-ctn-kix_6ffqlpfm8a8u-1 0}ul.lst-kix_dlxp9ba8pb9h-4{list-style-type:none}ul.lst-kix_dlxp9ba8pb9h-5{list-style-type:none}ul.lst-kix_dlxp9ba8pb9h-6{list-style-type:none}ul.lst-kix_dlxp9ba8pb9h-7{list-style-type:none}.lst-kix_yz3qcgmzqyos-1>li:before{content:"\0025cb  "}.lst-kix_7gn3cyzba3ab-6>li:before{content:"\0025cf  "}.lst-kix_yz3qcgmzqyos-5>li:before{content:"\0025a0  "}.lst-kix_yz3qcgmzqyos-7>li:before{content:"\0025cb  "}.lst-kix_ng6ognesc1lx-7>li:before{content:"\0025cb  "}.lst-kix_7gn3cyzba3ab-4>li:before{content:"\0025cb  "}ul.lst-kix_gubbebjwfu1f-6{list-style-type:none}ul.lst-kix_pjw9fvbjrcvk-8{list-style-type:none}ul.lst-kix_gubbebjwfu1f-5{list-style-type:none}.lst-kix_dlxp9ba8pb9h-7>li:before{content:"\0025cb  "}ul.lst-kix_pjw9fvbjrcvk-7{list-style-type:none}.lst-kix_ng6ognesc1lx-1>li:before{content:"\0025cb  "}ul.lst-kix_gubbebjwfu1f-8{list-style-type:none}ul.lst-kix_gubbebjwfu1f-7{list-style-type:none}.lst-kix_dlxp9ba8pb9h-5>li:before{content:"\0025a0  "}.lst-kix_7gn3cyzba3ab-2>li:before{content:"\0025a0  "}.lst-kix_ng6ognesc1lx-5>li:before{content:"\0025a0  "}.lst-kix_yz3qcgmzqyos-3>li:before{content:"\0025cf  "}.lst-kix_ng6ognesc1lx-3>li:before{content:"\0025cf  "}.lst-kix_7gn3cyzba3ab-0>li:before{content:"\0025cf  "}.lst-kix_d1knaq1rozfz-6>li:before{content:"\0025cf  "}.lst-kix_kqhtq93lvmrp-0>li:before{content:"\0025cf  "}.lst-kix_d1knaq1rozfz-4>li:before{content:"\0025cb  "}.lst-kix_dlxp9ba8pb9h-1>li:before{content:"\0025cb  "}.lst-kix_d1knaq1rozfz-8>li:before{content:"\0025a0  "}ul.lst-kix_yz3qcgmzqyos-2{list-style-type:none}ul.lst-kix_a9wgeonm4abr-8{list-style-type:none}.lst-kix_dlxp9ba8pb9h-3>li:before{content:"\0025cf  "}ul.lst-kix_yz3qcgmzqyos-1{list-style-type:none}ul.lst-kix_a9wgeonm4abr-7{list-style-type:none}ul.lst-kix_gubbebjwfu1f-0{list-style-type:none}ul.lst-kix_yz3qcgmzqyos-4{list-style-type:none}ul.lst-kix_yz3qcgmzqyos-3{list-style-type:none}ul.lst-kix_gubbebjwfu1f-2{list-style-type:none}ul.lst-kix_a9wgeonm4abr-4{list-style-type:none}ul.lst-kix_gubbebjwfu1f-1{list-style-type:none}ul.lst-kix_a9wgeonm4abr-3{list-style-type:none}ul.lst-kix_gubbebjwfu1f-4{list-style-type:none}ul.lst-kix_yz3qcgmzqyos-0{list-style-type:none}ul.lst-kix_a9wgeonm4abr-6{list-style-type:none}ul.lst-kix_gubbebjwfu1f-3{list-style-type:none}ul.lst-kix_a9wgeonm4abr-5{list-style-type:none}ul.lst-kix_a9wgeonm4abr-0{list-style-type:none}ul.lst-kix_a9wgeonm4abr-2{list-style-type:none}ul.lst-kix_a9wgeonm4abr-1{list-style-type:none}.lst-kix_d1knaq1rozfz-0>li:before{content:"\0025cf  "}.lst-kix_d1knaq1rozfz-2>li:before{content:"\0025a0  "}.lst-kix_6dd4bhw7lmvv-5>li:before{content:"\0025a0  "}.lst-kix_iotbe2cpvfyr-7>li:before{content:"\0025cb  "}.lst-kix_iotbe2cpvfyr-5>li:before{content:"\0025a0  "}.lst-kix_rh6tmhhl63to-0>li:before{content:"\0025cf  "}.lst-kix_pjw9fvbjrcvk-5>li:before{content:"\0025a0  "}.lst-kix_iotbe2cpvfyr-3>li:before{content:"\0025cf  "}.lst-kix_4wg0fmgu07r4-5>li:before{content:"\0025a0  "}.lst-kix_6dd4bhw7lmvv-3>li:before{content:"\0025cf  "}.lst-kix_4wg0fmgu07r4-3>li:before{content:"\0025cf  "}.lst-kix_pjw9fvbjrcvk-3>li:before{content:"\0025cf  "}.lst-kix_3lf77tl1pr30-3>li:before{content:"\0025cf  "}.lst-kix_4wg0fmgu07r4-1>li:before{content:"\0025cb  "}.lst-kix_kqhtq93lvmrp-6>li:before{content:"\0025cf  "}.lst-kix_q04a1iu0lxct-5>li:before{content:"\0025a0  "}.lst-kix_gubbebjwfu1f-1>li:before{content:"\0025cb  "}.lst-kix_3lf77tl1pr30-1>li:before{content:"\0025cb  "}.lst-kix_6dd4bhw7lmvv-1>li:before{content:"\0025cb  "}.lst-kix_q04a1iu0lxct-7>li:before{content:"\0025cb  "}.lst-kix_kqhtq93lvmrp-2>li:before{content:"\0025a0  "}.lst-kix_kqhtq93lvmrp-4>li:before{content:"\0025cb  "}.lst-kix_pjw9fvbjrcvk-7>li:before{content:"\0025cb  "}.lst-kix_kjowfq3cv3xf-1>li:before{content:"\0025cb  "}ul.lst-kix_4wg0fmgu07r4-4{list-style-type:none}ul.lst-kix_4wg0fmgu07r4-3{list-style-type:none}ul.lst-kix_4wg0fmgu07r4-6{list-style-type:none}ul.lst-kix_4wg0fmgu07r4-5{list-style-type:none}ul.lst-kix_4wg0fmgu07r4-0{list-style-type:none}ul.lst-kix_4wg0fmgu07r4-2{list-style-type:none}ul.lst-kix_4wg0fmgu07r4-1{list-style-type:none}ul.lst-kix_pjw9fvbjrcvk-0{list-style-type:none}ul.lst-kix_pjw9fvbjrcvk-2{list-style-type:none}ul.lst-kix_pjw9fvbjrcvk-1{list-style-type:none}ul.lst-kix_pjw9fvbjrcvk-4{list-style-type:none}ul.lst-kix_pjw9fvbjrcvk-3{list-style-type:none}ul.lst-kix_pjw9fvbjrcvk-6{list-style-type:none}ul.lst-kix_pjw9fvbjrcvk-5{list-style-type:none}.lst-kix_q04a1iu0lxct-3>li:before{content:"\0025cf  "}.lst-kix_yz56o84pgchk-5>li:before{content:"\0025a0  "}.lst-kix_yz56o84pgchk-7>li:before{content:"\0025cb  "}.lst-kix_kqhtq93lvmrp-8>li:before{content:"\0025a0  "}.lst-kix_iotbe2cpvfyr-1>li:before{content:"\0025cb  "}.lst-kix_3lf77tl1pr30-5>li:before{content:"\0025a0  "}.lst-kix_e596asp7nqdg-2>li:before{content:"\0025a0  "}.lst-kix_q04a1iu0lxct-1>li:before{content:"\0025cb  "}.lst-kix_yz56o84pgchk-3>li:before{content:"\0025cf  "}ul.lst-kix_4wg0fmgu07r4-8{list-style-type:none}.lst-kix_3lf77tl1pr30-7>li:before{content:"\0025cb  "}.lst-kix_6dd4bhw7lmvv-7>li:before{content:"\0025cb  "}.lst-kix_4wg0fmgu07r4-7>li:before{content:"\0025cb  "}ul.lst-kix_4wg0fmgu07r4-7{list-style-type:none}.lst-kix_e596asp7nqdg-0>li:before{content:"\0025cf  "}.lst-kix_7gn3cyzba3ab-8>li:before{content:"\0025a0  "}ul.lst-kix_kqhtq93lvmrp-4{list-style-type:none}ul.lst-kix_kqhtq93lvmrp-3{list-style-type:none}ul.lst-kix_kqhtq93lvmrp-2{list-style-type:none}ul.lst-kix_kqhtq93lvmrp-1{list-style-type:none}ul.lst-kix_776urtvrz4fs-8{list-style-type:none}ul.lst-kix_kqhtq93lvmrp-8{list-style-type:none}ul.lst-kix_776urtvrz4fs-7{list-style-type:none}ul.lst-kix_kqhtq93lvmrp-7{list-style-type:none}ul.lst-kix_776urtvrz4fs-6{list-style-type:none}ul.lst-kix_kqhtq93lvmrp-6{list-style-type:none}.lst-kix_yz56o84pgchk-2>li:before{content:"\0025a0  "}ul.lst-kix_776urtvrz4fs-5{list-style-type:none}ul.lst-kix_kqhtq93lvmrp-5{list-style-type:none}ul.lst-kix_776urtvrz4fs-4{list-style-type:none}ul.lst-kix_776urtvrz4fs-3{list-style-type:none}ul.lst-kix_776urtvrz4fs-2{list-style-type:none}ul.lst-kix_776urtvrz4fs-1{list-style-type:none}ul.lst-kix_776urtvrz4fs-0{list-style-type:none}ul.lst-kix_kqhtq93lvmrp-0{list-style-type:none}ol.lst-kix_6ffqlpfm8a8u-8.start{counter-reset:lst-ctn-kix_6ffqlpfm8a8u-8 0}.lst-kix_e596asp7nqdg-4>li:before{content:"\0025cb  "}ul.lst-kix_2151lw9po4n2-0{list-style-type:none}.lst-kix_e596asp7nqdg-5>li:before{content:"\0025a0  "}.lst-kix_e771vgvj1z3x-8>li:before{content:"\0025a0  "}ul.lst-kix_2151lw9po4n2-2{list-style-type:none}ul.lst-kix_2151lw9po4n2-1{list-style-type:none}.lst-kix_e771vgvj1z3x-7>li:before{content:"\0025cb  "}.lst-kix_dy60937dm7bn-6>li:before{content:"\0025cf  "}ul.lst-kix_2151lw9po4n2-8{list-style-type:none}ul.lst-kix_2151lw9po4n2-7{list-style-type:none}.lst-kix_dy60937dm7bn-7>li:before{content:"\0025cb  "}ul.lst-kix_2151lw9po4n2-4{list-style-type:none}ul.lst-kix_2151lw9po4n2-3{list-style-type:none}ul.lst-kix_2151lw9po4n2-6{list-style-type:none}.lst-kix_e596asp7nqdg-8>li:before{content:"\0025a0  "}ul.lst-kix_2151lw9po4n2-5{list-style-type:none}ul.lst-kix_1i6gptmikftw-5{list-style-type:none}ul.lst-kix_1i6gptmikftw-4{list-style-type:none}ul.lst-kix_1i6gptmikftw-3{list-style-type:none}.lst-kix_e771vgvj1z3x-0>li:before{content:"\0025cf  "}ul.lst-kix_1i6gptmikftw-2{list-style-type:none}.lst-kix_e771vgvj1z3x-3>li:before{content:"\0025cf  "}.lst-kix_8qqlcreb4gi9-8>li:before{content:"\0025a0  "}ul.lst-kix_1i6gptmikftw-8{list-style-type:none}ul.lst-kix_3lf77tl1pr30-8{list-style-type:none}.lst-kix_8qqlcreb4gi9-4>li:before{content:"\0025cb  "}.lst-kix_a9wgeonm4abr-4>li:before{content:"\0025cb  "}ul.lst-kix_1i6gptmikftw-7{list-style-type:none}ul.lst-kix_3lf77tl1pr30-7{list-style-type:none}.lst-kix_8qqlcreb4gi9-7>li:before{content:"\0025cb  "}ul.lst-kix_1i6gptmikftw-6{list-style-type:none}ul.lst-kix_3lf77tl1pr30-6{list-style-type:none}.lst-kix_2151lw9po4n2-6>li:before{content:"\0025cf  "}.lst-kix_a9wgeonm4abr-5>li:before{content:"\0025a0  "}.lst-kix_e771vgvj1z3x-4>li:before{content:"\0025cb  "}.lst-kix_2151lw9po4n2-5>li:before{content:"\0025a0  "}.lst-kix_qedi3ti5dma2-1>li:before{content:"\0025cb  "}ul.lst-kix_1i6gptmikftw-1{list-style-type:none}ul.lst-kix_1i6gptmikftw-0{list-style-type:none}.lst-kix_gubbebjwfu1f-3>li:before{content:"\0025cf  "}.lst-kix_qedi3ti5dma2-2>li:before{content:"\0025a0  "}.lst-kix_2151lw9po4n2-2>li:before{content:"\0025a0  "}ol.lst-kix_6ffqlpfm8a8u-3.start{counter-reset:lst-ctn-kix_6ffqlpfm8a8u-3 0}.lst-kix_dy60937dm7bn-3>li:before{content:"\0025cf  "}.lst-kix_2151lw9po4n2-1>li:before{content:"\0025cb  "}.lst-kix_gubbebjwfu1f-4>li:before{content:"\0025cb  "}.lst-kix_pjw9fvbjrcvk-0>li:before{content:"\0025cf  "}.lst-kix_dy60937dm7bn-2>li:before{content:"\0025a0  "}ul.lst-kix_1j4erolsobm1-2{list-style-type:none}.lst-kix_8qqlcreb4gi9-0>li:before{content:"\0025cf  "}ul.lst-kix_1j4erolsobm1-3{list-style-type:none}.lst-kix_a9wgeonm4abr-8>li:before{content:"\0025a0  "}ul.lst-kix_1j4erolsobm1-0{list-style-type:none}.lst-kix_pjw9fvbjrcvk-1>li:before{content:"\0025cb  "}ul.lst-kix_1j4erolsobm1-1{list-style-type:none}ul.lst-kix_3lf77tl1pr30-5{list-style-type:none}ul.lst-kix_1j4erolsobm1-6{list-style-type:none}ul.lst-kix_3lf77tl1pr30-4{list-style-type:none}.lst-kix_8qqlcreb4gi9-3>li:before{content:"\0025cf  "}ul.lst-kix_1j4erolsobm1-7{list-style-type:none}ul.lst-kix_3lf77tl1pr30-3{list-style-type:none}ul.lst-kix_1j4erolsobm1-4{list-style-type:none}.lst-kix_gubbebjwfu1f-8>li:before{content:"\0025a0  "}ul.lst-kix_3lf77tl1pr30-2{list-style-type:none}ul.lst-kix_1j4erolsobm1-5{list-style-type:none}ul.lst-kix_3lf77tl1pr30-1{list-style-type:none}ul.lst-kix_3lf77tl1pr30-0{list-style-type:none}ul.lst-kix_1j4erolsobm1-8{list-style-type:none}.lst-kix_gubbebjwfu1f-7>li:before{content:"\0025cb  "}ul.lst-kix_qedi3ti5dma2-5{list-style-type:none}ul.lst-kix_qedi3ti5dma2-6{list-style-type:none}ul.lst-kix_qedi3ti5dma2-7{list-style-type:none}ul.lst-kix_qedi3ti5dma2-8{list-style-type:none}ol.lst-kix_6ffqlpfm8a8u-2{list-style-type:none}ul.lst-kix_qedi3ti5dma2-1{list-style-type:none}ol.lst-kix_6ffqlpfm8a8u-1{list-style-type:none}ul.lst-kix_qedi3ti5dma2-2{list-style-type:none}ol.lst-kix_6ffqlpfm8a8u-0{list-style-type:none}ul.lst-kix_qedi3ti5dma2-3{list-style-type:none}ul.lst-kix_qedi3ti5dma2-4{list-style-type:none}ol.lst-kix_6ffqlpfm8a8u-6{list-style-type:none}.lst-kix_776urtvrz4fs-2>li:before{content:"\0025a0  "}ol.lst-kix_6ffqlpfm8a8u-5{list-style-type:none}ol.lst-kix_6ffqlpfm8a8u-4{list-style-type:none}ol.lst-kix_6ffqlpfm8a8u-3{list-style-type:none}ol.lst-kix_6ffqlpfm8a8u-8{list-style-type:none}.lst-kix_776urtvrz4fs-1>li:before{content:"\0025cb  "}ol.lst-kix_6ffqlpfm8a8u-7{list-style-type:none}ul.lst-kix_8qqlcreb4gi9-1{list-style-type:none}ul.lst-kix_8qqlcreb4gi9-0{list-style-type:none}.lst-kix_qedi3ti5dma2-5>li:before{content:"\0025a0  "}ul.lst-kix_8qqlcreb4gi9-3{list-style-type:none}ul.lst-kix_yz3qcgmzqyos-6{list-style-type:none}ul.lst-kix_8qqlcreb4gi9-2{list-style-type:none}ul.lst-kix_yz3qcgmzqyos-5{list-style-type:none}ul.lst-kix_8qqlcreb4gi9-5{list-style-type:none}ul.lst-kix_yz3qcgmzqyos-8{list-style-type:none}ul.lst-kix_8qqlcreb4gi9-4{list-style-type:none}ul.lst-kix_yz3qcgmzqyos-7{list-style-type:none}ul.lst-kix_8qqlcreb4gi9-7{list-style-type:none}ul.lst-kix_8qqlcreb4gi9-6{list-style-type:none}ul.lst-kix_8qqlcreb4gi9-8{list-style-type:none}ol.lst-kix_6ffqlpfm8a8u-2.start{counter-reset:lst-ctn-kix_6ffqlpfm8a8u-2 0}.lst-kix_qedi3ti5dma2-6>li:before{content:"\0025cf  "}.lst-kix_a9wgeonm4abr-1>li:before{content:"\0025cb  "}.lst-kix_1i6gptmikftw-5>li:before{content:"\0025a0  "}.lst-kix_a9wgeonm4abr-0>li:before{content:"\0025cf  "}.lst-kix_1i6gptmikftw-6>li:before{content:"\0025cf  "}ol.lst-kix_6ffqlpfm8a8u-7.start{counter-reset:lst-ctn-kix_6ffqlpfm8a8u-7 0}.lst-kix_776urtvrz4fs-6>li:before{content:"\0025cf  "}.lst-kix_1i6gptmikftw-1>li:before{content:"\0025cb  "}.lst-kix_1i6gptmikftw-2>li:before{content:"\0025a0  "}.lst-kix_776urtvrz4fs-5>li:before{content:"\0025a0  "}.lst-kix_ng6ognesc1lx-8>li:before{content:"\0025a0  "}ul.lst-kix_vnrcm0t6c2nt-8{list-style-type:none}ul.lst-kix_vnrcm0t6c2nt-7{list-style-type:none}ul.lst-kix_vnrcm0t6c2nt-6{list-style-type:none}.lst-kix_kf38y9f1865o-2>li:before{content:"\0025a0  "}.lst-kix_kf38y9f1865o-6>li:before{content:"\0025cf  "}.lst-kix_yz3qcgmzqyos-0>li:before{content:"\0025cf  "}.lst-kix_yz3qcgmzqyos-4>li:before{content:"\0025cb  "}ul.lst-kix_vnrcm0t6c2nt-1{list-style-type:none}ul.lst-kix_vnrcm0t6c2nt-0{list-style-type:none}ul.lst-kix_mxexm8dbrnf2-8{list-style-type:none}ul.lst-kix_mxexm8dbrnf2-7{list-style-type:none}ul.lst-kix_mxexm8dbrnf2-6{list-style-type:none}ul.lst-kix_hatxt72hx34n-7{list-style-type:none}.lst-kix_7gn3cyzba3ab-5>li:before{content:"\0025a0  "}ul.lst-kix_vnrcm0t6c2nt-5{list-style-type:none}ul.lst-kix_mxexm8dbrnf2-5{list-style-type:none}ul.lst-kix_hatxt72hx34n-6{list-style-type:none}ul.lst-kix_vnrcm0t6c2nt-4{list-style-type:none}ul.lst-kix_mxexm8dbrnf2-4{list-style-type:none}ol.lst-kix_6ffqlpfm8a8u-4.start{counter-reset:lst-ctn-kix_6ffqlpfm8a8u-4 0}ul.lst-kix_vnrcm0t6c2nt-3{list-style-type:none}ul.lst-kix_mxexm8dbrnf2-3{list-style-type:none}ul.lst-kix_hatxt72hx34n-8{list-style-type:none}.lst-kix_6ffqlpfm8a8u-0>li{counter-increment:lst-ctn-kix_6ffqlpfm8a8u-0}.lst-kix_k83hes5pcp4s-7>li:before{content:"\0025cb  "}ul.lst-kix_vnrcm0t6c2nt-2{list-style-type:none}ul.lst-kix_mxexm8dbrnf2-2{list-style-type:none}ul.lst-kix_hatxt72hx34n-3{list-style-type:none}ul.lst-kix_ng6ognesc1lx-3{list-style-type:none}ul.lst-kix_mxexm8dbrnf2-1{list-style-type:none}ul.lst-kix_hatxt72hx34n-2{list-style-type:none}.lst-kix_dlxp9ba8pb9h-6>li:before{content:"\0025cf  "}.lst-kix_ng6ognesc1lx-0>li:before{content:"\0025cf  "}ul.lst-kix_ng6ognesc1lx-2{list-style-type:none}ul.lst-kix_mxexm8dbrnf2-0{list-style-type:none}ul.lst-kix_hatxt72hx34n-5{list-style-type:none}ul.lst-kix_ng6ognesc1lx-1{list-style-type:none}ul.lst-kix_hatxt72hx34n-4{list-style-type:none}ul.lst-kix_ng6ognesc1lx-0{list-style-type:none}ul.lst-kix_ng6ognesc1lx-7{list-style-type:none}ul.lst-kix_ng6ognesc1lx-6{list-style-type:none}ul.lst-kix_hatxt72hx34n-1{list-style-type:none}ul.lst-kix_ng6ognesc1lx-5{list-style-type:none}ul.lst-kix_hatxt72hx34n-0{list-style-type:none}ul.lst-kix_ng6ognesc1lx-4{list-style-type:none}.lst-kix_ng6ognesc1lx-4>li:before{content:"\0025cb  "}ul.lst-kix_ng6ognesc1lx-8{list-style-type:none}.lst-kix_7gn3cyzba3ab-1>li:before{content:"\0025cb  "}.lst-kix_6ffqlpfm8a8u-6>li:before{content:"" counter(lst-ctn-kix_6ffqlpfm8a8u-6,decimal) ". "}.lst-kix_1j4erolsobm1-5>li:before{content:"\0025a0  "}.lst-kix_m1jt6hxo4lcq-4>li:before{content:"\0025cb  "}.lst-kix_hatxt72hx34n-0>li:before{content:"\0025cf  "}.lst-kix_dlxp9ba8pb9h-2>li:before{content:"\0025a0  "}.lst-kix_m1jt6hxo4lcq-0>li:before{content:"\0025cf  "}.lst-kix_m1jt6hxo4lcq-8>li:before{content:"\0025a0  "}.lst-kix_xa2tyq6ankh8-5>li:before{content:"\0025a0  "}.lst-kix_d1knaq1rozfz-7>li:before{content:"\0025cb  "}.lst-kix_6ffqlpfm8a8u-2>li:before{content:"" counter(lst-ctn-kix_6ffqlpfm8a8u-2,lower-roman) ". "}.lst-kix_yz3qcgmzqyos-8>li:before{content:"\0025a0  "}.lst-kix_1j4erolsobm1-1>li:before{content:"\0025cb  "}ul.lst-kix_qedi3ti5dma2-0{list-style-type:none}.lst-kix_xa2tyq6ankh8-1>li:before{content:"\0025cb  "}.lst-kix_d1knaq1rozfz-3>li:before{content:"\0025cf  "}.lst-kix_k83hes5pcp4s-3>li:before{content:"\0025cf  "}.lst-kix_3lf77tl1pr30-8>li:before{content:"\0025a0  "}.lst-kix_pjw9fvbjrcvk-8>li:before{content:"\0025a0  "}.lst-kix_6dd4bhw7lmvv-2>li:before{content:"\0025a0  "}.lst-kix_6dd4bhw7lmvv-6>li:before{content:"\0025cf  "}.lst-kix_pjw9fvbjrcvk-4>li:before{content:"\0025cb  "}.lst-kix_3lf77tl1pr30-4>li:before{content:"\0025cb  "}.lst-kix_iotbe2cpvfyr-4>li:before{content:"\0025cb  "}.lst-kix_kqhtq93lvmrp-7>li:before{content:"\0025cb  "}.lst-kix_4f2csfb78yfx-1>li:before{content:"\0025cb  "}ul.lst-kix_7gn3cyzba3ab-1{list-style-type:none}ul.lst-kix_7gn3cyzba3ab-2{list-style-type:none}.lst-kix_q04a1iu0lxct-4>li:before{content:"\0025cb  "}.lst-kix_4wg0fmgu07r4-2>li:before{content:"\0025a0  "}ul.lst-kix_7gn3cyzba3ab-0{list-style-type:none}.lst-kix_3lf77tl1pr30-0>li:before{content:"\0025cf  "}.lst-kix_kqhtq93lvmrp-3>li:before{content:"\0025cf  "}.lst-kix_q04a1iu0lxct-8>li:before{content:"\0025a0  "}ul.lst-kix_7gn3cyzba3ab-7{list-style-type:none}.lst-kix_gubbebjwfu1f-0>li:before{content:"\0025cf  "}ul.lst-kix_7gn3cyzba3ab-8{list-style-type:none}.lst-kix_kjowfq3cv3xf-2>li:before{content:"\0025a0  "}ul.lst-kix_7gn3cyzba3ab-5{list-style-type:none}.lst-kix_iotbe2cpvfyr-8>li:before{content:"\0025a0  "}ul.lst-kix_7gn3cyzba3ab-6{list-style-type:none}ul.lst-kix_7gn3cyzba3ab-3{list-style-type:none}.lst-kix_hatxt72hx34n-4>li:before{content:"\0025cb  "}ul.lst-kix_7gn3cyzba3ab-4{list-style-type:none}.lst-kix_6ffqlpfm8a8u-5>li{counter-increment:lst-ctn-kix_6ffqlpfm8a8u-5}ol.lst-kix_6ffqlpfm8a8u-5.start{counter-reset:lst-ctn-kix_6ffqlpfm8a8u-5 0}.lst-kix_hatxt72hx34n-8>li:before{content:"\0025a0  "}.lst-kix_yz56o84pgchk-6>li:before{content:"\0025cf  "}.lst-kix_4f2csfb78yfx-5>li:before{content:"\0025a0  "}.lst-kix_q04a1iu0lxct-0>li:before{content:"\0025cf  "}.lst-kix_4wg0fmgu07r4-6>li:before{content:"\0025cf  "}.lst-kix_e596asp7nqdg-1>li:before{content:"\0025cb  "}.lst-kix_iotbe2cpvfyr-0>li:before{content:"\0025cf  "}.lst-kix_s21zi9nvc79q-3>li:before{content:"\0025cf  "}.lst-kix_s21zi9nvc79q-4>li:before{content:"\0025cb  "}.lst-kix_s21zi9nvc79q-1>li:before{content:"\0025cb  "}.lst-kix_s21zi9nvc79q-2>li:before{content:"\0025a0  "}.lst-kix_s21zi9nvc79q-5>li:before{content:"\0025a0  "}.lst-kix_s21zi9nvc79q-6>li:before{content:"\0025cf  "}.lst-kix_s21zi9nvc79q-0>li:before{content:"\0025cf  "}.lst-kix_s21zi9nvc79q-7>li:before{content:"\0025cb  "}.lst-kix_s21zi9nvc79q-8>li:before{content:"\0025a0  "}ul.lst-kix_yz56o84pgchk-4{list-style-type:none}ul.lst-kix_yz56o84pgchk-3{list-style-type:none}ul.lst-kix_yz56o84pgchk-6{list-style-type:none}ul.lst-kix_yz56o84pgchk-5{list-style-type:none}ul.lst-kix_yz56o84pgchk-8{list-style-type:none}ul.lst-kix_yz56o84pgchk-7{list-style-type:none}ul.lst-kix_q04a1iu0lxct-7{list-style-type:none}ul.lst-kix_yz56o84pgchk-0{list-style-type:none}ul.lst-kix_q04a1iu0lxct-8{list-style-type:none}ul.lst-kix_q04a1iu0lxct-5{list-style-type:none}ul.lst-kix_yz56o84pgchk-2{list-style-type:none}ul.lst-kix_q04a1iu0lxct-6{list-style-type:none}ul.lst-kix_yz56o84pgchk-1{list-style-type:none}ul.lst-kix_q04a1iu0lxct-3{list-style-type:none}.lst-kix_2okxd4441ckb-7>li:before{content:"\0025cb  "}ul.lst-kix_q04a1iu0lxct-4{list-style-type:none}ul.lst-kix_q04a1iu0lxct-1{list-style-type:none}ol.lst-kix_6ffqlpfm8a8u-0.start{counter-reset:lst-ctn-kix_6ffqlpfm8a8u-0 0}ul.lst-kix_q04a1iu0lxct-2{list-style-type:none}ul.lst-kix_6dd4bhw7lmvv-0{list-style-type:none}ul.lst-kix_q04a1iu0lxct-0{list-style-type:none}ul.lst-kix_6dd4bhw7lmvv-1{list-style-type:none}.lst-kix_2okxd4441ckb-4>li:before{content:"\0025cb  "}.lst-kix_2okxd4441ckb-8>li:before{content:"\0025a0  "}ul.lst-kix_6dd4bhw7lmvv-2{list-style-type:none}ul.lst-kix_6dd4bhw7lmvv-3{list-style-type:none}ul.lst-kix_6dd4bhw7lmvv-4{list-style-type:none}ul.lst-kix_6dd4bhw7lmvv-5{list-style-type:none}ul.lst-kix_6dd4bhw7lmvv-6{list-style-type:none}ul.lst-kix_6dd4bhw7lmvv-7{list-style-type:none}.lst-kix_2okxd4441ckb-5>li:before{content:"\0025a0  "}ul.lst-kix_6dd4bhw7lmvv-8{list-style-type:none}.lst-kix_2okxd4441ckb-6>li:before{content:"\0025cf  "}ul.lst-kix_iotbe2cpvfyr-4{list-style-type:none}ul.lst-kix_iotbe2cpvfyr-5{list-style-type:none}ul.lst-kix_iotbe2cpvfyr-2{list-style-type:none}ul.lst-kix_iotbe2cpvfyr-3{list-style-type:none}ul.lst-kix_iotbe2cpvfyr-8{list-style-type:none}.lst-kix_mxexm8dbrnf2-0>li:before{content:"\0025cf  "}ul.lst-kix_iotbe2cpvfyr-6{list-style-type:none}.lst-kix_2okxd4441ckb-0>li:before{content:"\0025cf  "}ul.lst-kix_iotbe2cpvfyr-7{list-style-type:none}.lst-kix_2okxd4441ckb-3>li:before{content:"\0025cf  "}ul.lst-kix_iotbe2cpvfyr-0{list-style-type:none}.lst-kix_2okxd4441ckb-1>li:before{content:"\0025cb  "}ul.lst-kix_iotbe2cpvfyr-1{list-style-type:none}.lst-kix_2okxd4441ckb-2>li:before{content:"\0025a0  "}.lst-kix_mxexm8dbrnf2-1>li:before{content:"\0025cb  "}.lst-kix_mxexm8dbrnf2-2>li:before{content:"\0025a0  "}ul.lst-kix_kf38y9f1865o-1{list-style-type:none}ul.lst-kix_kf38y9f1865o-0{list-style-type:none}ul.lst-kix_kf38y9f1865o-3{list-style-type:none}.lst-kix_mxexm8dbrnf2-4>li:before{content:"\0025cb  "}ul.lst-kix_kf38y9f1865o-2{list-style-type:none}ul.lst-kix_kf38y9f1865o-5{list-style-type:none}.lst-kix_mxexm8dbrnf2-3>li:before{content:"\0025cf  "}ul.lst-kix_kf38y9f1865o-4{list-style-type:none}ul.lst-kix_e771vgvj1z3x-1{list-style-type:none}ul.lst-kix_kf38y9f1865o-7{list-style-type:none}.lst-kix_mxexm8dbrnf2-6>li:before{content:"\0025cf  "}ul.lst-kix_e771vgvj1z3x-0{list-style-type:none}ul.lst-kix_kf38y9f1865o-6{list-style-type:none}ul.lst-kix_kf38y9f1865o-8{list-style-type:none}.lst-kix_mxexm8dbrnf2-5>li:before{content:"\0025a0  "}ul.lst-kix_e771vgvj1z3x-8{list-style-type:none}ul.lst-kix_e771vgvj1z3x-7{list-style-type:none}ul.lst-kix_e771vgvj1z3x-6{list-style-type:none}.lst-kix_mxexm8dbrnf2-8>li:before{content:"\0025a0  "}ul.lst-kix_e771vgvj1z3x-5{list-style-type:none}ul.lst-kix_e771vgvj1z3x-4{list-style-type:none}ul.lst-kix_e771vgvj1z3x-3{list-style-type:none}ul.lst-kix_e771vgvj1z3x-2{list-style-type:none}.lst-kix_mxexm8dbrnf2-7>li:before{content:"\0025cb  "}ul.lst-kix_k83hes5pcp4s-6{list-style-type:none}ul.lst-kix_k83hes5pcp4s-7{list-style-type:none}ul.lst-kix_k83hes5pcp4s-8{list-style-type:none}ul.lst-kix_k83hes5pcp4s-2{list-style-type:none}ul.lst-kix_k83hes5pcp4s-3{list-style-type:none}ul.lst-kix_k83hes5pcp4s-4{list-style-type:none}ul.lst-kix_k83hes5pcp4s-5{list-style-type:none}ul.lst-kix_k83hes5pcp4s-0{list-style-type:none}ul.lst-kix_k83hes5pcp4s-1{list-style-type:none}.lst-kix_kf38y9f1865o-3>li:before{content:"\0025cf  "}.lst-kix_kf38y9f1865o-5>li:before{content:"\0025a0  "}.lst-kix_k83hes5pcp4s-8>li:before{content:"\0025a0  "}.lst-kix_xa2tyq6ankh8-8>li:before{content:"\0025a0  "}.lst-kix_kf38y9f1865o-1>li:before{content:"\0025cb  "}.lst-kix_6ffqlpfm8a8u-5>li:before{content:"" counter(lst-ctn-kix_6ffqlpfm8a8u-5,lower-roman) ". "}.lst-kix_1j4erolsobm1-8>li:before{content:"\0025a0  "}.lst-kix_m1jt6hxo4lcq-3>li:before{content:"\0025cf  "}.lst-kix_hatxt72hx34n-3>li:before{content:"\0025cf  "}.lst-kix_m1jt6hxo4lcq-1>li:before{content:"\0025cb  "}.lst-kix_m1jt6hxo4lcq-5>li:before{content:"\0025a0  "}.lst-kix_1j4erolsobm1-2>li:before{content:"\0025a0  "}.lst-kix_1j4erolsobm1-6>li:before{content:"\0025cf  "}.lst-kix_xa2tyq6ankh8-0>li:before{content:"\0025cf  "}.lst-kix_m1jt6hxo4lcq-7>li:before{content:"\0025cb  "}.lst-kix_hatxt72hx34n-1>li:before{content:"\0025cb  "}.lst-kix_6ffqlpfm8a8u-3>li:before{content:"" counter(lst-ctn-kix_6ffqlpfm8a8u-3,decimal) ". "}.lst-kix_k83hes5pcp4s-0>li:before{content:"\0025cf  "}.lst-kix_1j4erolsobm1-4>li:before{content:"\0025cb  "}.lst-kix_xa2tyq6ankh8-6>li:before{content:"\0025cf  "}.lst-kix_6ffqlpfm8a8u-1>li:before{content:"" counter(lst-ctn-kix_6ffqlpfm8a8u-1,lower-latin) ". "}.lst-kix_k83hes5pcp4s-4>li:before{content:"\0025cb  "}.lst-kix_k83hes5pcp4s-6>li:before{content:"\0025cf  "}.lst-kix_xa2tyq6ankh8-4>li:before{content:"\0025cb  "}.lst-kix_6ffqlpfm8a8u-1>li{counter-increment:lst-ctn-kix_6ffqlpfm8a8u-1}.lst-kix_k83hes5pcp4s-2>li:before{content:"\0025a0  "}.lst-kix_1j4erolsobm1-0>li:before{content:"\0025cf  "}.lst-kix_xa2tyq6ankh8-2>li:before{content:"\0025a0  "}.lst-kix_4f2csfb78yfx-0>li:before{content:"\0025cf  "}ul.lst-kix_m1jt6hxo4lcq-7{list-style-type:none}ul.lst-kix_m1jt6hxo4lcq-6{list-style-type:none}ul.lst-kix_m1jt6hxo4lcq-5{list-style-type:none}ul.lst-kix_m1jt6hxo4lcq-4{list-style-type:none}ul.lst-kix_m1jt6hxo4lcq-8{list-style-type:none}.lst-kix_4f2csfb78yfx-8>li:before{content:"\0025a0  "}.lst-kix_hatxt72hx34n-5>li:before{content:"\0025a0  "}.lst-kix_6ffqlpfm8a8u-7>li:before{content:"" counter(lst-ctn-kix_6ffqlpfm8a8u-7,lower-latin) ". "}ul.lst-kix_m1jt6hxo4lcq-3{list-style-type:none}ul.lst-kix_kjowfq3cv3xf-1{list-style-type:none}ul.lst-kix_m1jt6hxo4lcq-2{list-style-type:none}ul.lst-kix_kjowfq3cv3xf-0{list-style-type:none}ul.lst-kix_m1jt6hxo4lcq-1{list-style-type:none}ul.lst-kix_kjowfq3cv3xf-3{list-style-type:none}ul.lst-kix_m1jt6hxo4lcq-0{list-style-type:none}.lst-kix_6ffqlpfm8a8u-2>li{counter-increment:lst-ctn-kix_6ffqlpfm8a8u-2}ul.lst-kix_kjowfq3cv3xf-2{list-style-type:none}ul.lst-kix_s21zi9nvc79q-3{list-style-type:none}ul.lst-kix_s21zi9nvc79q-4{list-style-type:none}ul.lst-kix_s21zi9nvc79q-1{list-style-type:none}.lst-kix_hatxt72hx34n-7>li:before{content:"\0025cb  "}ul.lst-kix_s21zi9nvc79q-2{list-style-type:none}.lst-kix_6ffqlpfm8a8u-8>li{counter-increment:lst-ctn-kix_6ffqlpfm8a8u-8}ul.lst-kix_s21zi9nvc79q-0{list-style-type:none}.lst-kix_4f2csfb78yfx-2>li:before{content:"\0025a0  "}ul.lst-kix_s21zi9nvc79q-7{list-style-type:none}ul.lst-kix_s21zi9nvc79q-8{list-style-type:none}ul.lst-kix_s21zi9nvc79q-5{list-style-type:none}ul.lst-kix_s21zi9nvc79q-6{list-style-type:none}ul.lst-kix_kjowfq3cv3xf-5{list-style-type:none}ul.lst-kix_kjowfq3cv3xf-4{list-style-type:none}.lst-kix_4f2csfb78yfx-4>li:before{content:"\0025cb  "}.lst-kix_4f2csfb78yfx-6>li:before{content:"\0025cf  "}ul.lst-kix_kjowfq3cv3xf-7{list-style-type:none}ul.lst-kix_kjowfq3cv3xf-6{list-style-type:none}ul.lst-kix_kjowfq3cv3xf-8{list-style-type:none}.lst-kix_yz56o84pgchk-1>li:before{content:"\0025cb  "}.lst-kix_yz56o84pgchk-0>li:before{content:"\0025cf  "}.lst-kix_dy60937dm7bn-4>li:before{content:"\0025cb  "}.lst-kix_e596asp7nqdg-6>li:before{content:"\0025cf  "}.lst-kix_dy60937dm7bn-5>li:before{content:"\0025a0  "}.lst-kix_e596asp7nqdg-7>li:before{content:"\0025cb  "}.lst-kix_6ffqlpfm8a8u-6>li{counter-increment:lst-ctn-kix_6ffqlpfm8a8u-6}.lst-kix_dy60937dm7bn-8>li:before{content:"\0025a0  "}.lst-kix_e771vgvj1z3x-1>li:before{content:"\0025cb  "}.lst-kix_8qqlcreb4gi9-6>li:before{content:"\0025cf  "}.lst-kix_a9wgeonm4abr-2>li:before{content:"\0025a0  "}.lst-kix_e771vgvj1z3x-2>li:before{content:"\0025a0  "}.lst-kix_2151lw9po4n2-8>li:before{content:"\0025a0  "}.lst-kix_a9wgeonm4abr-3>li:before{content:"\0025cf  "}.lst-kix_qedi3ti5dma2-0>li:before{content:"\0025cf  "}.lst-kix_e771vgvj1z3x-5>li:before{content:"\0025a0  "}.lst-kix_a9wgeonm4abr-6>li:before{content:"\0025cf  "}.lst-kix_e771vgvj1z3x-6>li:before{content:"\0025cf  "}.lst-kix_2151lw9po4n2-7>li:before{content:"\0025cb  "}.lst-kix_8qqlcreb4gi9-5>li:before{content:"\0025a0  "}.lst-kix_2151lw9po4n2-3>li:before{content:"\0025cf  "}.lst-kix_pjw9fvbjrcvk-2>li:before{content:"\0025a0  "}.lst-kix_2151lw9po4n2-0>li:before{content:"\0025cf  "}.lst-kix_2151lw9po4n2-4>li:before{content:"\0025cb  "}.lst-kix_a9wgeonm4abr-7>li:before{content:"\0025cb  "}.lst-kix_gubbebjwfu1f-5>li:before{content:"\0025a0  "}.lst-kix_dy60937dm7bn-0>li:before{content:"\0025cf  "}.lst-kix_8qqlcreb4gi9-2>li:before{content:"\0025a0  "}.lst-kix_dy60937dm7bn-1>li:before{content:"\0025cb  "}.lst-kix_gubbebjwfu1f-6>li:before{content:"\0025cf  "}.lst-kix_6ffqlpfm8a8u-4>li{counter-increment:lst-ctn-kix_6ffqlpfm8a8u-4}.lst-kix_8qqlcreb4gi9-1>li:before{content:"\0025cb  "}ul.lst-kix_4f2csfb78yfx-0{list-style-type:none}ul.lst-kix_4f2csfb78yfx-2{list-style-type:none}ul.lst-kix_4f2csfb78yfx-1{list-style-type:none}.lst-kix_776urtvrz4fs-0>li:before{content:"\0025cf  "}.lst-kix_qedi3ti5dma2-3>li:before{content:"\0025cf  "}.lst-kix_qedi3ti5dma2-4>li:before{content:"\0025cb  "}.lst-kix_qedi3ti5dma2-8>li:before{content:"\0025a0  "}.lst-kix_qedi3ti5dma2-7>li:before{content:"\0025cb  "}.lst-kix_1i6gptmikftw-8>li:before{content:"\0025a0  "}.lst-kix_1i6gptmikftw-7>li:before{content:"\0025cb  "}ul.lst-kix_e596asp7nqdg-6{list-style-type:none}ul.lst-kix_e596asp7nqdg-5{list-style-type:none}ul.lst-kix_e596asp7nqdg-8{list-style-type:none}ul.lst-kix_e596asp7nqdg-7{list-style-type:none}.lst-kix_1i6gptmikftw-3>li:before{content:"\0025cf  "}.lst-kix_776urtvrz4fs-8>li:before{content:"\0025a0  "}.lst-kix_1i6gptmikftw-4>li:before{content:"\0025cb  "}.lst-kix_776urtvrz4fs-7>li:before{content:"\0025cb  "}.lst-kix_776urtvrz4fs-3>li:before{content:"\0025cf  "}.lst-kix_kf38y9f1865o-8>li:before{content:"\0025a0  "}ul.lst-kix_e596asp7nqdg-2{list-style-type:none}ul.lst-kix_e596asp7nqdg-1{list-style-type:none}.lst-kix_kf38y9f1865o-7>li:before{content:"\0025cb  "}ul.lst-kix_e596asp7nqdg-4{list-style-type:none}ul.lst-kix_e596asp7nqdg-3{list-style-type:none}.lst-kix_776urtvrz4fs-4>li:before{content:"\0025cb  "}.lst-kix_1i6gptmikftw-0>li:before{content:"\0025cf  "}ul.lst-kix_e596asp7nqdg-0{list-style-type:none}.lst-kix_7gn3cyzba3ab-7>li:before{content:"\0025cb  "}.lst-kix_kf38y9f1865o-4>li:before{content:"\0025cb  "}.lst-kix_ng6ognesc1lx-6>li:before{content:"\0025cf  "}.lst-kix_7gn3cyzba3ab-3>li:before{content:"\0025cf  "}.lst-kix_yz3qcgmzqyos-6>li:before{content:"\0025cf  "}.lst-kix_xa2tyq6ankh8-7>li:before{content:"\0025cb  "}.lst-kix_dlxp9ba8pb9h-4>li:before{content:"\0025cb  "}.lst-kix_dlxp9ba8pb9h-8>li:before{content:"\0025a0  "}.lst-kix_ng6ognesc1lx-2>li:before{content:"\0025a0  "}.lst-kix_6ffqlpfm8a8u-4>li:before{content:"" counter(lst-ctn-kix_6ffqlpfm8a8u-4,lower-latin) ". "}.lst-kix_kf38y9f1865o-0>li:before{content:"\0025cf  "}.lst-kix_1j4erolsobm1-7>li:before{content:"\0025cb  "}.lst-kix_yz3qcgmzqyos-2>li:before{content:"\0025a0  "}ul.lst-kix_dy60937dm7bn-2{list-style-type:none}.lst-kix_d1knaq1rozfz-5>li:before{content:"\0025a0  "}ul.lst-kix_dy60937dm7bn-1{list-style-type:none}.lst-kix_m1jt6hxo4lcq-2>li:before{content:"\0025a0  "}ul.lst-kix_dy60937dm7bn-4{list-style-type:none}ul.lst-kix_dy60937dm7bn-3{list-style-type:none}.lst-kix_hatxt72hx34n-2>li:before{content:"\0025a0  "}.lst-kix_kqhtq93lvmrp-1>li:before{content:"\0025cb  "}.lst-kix_dlxp9ba8pb9h-0>li:before{content:"\0025cf  "}ul.lst-kix_2okxd4441ckb-8{list-style-type:none}ul.lst-kix_2okxd4441ckb-7{list-style-type:none}ul.lst-kix_dy60937dm7bn-0{list-style-type:none}.lst-kix_k83hes5pcp4s-1>li:before{content:"\0025cb  "}ul.lst-kix_2okxd4441ckb-6{list-style-type:none}ul.lst-kix_2okxd4441ckb-5{list-style-type:none}ul.lst-kix_2okxd4441ckb-4{list-style-type:none}.lst-kix_m1jt6hxo4lcq-6>li:before{content:"\0025cf  "}ul.lst-kix_2okxd4441ckb-3{list-style-type:none}ul.lst-kix_2okxd4441ckb-2{list-style-type:none}ul.lst-kix_2okxd4441ckb-1{list-style-type:none}.lst-kix_1j4erolsobm1-3>li:before{content:"\0025cf  "}ul.lst-kix_2okxd4441ckb-0{list-style-type:none}.lst-kix_d1knaq1rozfz-1>li:before{content:"\0025cb  "}.lst-kix_6ffqlpfm8a8u-0>li:before{content:"" counter(lst-ctn-kix_6ffqlpfm8a8u-0,decimal) ". "}.lst-kix_k83hes5pcp4s-5>li:before{content:"\0025a0  "}ul.lst-kix_4f2csfb78yfx-4{list-style-type:none}.lst-kix_xa2tyq6ankh8-3>li:before{content:"\0025cf  "}ul.lst-kix_4f2csfb78yfx-3{list-style-type:none}ul.lst-kix_4f2csfb78yfx-6{list-style-type:none}ul.lst-kix_4f2csfb78yfx-5{list-style-type:none}ul.lst-kix_4f2csfb78yfx-8{list-style-type:none}ul.lst-kix_dy60937dm7bn-6{list-style-type:none}ul.lst-kix_4f2csfb78yfx-7{list-style-type:none}ul.lst-kix_dy60937dm7bn-5{list-style-type:none}ul.lst-kix_dy60937dm7bn-8{list-style-type:none}ul.lst-kix_dy60937dm7bn-7{list-style-type:none}ul.lst-kix_nd6w1jiz3gae-3{list-style-type:none}ul.lst-kix_xa2tyq6ankh8-6{list-style-type:none}ul.lst-kix_nd6w1jiz3gae-2{list-style-type:none}.lst-kix_iotbe2cpvfyr-6>li:before{content:"\0025cf  "}ul.lst-kix_xa2tyq6ankh8-7{list-style-type:none}ul.lst-kix_nd6w1jiz3gae-1{list-style-type:none}ul.lst-kix_xa2tyq6ankh8-8{list-style-type:none}ul.lst-kix_nd6w1jiz3gae-0{list-style-type:none}ul.lst-kix_nd6w1jiz3gae-7{list-style-type:none}ul.lst-kix_nd6w1jiz3gae-6{list-style-type:none}ul.lst-kix_nd6w1jiz3gae-5{list-style-type:none}ul.lst-kix_nd6w1jiz3gae-4{list-style-type:none}.lst-kix_iotbe2cpvfyr-2>li:before{content:"\0025a0  "}.lst-kix_4wg0fmgu07r4-4>li:before{content:"\0025cb  "}.lst-kix_6dd4bhw7lmvv-4>li:before{content:"\0025cb  "}ul.lst-kix_d1knaq1rozfz-7{list-style-type:none}ul.lst-kix_d1knaq1rozfz-8{list-style-type:none}ul.lst-kix_d1knaq1rozfz-5{list-style-type:none}.lst-kix_gubbebjwfu1f-2>li:before{content:"\0025a0  "}.lst-kix_3lf77tl1pr30-2>li:before{content:"\0025a0  "}ul.lst-kix_d1knaq1rozfz-6{list-style-type:none}ul.lst-kix_d1knaq1rozfz-3{list-style-type:none}.lst-kix_kqhtq93lvmrp-5>li:before{content:"\0025a0  "}.lst-kix_q04a1iu0lxct-6>li:before{content:"\0025cf  "}ul.lst-kix_d1knaq1rozfz-4{list-style-type:none}ul.lst-kix_d1knaq1rozfz-1{list-style-type:none}ul.lst-kix_d1knaq1rozfz-2{list-style-type:none}.lst-kix_pjw9fvbjrcvk-6>li:before{content:"\0025cf  "}.lst-kix_4wg0fmgu07r4-0>li:before{content:"\0025cf  "}.lst-kix_6dd4bhw7lmvv-0>li:before{content:"\0025cf  "}.lst-kix_kjowfq3cv3xf-0>li:before{content:"\0025cf  "}.lst-kix_4f2csfb78yfx-7>li:before{content:"\0025cb  "}.lst-kix_hatxt72hx34n-6>li:before{content:"\0025cf  "}.lst-kix_6ffqlpfm8a8u-8>li:before{content:"" counter(lst-ctn-kix_6ffqlpfm8a8u-8,lower-roman) ". "}ul.lst-kix_d1knaq1rozfz-0{list-style-type:none}li.li-bullet-0:before{margin-left:-18pt;white-space:nowrap;display:inline-block;min-width:18pt}.lst-kix_yz56o84pgchk-8>li:before{content:"\0025a0  "}.lst-kix_4f2csfb78yfx-3>li:before{content:"\0025cf  "}.lst-kix_q04a1iu0lxct-2>li:before{content:"\0025a0  "}.lst-kix_e596asp7nqdg-3>li:before{content:"\0025cf  "}.lst-kix_3lf77tl1pr30-6>li:before{content:"\0025cf  "}ul.lst-kix_xa2tyq6ankh8-0{list-style-type:none}ul.lst-kix_nd6w1jiz3gae-8{list-style-type:none}ul.lst-kix_xa2tyq6ankh8-1{list-style-type:none}ul.lst-kix_xa2tyq6ankh8-2{list-style-type:none}.lst-kix_4wg0fmgu07r4-8>li:before{content:"\0025a0  "}ul.lst-kix_xa2tyq6ankh8-3{list-style-type:none}.lst-kix_6dd4bhw7lmvv-8>li:before{content:"\0025a0  "}ul.lst-kix_xa2tyq6ankh8-4{list-style-type:none}.lst-kix_yz56o84pgchk-4>li:before{content:"\0025cb  "}ul.lst-kix_xa2tyq6ankh8-5{list-style-type:none}ol{margin:0;padding:0}table td,table th{padding:0}.c31{border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#000000;border-top-width:0pt;border-right-width:0pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:0pt;border-top-style:solid;background-color:#ffffff;border-left-style:solid;border-bottom-width:0pt;width:451.4pt;border-top-color:#000000;border-bottom-style:solid}.c16{margin-left:108pt;padding-top:0pt;padding-left:0pt;padding-bottom:0pt;line-height:1.15;orphans:2;widows:2;text-align:left}.c6{margin-left:72pt;padding-top:0pt;padding-left:0pt;padding-bottom:0pt;line-height:1.15;orphans:2;widows:2;text-align:left}.c10{margin-left:36pt;padding-top:0pt;padding-left:0pt;padding-bottom:0pt;line-height:1.15;orphans:2;widows:2;text-align:left}.c24{padding-top:18pt;padding-bottom:6pt;line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}.c43{padding-top:12pt;padding-bottom:12pt;line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}.c14{padding-top:0pt;padding-bottom:0pt;line-height:1.15;orphans:2;widows:2;text-align:left;height:11pt}.c34{padding-top:16pt;padding-bottom:4pt;line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}.c12{margin-left:72pt;padding-top:0pt;padding-bottom:0pt;line-height:1.15;orphans:2;widows:2;text-align:left}.c42{padding-top:20pt;padding-bottom:6pt;line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}.c4{color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:"Arial";font-style:normal}.c49{padding-top:18pt;padding-bottom:6pt;line-height:1.15;page-break-after:avoid;text-align:left}.c71{color:#666666;text-decoration:none;vertical-align:baseline;font-size:12pt;font-style:normal}.c7{background-color:#ffff00;text-decoration-skip-ink:none;-webkit-text-decoration-skip:none;font-style:italic;text-decoration:underline}.c72{padding-top:20pt;padding-bottom:6pt;line-height:1.15;page-break-after:avoid;text-align:left}.c74{padding-top:0pt;padding-bottom:3pt;line-height:1.15;page-break-after:avoid;text-align:left}.c67{padding-top:14pt;padding-bottom:4pt;line-height:1.15;page-break-after:avoid;text-align:left}.c38{color:#434343;text-decoration:none;vertical-align:baseline;font-size:14pt;font-style:normal}.c44{margin-left:180pt;padding-left:0pt;orphans:2;widows:2}.c35{background-color:#ffffff;font-family:"Consolas";color:#0086b3;font-weight:400}.c45{padding-top:12pt;padding-bottom:12pt;line-height:1.15;text-align:left}.c3{background-color:#ffffff;font-family:"Consolas";color:#969896;font-weight:400}.c63{padding-top:0pt;padding-bottom:0pt;line-height:1.0;text-align:left}.c60{padding-top:0pt;padding-bottom:12pt;line-height:1.15;text-align:left}.c2{background-color:#ffffff;font-family:"Consolas";color:#a71d5d;font-weight:400}.c40{color:#000000;text-decoration:none;vertical-align:baseline;font-style:normal}.c51{margin-left:216pt;padding-left:0pt;orphans:2;widows:2}.c19{margin-left:144pt;padding-left:0pt;orphans:2;widows:2}.c0{background-color:#ffffff;font-family:"Consolas";color:#333333;font-weight:400}.c28{text-decoration:none;vertical-align:baseline;font-size:11pt;font-style:normal}.c18{padding-top:0pt;padding-bottom:0pt;line-height:1.15;text-align:left}.c32{border-spacing:0;border-collapse:collapse;margin-right:auto}.c22{background-color:#ffffff;font-family:"Consolas";color:#df5000;font-weight:400}.c30{color:#0000cd;font-weight:400;font-family:"Arial"}.c27{font-family:"Consolas";color:#969896;font-weight:400}.c26{margin-left:144pt;orphans:2;widows:2}.c21{font-family:"Consolas";color:#a71d5d;font-weight:400}.c39{margin-left:36pt;orphans:2;widows:2}.c64{color:#000000;text-decoration:none;vertical-align:baseline}.c61{background-color:#ffffff;max-width:451.4pt;padding:72pt 72pt 72pt 72pt}.c29{text-decoration-skip-ink:none;-webkit-text-decoration-skip:none;text-decoration:underline}.c25{font-family:"Consolas";color:#333333;font-weight:400}.c50{font-family:"Consolas";color:#df5000;font-weight:400}.c8{padding:0;margin:0}.c69{width:33%;height:1px}.c17{font-family:"Courier New";font-weight:400}.c57{margin-left:72pt;padding-left:0pt}.c36{font-weight:400;font-family:"Arial"}.c52{orphans:2;widows:2}.c11{color:inherit;text-decoration:inherit}.c66{color:#000000;vertical-align:baseline}.c62{margin-left:36pt;padding-left:0pt}.c15{text-indent:36pt}.c70{font-size:26pt}.c37{color:#1155cc}.c5{color:#ff0000}.c73{font-size:13pt}.c65{background-color:#00ffff}.c47{font-size:11pt}.c54{font-family:"Arial"}.c59{font-style:italic}.c56{height:11pt}.c68{padding-left:0pt}.c9{background-color:#00ff00}.c33{height:0pt}.c23{font-size:10pt}.c58{color:#a52a2a}.c20{color:#9900ff}.c13{background-color:#ffff00}.c53{color:#0000cd}.c48{color:#0000ff}.c46{font-size:20pt}.c41{font-size:16pt}.c55{margin-left:108pt}.c1{font-weight:700}.title{padding-top:0pt;color:#000000;font-size:26pt;padding-bottom:3pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}.subtitle{padding-top:0pt;color:#666666;font-size:15pt;padding-bottom:16pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}li{color:#000000;font-size:11pt;font-family:"Arial"}p{margin:0;color:#000000;font-size:11pt;font-family:"Arial"}h1{padding-top:20pt;color:#000000;font-size:20pt;padding-bottom:6pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h2{padding-top:18pt;color:#000000;font-size:16pt;padding-bottom:6pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h3{padding-top:16pt;color:#434343;font-size:14pt;padding-bottom:4pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h4{padding-top:14pt;color:#666666;font-size:12pt;padding-bottom:4pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h5{padding-top:12pt;color:#666666;font-size:11pt;padding-bottom:4pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h6{padding-top:12pt;color:#666666;font-size:11pt;padding-bottom:4pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;font-style:italic;orphans:2;widows:2;text-align:left}</style></head><body class="c61"><p class="c52 c74 title" id="h.aoiowg8av96t"><span class="c40 c36 c70">Databases</span></p><h1 class="c42" id="h.350jpshcjzw2"><span class="c40 c36 c46">1.1 Introduction</span></h1><h2 class="c24" id="h.o7s4lmavet7"><span class="c40 c36 c41">What is a DBMS ?</span></h2><ul class="c8 lst-kix_mxexm8dbrnf2-0 start"><li class="c10 li-bullet-0"><span>A database management system (DBMS) provides </span><span class="c5 c1">efficient</span><span>, </span><span class="c5 c1">reliable</span><span>, </span><span class="c5 c1">convenient</span><span>&nbsp;and </span><span class="c5 c1">safe</span><span>&nbsp;</span><span class="c5 c1">multi-user</span><span>&nbsp;</span><span class="c1">storage of</span><span>&nbsp;and </span><span class="c1">access to</span><span>&nbsp;</span><span class="c5 c1">massive</span><span>&nbsp;amounts of </span><span class="c5 c1">persistent</span><span class="c4">&nbsp;data.</span></li></ul><ul class="c8 lst-kix_mxexm8dbrnf2-1 start"><li class="c6 li-bullet-0"><span class="c5 c1">massive</span><span>&nbsp;scale: So if you think about the amount of data that is being produced today, </span><span class="c7">database systems are handling terabytes of data</span><span>, sometimes even terabytes of data every day. And one of the critical aspects is that the data that&#39;s handled by database management systems systems is </span><span class="c7">much larger than can fit in the memory of a typical computing system</span><span>. So memories are indeed growing very, very fast, but the amount of data in the world and data to be handled by database systems is growing much faster. So </span><span class="c7">database systems are designed to handle data that to residing outside of memory.</span></li><li class="c6 li-bullet-0"><span class="c5 c1">persistent</span><span>: And what I mean by that is that the </span><span class="c7">data in the database outlives the programs that execute on that data</span><span>. So if you run a typical computer program the program will start the variables will be created. There will be data that&#39;s operated on the program, the program will finish and the data will go away. It&#39;s sort of the other way with databases. The data is what sits there and then program will start up, it will operate on the data, the program will stop and the </span><span class="c7">data will still be there</span><span class="c4">. Very often actually multiple programs will be operating on the same data.</span></li><li class="c6 li-bullet-0"><span class="c5 c1">safety</span><span>: So database systems, since they run critical applications such as telecommunications and banking systems, have to have guarantees that the data managed by the system will stay in a consistent state, it won&#39;t be lost or overwritten when there are failures, and there can be </span><span class="c7">hardware failures</span><span class="c13">.</span><span>&nbsp;There can be </span><span class="c7">software failures</span><span>. Even simple </span><span class="c7">power outages</span><span>. You don&#39;t want your bank balance to change because the power went out at your bank branch. And of course there are the problem of </span><span class="c7">malicious users</span><span>&nbsp;that may try to corrupt data. So database systems have a number of built in </span><span class="c7">mechanisms that ensure that the data remains consistent</span><span class="c4">, regardless of what happens.</span></li><li class="c6 li-bullet-0"><span class="c5 c1">multi-user</span><span>:</span><span>&nbsp;So I mentioned that multiple programs may operate on the same database. And even with one program operating on a database, that program may allow many different users or applications to </span><span class="c7">access the data concurrently</span><span>. So when you have multiple applications working on the same data, the system has to have some mechanisms, again, to ensure that the data stays consistent. That you don&#39;t have, for example, half of a data item overwritten by one person and the other half overwritten by another. So there&#39;s mechanisms in database systems called </span><span class="c7">concurrency control</span><span class="c4">.</span></li></ul><ul class="c8 lst-kix_mxexm8dbrnf2-2 start"><li class="c16 li-bullet-0"><span>And the idea there is that we control the way multiple users access the database. Now we don&#39;t control it by only having one user have exclusive access to the database or the performance would slow down considerably. So the </span><span class="c7">control actually occurs at the level of the data items</span><span class="c4">&nbsp;in the database. So many users might be operating on the same database but be operating on different individual data items. It&#39;s a little bit similar to, say, file system concurrency or even variable concurrency in programs, except it&#39;s more centered around the data itself.</span></li></ul><ul class="c8 lst-kix_mxexm8dbrnf2-1"><li class="c6 li-bullet-0"><span class="c5 c1">convenience:</span><span>&nbsp;convenience is actually one of the critical features of database systems. They really are </span><span class="c7">designed to make it easy to work with large amounts of data</span><span class="c4">&nbsp;and to do very powerful and interesting processing on that data. So there&#39;s a couple levels at which that happens: </span></li></ul><ul class="c8 lst-kix_mxexm8dbrnf2-2 start"><li class="c16 li-bullet-0"><span>1. &ldquo;</span><span class="c65">convenient weil: man muss sich nicht mit der Speicherung der Daten besch&auml;ftigen, DBMS macht das schon</span><span>&rdquo;: There&#39;s a notion in databases called </span><span class="c7">Physical Data Independence</span><span class="c4">. </span></li></ul><ul class="c8 lst-kix_mxexm8dbrnf2-3 start"><li class="c19 c18 li-bullet-0"><span>It&#39;s kind of a mouthful, but what that&#39;s saying is that the way that data is actually stored and laid out on disk is independent of the way that programs think about the structure of the data. So </span><span class="c9">you could have a program that operates on a database and underneath there could be a complete change in the way the data is stored, yet the program itself would not have to be changed</span><span>. So the </span><span>operations on the data are independent from the way the data is laid out.</span><span class="c4">&nbsp;</span></li></ul><ul class="c8 lst-kix_mxexm8dbrnf2-2"><li class="c16 li-bullet-0"><span>2. &ldquo;</span><span class="c65">convenient weil: man muss nicht &uuml;berlegen wie man &ldquo;effizient&rdquo; queryt, die query language macht das schon</span><span>&rdquo; And somewhat related to that is the notion of </span><span class="c7">high level query languages</span><span class="c4">. </span></li></ul><ul class="c8 lst-kix_mxexm8dbrnf2-3 start"><li class="c19 c18 li-bullet-0"><span>So, the databases are usually queried by languages that are relatively compact to describe, really at a very high level what information you want from the database. Specifically, they obey a notion that&#39;s called </span><span class="c7">declarative</span><span class="c4">, </span></li></ul><ul class="c8 lst-kix_mxexm8dbrnf2-4 start"><li class="c44 c18 li-bullet-0"><span class="c4">in the query, you describe what you want out of the database but you don&#39;t need to describe the algorithm to get the data out, and that&#39;s a really nice feature. It allows you to write queries in a very simple way, and then the system itself will find the algorithm to get that data out efficiently.</span></li></ul><ul class="c8 lst-kix_mxexm8dbrnf2-1"><li class="c6 li-bullet-0"><span class="c5 c1">efficiency</span><span>:</span><span>&nbsp;a similar parallel joke, which is that the three most important things in a database system is first </span><span class="c7">performance</span><span>, second performance and again performance. So database systems have to do really </span><span class="c7">thousands of queries or updates per second</span><span class="c4">. These are not simple queries necessarily. These may be very complex operations. So, constructing a database system, that can execute queries, complex queries, at that rate, over gigantic amounts of data, terabytes of data is no simple task, and that is one of the major features also, provided by a database management system.</span></li><li class="c6 li-bullet-0"><span class="c5 c1">reliability</span><span>:</span><span>&nbsp;Again, looking back at say your banking system or your telecommunications system, it&#39;s critically important that those are up all the time. So </span><span class="c7">99.99999 % up time</span><span class="c4">&nbsp;is the type of guarantee that database management systems are making for their applications.</span></li></ul><h2 class="c24" id="h.q2ttixq3euyv"><span class="c40 c36 c41">Not covered in this course</span></h2><ul class="c8 lst-kix_mxexm8dbrnf2-0"><li class="c10 li-bullet-0"><span>When people build database applications, sometimes they program them with what&#39;s known as a </span><span class="c7">framework</span><span>. Currently at the time of this video, some of the popular frameworks are </span><span class="c7">Django</span><span>&nbsp;or </span><span class="c7">Ruby on Rails</span><span class="c4">, and these are environments that help you develop your programs, and help you generate, say the calls to the database system. We&#39;re not, in this set of videos, going to be talking about the frameworks, but rather we&#39;re going to be talking about the data base system itself and how it is used and what it provides.</span></li><li class="c10 li-bullet-0"><span>database systems are often used in conjunction with what&#39;s known as </span><span class="c7">middle-ware</span><span>. Again, at the time of this video, typical middle-ware might be </span><span class="c7">application servers</span><span>, </span><span class="c7">web servers</span><span class="c4">, so this middle-ware helps applications interact with database systems in certain types of ways. Again, that&#39;s sort of outside the scope of the course. We won&#39;t be talking about middleware in the course.</span></li><li class="c10 li-bullet-0"><span>Finally, it&#39;s not the case that every application that involves data necessarily uses the database system, so historically, a lot of data has been stored in </span><span class="c7">files</span><span>, I think that&#39;s a little bit less so these days. Still, there&#39;s a lot of data out there that&#39;s simply sitting in files. </span><span class="c7">Excel spreadsheets</span><span>&nbsp;is another domain where there&#39;s a lot of data sitting out there, and it&#39;s useful in certain ways, and the </span><span class="c7">processing of data is not always done through query languages associated with database systems</span><span>. For example, </span><span class="c7">Hadoop</span><span class="c4">&nbsp;is a processing framework for running operations on data that&#39;s stored in files. </span></li><li class="c10 li-bullet-0"><span class="c28 c5 c54 c1">Again, in this set of videos we&#39;re going to focus on the database management system itself and on storing and operating on data through a database management system.</span></li></ul><h2 class="c24" id="h.7r0sc0ecz4pn"><span>Key concepts</span></h2><ul class="c8 lst-kix_6dd4bhw7lmvv-0 start"><li class="c10 li-bullet-0"><span class="c4">So there are four key concepts that we&#39;re going to cover for now. </span></li></ul><ul class="c8 lst-kix_6dd4bhw7lmvv-1 start"><li class="c6 li-bullet-0"><span class="c5 c1">data model</span><span>:</span><span class="c4">&nbsp;The data model is a description of, in general, how the data is structured. </span></li></ul><ul class="c8 lst-kix_6dd4bhw7lmvv-2 start"><li class="c16 li-bullet-0"><span class="c48 c1">relational data model</span><span class="c4">, we&#39;ll spend quite a bit of time on that. In the relational data model the data and the database is thought of as a set of records. </span></li><li class="c16 li-bullet-0"><span class="c48 c1">XML documents</span><span class="c4">, so, an XML document captures data, instead of a set of records, as a hierarchical structure, of labeled values. </span></li><li class="c16 li-bullet-0"><span class="c1 c48">graph data model</span><span class="c4">&nbsp;where all data in the database is in the form of nodes and edges. </span></li></ul><ul class="c8 lst-kix_6dd4bhw7lmvv-1"><li class="c6 li-bullet-0"><span class="c4">So again, a data model is telling you the general form of data that&#39;s going to be stored in the database.</span></li><li class="c6 li-bullet-0"><span class="c5 c1">schema versus data</span><span>. One can think of this kind of </span><span class="c7">like types and variables in a programming language</span><span>. The schema sets up the structure of the database. Maybe I&#39;m going to have information about students with IDs and GPAs, or about colleges, and it&#39;s just going to tell me the structure of the database where the data is the actual data stored within the schema. Again, </span><span class="c9">in a program, you set up types and then you have variables of those types, we&#39;ll set up a schema, and then we will have a whole bunch of data that adheres to that schema.</span><span>&nbsp;Typically the schema is set up at the beginning, and doesn&#39;t change very much where the data changes rapidly. Now to set up the schema, one normally uses what&#39;s known as a </span><span class="c7">data definition language</span><span>. Sometimes people use higher level design tools that help them think about the design and then from there go to the data definition language. But it&#39;s </span><span class="c7">used in general to set up a scheme or structure for a particular database.</span><span>&nbsp;Once the schema has been set up and data has been loaded, then it&#39;s possible to start querying and modifying the data and that&#39;s typically done with what&#39;s known as the </span><span class="c7">data manipulation language</span><span>, so </span><span class="c7">for querying and modifying the database</span><span class="c4">.</span></li></ul><h2 class="c24" id="h.f9nhwlp2tukt"><span class="c40 c36 c41">People that are involved in a database system</span></h2><ul class="c8 lst-kix_nd6w1jiz3gae-0 start"><li class="c10 li-bullet-0"><span>the person who implements the database system itself, the </span><span class="c5 c1">database implementer</span><span class="c4">. That&#39;s the person who builds the system, that&#39;s not going to be the focus of this course. We&#39;re going to be focusing more on the types of things that are done by the other three people that I&#39;m going to describe.</span></li><li class="c10 li-bullet-0"><span class="c5 c1">database designer</span><span class="c4">. So the database designer is the person who establishes the schema for a database. So, let&#39;s suppose we have an application. We know there&#39;s going to be a lot of data involved in the application and we want to figure out how we are gonna structure that data before we build the application. That&#39;s the job of the database designer. It&#39;s a surprisingly difficult job when you have a very complex data involved in an application. </span></li><li class="c10 li-bullet-0"><span>Once you&#39;ve established the structure of the database then it&#39;s time to build the applications or programs that are going to run on the database, often interfacing between the eventual user and the data itself, and that&#39;s the job of the </span><span class="c5 c1">application developer</span><span class="c4">, so those are the programs that operate on the database. And again I&#39;ve mentioned already that you can have a database with many different programs that operate on it, be very common. You might, for example, have a sales database where some applications are actually inserting the sales as they happen, while others are analyzing the sales. So it&#39;s not necessary to have a one-to-one coupling between programs and databases. </span></li><li class="c10 li-bullet-0"><span>the </span><span class="c5 c1">database administrator</span><span class="c4">. So the database administrator is the person who loads the data, sort of gets the whole thing running and keeps it running smoothly. So, this actually turns out to be a very important job for large database applications. For better or worse, database systems do tend to have a number of tuning parameters associated with them, and getting those tuning parameters right can make a significant difference in the all important performance of the database system. So database administrators are actually, highly valued, very important, highly paid as a matter of fact, and are, for large deployments, an important person in the entire process. </span></li><li class="c10 li-bullet-0"><span class="c5 c1">in this class we&#39;ll be focusing mostly on designing and developing applications</span><span class="c4">, a little bit on administration, but in general thinking about databases and the use of database management systems from the perspective of the application builder and user.</span></li></ul><h1 class="c42" id="h.3hu5amgxoawr"><span class="c40 c36 c46">2.1 Relational model</span></h1><h2 class="c24" id="h.wibcap1zzq22"><span class="c40 c36 c41">Why is it important ?</span></h2><ul class="c8 lst-kix_gubbebjwfu1f-0 start"><li class="c10 li-bullet-0"><span>The relational model </span><span class="c7">underlies all commercial database systems</span><span class="c4">&nbsp;at this point in time.</span></li><li class="c10 li-bullet-0"><span>it </span><span class="c7">can be queried</span><span class="c4">.</span></li></ul><ul class="c8 lst-kix_gubbebjwfu1f-1 start"><li class="c6 li-bullet-0"><span class="c4">By that I mean we can ask questions of databases in the model using High Level Languages. High Level Languages are simple, yet extremely expressive for asking questions over the database. </span></li></ul><ul class="c8 lst-kix_gubbebjwfu1f-0"><li class="c10 li-bullet-0"><span class="c7">there are extremely efficient implementations</span><span class="c4">&nbsp;of the relational model and of the query languages on that model.</span></li></ul><h2 class="c24" id="h.51svaha8nz4t"><span class="c40 c36 c41">Basic constructs in the relational model</span></h2><ul class="c8 lst-kix_3lf77tl1pr30-0 start"><li class="c10 li-bullet-0"><span>the primary construct is in fact, </span><span class="c5 c1">the relation</span><span class="c4">. </span></li></ul><ul class="c8 lst-kix_3lf77tl1pr30-1 start"><li class="c6 li-bullet-0"><span>A database consists of a set of relations or </span><span class="c5 c1">sometimes referred to as &quot;tables&quot;</span><span>, </span><span class="c7">each of which has a name</span><span class="c4">. </span></li></ul><ul class="c8 lst-kix_3lf77tl1pr30-2 start"><li class="c16 li-bullet-0"><span class="c4">So, we&#39;re gonna use two relations in our example. Our example is gonna be a fictitious database about students applying to colleges. For now we&#39;re just gonna look at the students and colleges themselves. So we&#39;re gonna have two tables, and let&#39;s call those tables the Student table and the College table.</span></li></ul><ul class="c8 lst-kix_3lf77tl1pr30-0"><li class="c10 li-bullet-0"><span>Next, we have the concept of </span><span class="c5 c1">attributes</span><span>. So every relation and relational database has a </span><span class="c7">predefined</span><span>&nbsp;set of </span><span class="c5 c1">columns</span><span>&nbsp;or attributes </span><span class="c7">each of which has a name</span><span class="c4">. </span></li></ul><ul class="c8 lst-kix_3lf77tl1pr30-2 start"><li class="c16 li-bullet-0"><span class="c4">So, for our student table, let&#39;s say that each student is gonna have an ID, a name, a GPA and a photo. And for our college table, let&#39;s say that every college is going to have a name, a state, and an enrollment. We&#39;ll just abbreviate that ENR. So those are the labeled columns</span></li></ul><ul class="c8 lst-kix_3lf77tl1pr30-0"><li class="c10 li-bullet-0"><span>Now the actual data itself is stored in what are called </span><span class="c5 c1">the tuples</span><span>&nbsp;(or </span><span class="c5 c1">the rows</span><span class="c4">) in the tables.</span></li><li class="c10 li-bullet-0"><span>in a relational database, typically </span><span class="c7">each attribute or column</span><span>&nbsp;has a </span><span class="c5 c1">type</span><span>&nbsp;sometimes referred to as a </span><span class="c5 c1">domain</span><span class="c4">.</span></li><li class="c10 li-bullet-0"><span>We do also in most relational databases have a concept of </span><span class="c7">enumerated domain</span><span class="c4">. </span></li></ul><ul class="c8 lst-kix_3lf77tl1pr30-1 start"><li class="c6 li-bullet-0"><span class="c4">So for example, the state might be an enumerated domain for the 50 abbreviations for states. (domain ist also: string data type mit 50 m&ouml;glichen Werten)</span></li></ul><ul class="c8 lst-kix_3lf77tl1pr30-0"><li class="c10 li-bullet-0"><span>Now, it&#39;s typical for relational databases to have just </span><span class="c7">atomic types</span><span>&nbsp;in their attributes as we have here, but many database systems do also support </span><span class="c7">structured types</span><span class="c4">&nbsp;inside attributes.</span></li></ul><p class="c14"><span class="c4"></span></p><hr><p class="c14"><span class="c4"></span></p><p class="c14"><span class="c4"></span></p><p class="c18 c52"><span class="c29 c37"><a class="c11" href="https://www.google.com/url?q=https://vinay200005.blogspot.com/2019/11/1-what-is-difference-between-atomic-and.html&amp;sa=D&amp;source=editors&amp;ust=1632356724043000&amp;usg=AOvVaw2lKyrpJK6e_H8ip3CLLbB-">https://vinay200005.blogspot.com/2019/11/1-what-is-difference-between-atomic-and.html</a></span></p><p class="c14"><span class="c4"></span></p><p class="c18 c52"><span class="c28 c5 c54 c1">What is the difference between Atomic and Composite data with examples?</span></p><p class="c14"><span class="c4"></span></p><p class="c18 c52"><span class="c4">Answer:</span></p><p class="c14"><span class="c4"></span></p><p class="c18 c52"><span class="c5 c1">Atomic Data</span><span class="c4">:</span></p><p class="c14"><span class="c4"></span></p><p class="c18 c52"><span class="c4">The Atomic data is the data which is viewed as single and non decomposable entity by the user. Due to its numerical properties, the atomic data can also be called as Scalar data.</span></p><p class="c14"><span class="c4"></span></p><p class="c18 c52"><span class="c4">Example:</span></p><p class="c18 c52"><span class="c4">Consider an integer 5678.It can be decomposed into single digit i.e.,(5,6,7,8).However, after decomposition these digits doesn&#39;t hold the same characteristics as the actual integer i.e.,(5678)does. Thus,the Atomic data is considered as single and non decomposable data.</span></p><p class="c14"><span class="c4"></span></p><p class="c18 c52"><span class="c5 c1">Composite data</span><span class="c4">:</span></p><p class="c14"><span class="c4"></span></p><p class="c18 c52"><span>The composite data is defined as the data which can be decomposed into several meaningful subfield.It </span><span class="c7">can be also be called as structured data</span><span class="c4">&nbsp;and it is implemented in C++ by using structure,class etc..</span></p><p class="c14"><span class="c4"></span></p><p class="c18 c52"><span class="c4">Example: </span></p><p class="c18 c52"><span class="c4">Consider an employee&#39;s record which contains fields such as employee ID, name, salary etc.. Each employee record is decomposed into several sub-fields(i.e., employee ID,name, salary). Thus, the composite data can be decomposed without any change in its meaning.</span></p><p class="c14"><span class="c4"></span></p><hr><p class="c14"><span class="c4"></span></p><p class="c14"><span class="c4"></span></p><ul class="c8 lst-kix_4wg0fmgu07r4-0 start"><li class="c10 li-bullet-0"><span>The </span><span class="c5 c1">schema</span><span>&nbsp;of a database is the structure of the relation. So the schema includes the </span><span class="c7">name of the relation</span><span>&nbsp;and </span><span class="c7">the attributes of the relation</span><span>&nbsp;and </span><span class="c7">the types of those attributes</span><span class="c4">.</span></li><li class="c10 li-bullet-0"><span>the </span><span class="c5 c1">instance</span><span>&nbsp;is the </span><span class="c7">actual contents</span><span class="c4">&nbsp;of the table at a given point in time. </span></li><li class="c10 li-bullet-0"><span class="c4">So, typically you set up a schema in advance, then the instances of the data will change over time.</span></li><li class="c10 li-bullet-0"><span class="c5 c1">null:</span><span>&nbsp;a special value that&#39;s </span><span class="c7 c36 c47 c66">in any type of any column</span></li></ul><ul class="c8 lst-kix_4wg0fmgu07r4-1 start"><li class="c6 li-bullet-0"><span class="c4">Null values are used to denote that a particular value is maybe unknown or undefined.</span></li></ul><ul class="c8 lst-kix_4wg0fmgu07r4-0"><li class="c10 li-bullet-0"><span>one has to be very careful in a database system when you run </span><span class="c7">queries over relations that have null values</span><span class="c4">.</span></li></ul><ul class="c8 lst-kix_4wg0fmgu07r4-1 start"><li class="c6 li-bullet-0"><span class="c4">query GPA &gt; 3.5 =&gt; students with GPA = null must be excluded</span></li><li class="c6 li-bullet-0"><span class="c4">query GPA &lt;= 3.5 =&gt; students with GPA = null must be excluded</span></li><li class="c6 li-bullet-0"><span>query (GPA &gt; 3.5 </span><span class="c1">or</span><span class="c4">&nbsp;GPA &lt;= 3.5) =&gt; students with GPA = null must be excluded !!!</span></li></ul><ul class="c8 lst-kix_4wg0fmgu07r4-2 start"><li class="c16 li-bullet-0"><span class="c4">even though it looks like every tuple should satisfy this condition, that it&#39;s always true, that&#39;s not the case when we have null values. So, that&#39;s why one has to be careful when one uses null values in relational databases.</span></li></ul><ul class="c8 lst-kix_4wg0fmgu07r4-0"><li class="c10 li-bullet-0"><span>And, a </span><span class="c5 c1">key</span><span class="c4">&nbsp;is an attribute in of a relation where every value for that attribute is unique. </span></li></ul><ul class="c8 lst-kix_4wg0fmgu07r4-2 start"><li class="c16 li-bullet-0"><span>So if we look at the </span><span class="c9">student relation</span><span class="c4">, we can feel pretty confident that the ID is going to be a key. In other words, every tuple is going to have a unique ID.</span></li><li class="c16 li-bullet-0"><span>Thinking about the </span><span class="c9">college relation</span><span>, it&#39;s a little less clear. We might be tempted to say that the name of the college is an ID, but actually college names probably are not unique across the country. There&#39;s probably a lot of or several colleges named Washington college for example. You know what, </span><span class="c7">we&#39;re allowed to have sets of attributes that are unique</span><span class="c4">&nbsp;and that makes sense in the college relation. Most likely the combination of the name and state of a college is unique, and that&#39;s what we would identify as the key for the college relation. </span></li></ul><ul class="c8 lst-kix_4wg0fmgu07r4-1"><li class="c6 li-bullet-0"><span>Now, you might wonder </span><span class="c5 c1">why it&#39;s even important to have attributes that are identified as keys</span><span class="c4">. There&#39;s actually several uses for them: </span></li></ul><ul class="c8 lst-kix_4wg0fmgu07r4-2 start"><li class="c16 li-bullet-0"><span class="c7">to identify specific tuples</span><span class="c4">. So if you want to run a query to get a specific tuple out of the database you would do that by asking for that tuple by its key. </span></li><li class="c16 li-bullet-0"><span>database systems for efficiency tend to build special index structures or store the database in a particular way. So </span><span class="c7">it&#39;s very fast to find a tuple based on its key</span><span class="c4">. </span></li><li class="c16 li-bullet-0"><span>And lastly, if one relation in a relational database wants to refer to tuples of another, there &#39;s no concept of pointer in relational databases. Therefore, the first relation will typically </span><span class="c7">refer to a tuple in the second relation by its unique key</span><span class="c4">.</span></li></ul><h2 class="c24" id="h.ed4211e8ipx0"><span class="c40 c36 c41">How one creates relations or tables in the SQL language</span></h2><ul class="c8 lst-kix_2151lw9po4n2-0 start"><li class="c10 li-bullet-0"><span>It&#39;s very simple, you just say &quot;</span><span class="c5 c1">create table</span><span class="c4">&quot; give the name of the relation and a list of the attributes. And if you want to give types for the attributes. It&#39;s similar except you follow each attribute name with its type:</span></li></ul><ul class="c8 lst-kix_2151lw9po4n2-1 start"><li class="c6 li-bullet-0"><span class="c40 c17 c73">Create Table College(name string, state char(2), enrollment integer)</span></li></ul><h1 class="c42" id="h.krvy8o84u1n2"><span>2.2 Querying relational databases</span></h1><ul class="c8 lst-kix_4f2csfb78yfx-0 start"><li class="c10 li-bullet-0"><span class="c4">bis 1:47 schauen &ldquo;database system as gigantic Disc&rdquo;, basic paradigm of querying and modifying data in database system </span></li><li class="c10 li-bullet-0"><span>Relational databases support </span><span class="c5 c1">ad hoc queries</span><span>&nbsp;and </span><span class="c5 c1">high-level languages</span><span class="c4">. </span></li></ul><ul class="c8 lst-kix_4f2csfb78yfx-1 start"><li class="c6 li-bullet-0"><span>By </span><span class="c5 c1">ad hoc</span><span>, I mean that you can pose queries that you didn&#39;t think of in advance. So it&#39;s not necessary to write long programs for specific queries. Rather the language can be used to pose a query </span><span class="c29 c59">as you think</span><span class="c4">&nbsp;about what you want to ask. </span></li><li class="c6 li-bullet-0"><span>And as mentioned in previous videos the languages supported by relational systems are </span><span class="c5 c1">high level</span><span class="c4">, meaning you can write in a fairly compact fashion rather complicated queries and you don&#39;t have to write the algorithms that get the data out of the database.</span></li></ul><ul class="c8 lst-kix_4f2csfb78yfx-0"><li class="c10 li-bullet-0"><span class="c4">example queries, see slide</span></li></ul><ul class="c8 lst-kix_4f2csfb78yfx-1 start"><li class="c6 li-bullet-0"><span>Now these might seem like a fairly complicated queries but all of these </span><span class="c7">can be written in a few lines</span><span class="c4">&nbsp;in say the SQL language or a pretty simple expression in relational algebra.</span></li></ul><ul class="c8 lst-kix_4f2csfb78yfx-0"><li class="c10 li-bullet-0"><span class="c5 c1">posing queries and executing them are not correlated: </span><span class="c4">There are some queries that are easy to pose but hard to execute efficiently and some that are vice-versa.</span></li><li class="c10 li-bullet-0"><span>Frequently, people talk about </span><span class="c5 c1">the query language of the database system</span><span>. That&#39;s usually used sort of synonymously with the </span><span class="c5 c1">DML</span><span>&nbsp;or </span><span class="c5 c1">Data Manipulation Language</span><span class="c4">&nbsp;which usually includes not only querying but also data modifications.</span></li><li class="c10 li-bullet-0"><span class="c4">In all relational query languages, when you ask a query over a set of relations, you get a relation as a result. </span></li></ul><ul class="c8 lst-kix_4f2csfb78yfx-1 start"><li class="c6 li-bullet-0"><span class="c4">So let&#39;s run a query cue say over these three relations shown here and what we&#39;ll get back is another relation. </span></li><li class="c6 li-bullet-0"><span class="c7">When you get back the same type of object that you query</span><span>, that&#39;s known as </span><span class="c5 c1">closure</span><span class="c4">&nbsp;of the language. And it really is a nice feature. </span></li><li class="c6 li-bullet-0"><span>For example, when I want to run another query, say Q2, that query could be posed over the answer of my first query and could even combine that answer with some of the existing relations in the database. That&#39;s known as </span><span class="c5 c1">compositionality</span><span>, </span><span class="c7">the ability to run a query over the result of our previous query</span><span class="c4">.</span></li></ul><h2 class="c24" id="h.j08qjdgb3gwu"><span class="c40 c36 c41">Query Languages: Relational algebra and SQL</span></h2><ul class="c8 lst-kix_q04a1iu0lxct-0 start"><li class="c10 li-bullet-0"><span class="c5 c1">Relational algebra</span><span class="c4">&nbsp;is a formal language. Well, it&#39;s an algebra as you can tell by its name. So it&#39;s very theoretically well-grounded. </span></li><li class="c10 li-bullet-0"><span class="c5 c1">SQL</span><span>&nbsp;by contrast is what I&#39;ll call an actual language or an implemented language. That &#39;s the one you&#39;re going to run on an actual deployed database application. But the SQL language </span><span class="c7">does have as its foundation relational algebra</span><span class="c4">. That&#39;s how the semantics of the SQL language are defined. </span></li><li class="c10 li-bullet-0"><span>Now let me just give you a flavor of these two languages and I&#39;m going to </span><span class="c1">write one query in each of the two languages</span><span>:</span><span class="c4">&nbsp;</span></li></ul><ul class="c8 lst-kix_q04a1iu0lxct-1 start"><li class="c6 li-bullet-0"><span>Let&#39;s start in </span><span class="c1">relational algebra</span><span class="c4">: </span></li></ul><ul class="c8 lst-kix_q04a1iu0lxct-2 start"><li class="c16 li-bullet-0"><span>So we&#39;re looking for &ldquo;</span><span class="c20">the ID&#39;s of students whose GPA is greater than 3.7 and they&#39;ve applied to Stanford</span><span>&rdquo;</span><span>. In relational algebra, the basic </span><span class="c5 c1">operators</span><span>&nbsp;language are </span><span class="c5 c1">Greek symbols</span><span class="c4">. Again, we&#39;ll learn the details later, but this particular expression will be written by a Phi followed by a Sigma. The Phi says we&#39;re going to get the ID, the Sigma says we want students whose GPA is greater than 3.7 and the college that the students have applied to is Stanford. And then that will operate on what&#39;s called the natural join of the student relation with the apply relation. Again, we&#39;ll learn the details of that in a later video. </span><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 286.50px; height: 160.80px;"><img alt="" src="images/image35.png" style="width: 286.50px; height: 160.80px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></li></ul><ul class="c8 lst-kix_q04a1iu0lxct-1"><li class="c6 li-bullet-0"><span>Now, here&#39;s the </span><span class="c1">same query in SQL</span><span>:</span><span class="c4">&nbsp;</span></li></ul><ul class="c8 lst-kix_q04a1iu0lxct-2 start"><li class="c16 li-bullet-0"><span>And this is something that you would actually run on a deployed database system, and the SQL query is, in fact, </span><span class="c13 c1">directly equivalent</span><span class="c1">&nbsp;to the relational algebra query</span><span class="c4">. </span></li></ul><ul class="c8 lst-kix_q04a1iu0lxct-0"><li class="c10 li-bullet-0"><span>Now, pedagogically, I would highly recommend that you </span><span>learn the relational</span><span class="c4">&nbsp;algebra by watching the relational algebra videos before you move on to the SQL videos, but I&#39;m not going to absolutely require that. So, if you&#39;re in a big hurry to learn SQL right away you may move ahead to the SQL videos. If you&#39;re interested in the formal foundations and a deeper understanding, I recommend moving next to the relational algebra video.</span></li></ul><h1 class="c42" id="h.untnuianqyvr"><span class="c40 c36 c46">3.1 Well-formed XML</span></h1><h2 class="c24" id="h.w8icq8gzwkia"><span>Terminology</span></h2><ul class="c8 lst-kix_d1knaq1rozfz-0 start"><li class="c10 li-bullet-0"><span>XML can be thought of as a </span><span class="c7">data model</span><span>, an </span><span class="c7">alternative to the relational model</span><span class="c4">, for structuring data. </span></li><li class="c10 li-bullet-0"><span>The full name of XML is the </span><span class="c5 c1">extensible markup language</span><span class="c4">. </span></li><li class="c10 li-bullet-0"><span>XML is a </span><span class="c7">standard for data representation and exchange,</span><span>&nbsp;and it was </span><span class="c7">designed initially for exchanging information on the Internet.</span></li><li class="c10 li-bullet-0"><span>XML can be thought of as a </span><span class="c7">document format similar to HTML</span><span>, if you&#39;re familiar with HTML. Most people are. The big </span><span class="c7">difference</span><span>&nbsp;is that the </span><span class="c7">tags in an XML document describe the </span><span class="c7 c1">content</span><span class="c7">&nbsp;of the data rather than how to format the data</span><span class="c4">, which is what the tags in HTML tend to represent.</span></li><li class="c10 li-bullet-0"><span>XML also has a </span><span class="c7">streaming format </span><span>or a </span><span class="c7">streaming standard</span><span>, and that&#39;s typically </span><span class="c1">for the use of XML in programs</span><span class="c4">, for admitting XML and consuming XML.</span></li><li class="c10 li-bullet-0"><span class="c4">3.1 xml part 1 ab 1:00 schauen</span></li><li class="c10 li-bullet-0"><span>So that&#39;s what </span><span class="c5 c1">elements</span><span>&nbsp;consist of, an </span><span class="c5 c1">opening tag</span><span>, </span><span class="c5 c1">text</span><span>&nbsp;or other </span><span class="c5 c1">sub-elements</span><span>&nbsp;and a </span><span class="c5 c1">closing tag</span><span class="c4">. </span></li><li class="c10 li-bullet-0"><span>In addition we have have </span><span class="c5 c1">attributes</span><span>: so each element may have within its opening tag a set of attributes and an attribute consists of an </span><span class="c5 c1">attribute name</span><span>, the equal sign and then an </span><span class="c28 c5 c54 c1">attribute value</span></li></ul><ul class="c8 lst-kix_d1knaq1rozfz-1 start"><li class="c6 li-bullet-0"><span class="c7">any element can have any number of attributes</span><span>&nbsp;as long as the attribute </span><span class="c7">names are unique</span></li></ul><ul class="c8 lst-kix_d1knaq1rozfz-0"><li class="c10 li-bullet-0"><span>And finally, the third component of XML is the </span><span class="c5 c1">text</span><span>: So, within elements, we can have </span><span class="c5 c1">strings</span><span>&nbsp;(eg. titles, remarks, &hellip;). If you think of XML as a tree, the </span><span class="c7">strings form the leaf elements of the tree</span></li></ul><h2 class="c24" id="h.ikq4s1i4z92v"><span class="c40 c36 c41">Comparing the relational model against XML</span></h2><ul class="c8 lst-kix_vnrcm0t6c2nt-0 start"><li class="c10 li-bullet-0"><span class="c1">Why knowing the differences is important</span><span class="c4">: in many cases when designing an application that&#39;s dealing with data you might have to make a decision whether you want to use a relational database or whether you want to store the data in XML.</span></li><li class="c10 li-bullet-0"><span class="c7">structure of the data</span><span class="c4">&nbsp;itself: </span></li></ul><ul class="c8 lst-kix_vnrcm0t6c2nt-1 start"><li class="c6 li-bullet-0"><span>the structure in a </span><span class="c7">relational model</span><span>&nbsp;is basically a </span><span class="c1">set of tables</span><span class="c4">. So we define the set of columns and we have a set of rows. </span></li><li class="c6 li-bullet-0"><span class="c7">XML</span><span>&nbsp;is generally, again it&#39;s usually in a document or a string format, but if you think about the structure itself, the structure is hierarchical. The nested elements induce a </span><span class="c1">hierarchy</span><span>&nbsp;or a </span><span class="c1">tree</span><span class="c4">. </span></li></ul><ul class="c8 lst-kix_vnrcm0t6c2nt-2 start"><li class="c16 li-bullet-0"><span class="c1">Note</span><span>: There are constructs that actually allow us to have links within documents and so, you can also have XML representing a </span><span class="c1">graph</span><span class="c4">&nbsp;though, in general, it&#39;s mostly thought of as a tree structure.</span></li></ul><ul class="c8 lst-kix_vnrcm0t6c2nt-0"><li class="c10 li-bullet-0"><span class="c7">schemas</span><span class="c4">: </span></li></ul><ul class="c8 lst-kix_vnrcm0t6c2nt-1 start"><li class="c6 li-bullet-0"><span>In the </span><span class="c7">relational model</span><span>&nbsp;the schema is very important. You </span><span class="c1">fix your schema in advance</span><span class="c4">, when you design your database, and them you add the data to conform to the schema. </span></li><li class="c6 li-bullet-0"><span>in </span><span class="c7">XML</span><span>, you have a lot more flexibility. So the schema is flexible. In fact, a lot of people refer to XML as </span><span class="c1">self-describing</span><span>. In other words, the schema and the data kind of mixed together. The </span><span class="c1">tags</span><span>&nbsp;on elements are </span><span class="c1">telling you the kind of data</span><span class="c4">&nbsp;you&#39;ll have, and you can have a lot of irregularity. </span></li></ul><ul class="c8 lst-kix_vnrcm0t6c2nt-2 start"><li class="c16 li-bullet-0"><span class="c1">Note</span><span class="c4">: there are many mechanisms for introducing schemas into XML but they&#39;re not required. </span></li></ul><ul class="c8 lst-kix_vnrcm0t6c2nt-1"><li class="c6 li-bullet-0"><span>In the </span><span class="c7">relational model</span><span>&nbsp;schemas are </span><span class="c7">absolutely required</span><span>. In </span><span class="c7">XML</span><span>&nbsp;they&#39;re more </span><span class="c7">optional</span><span class="c4">.</span></li></ul><ul class="c8 lst-kix_vnrcm0t6c2nt-0"><li class="c10 li-bullet-0"><span class="c7">attributes (XML) vs columns (relational model)</span><span class="c4">: </span></li></ul><ul class="c8 lst-kix_vnrcm0t6c2nt-1 start"><li class="c6 li-bullet-0"><span>In </span><span class="c7">XML</span><span>, it&#39;s perfectly acceptable to have some attributes for some elements and those </span><span class="c1">attributes don&#39;t appear</span><span class="c4">&nbsp;in other elements</span></li><li class="c6 li-bullet-0"><span>in the </span><span class="c7">relational model</span><span>, we would have to have a column for addition, and we have one for every book. Although of course we could have </span><span class="c1">null</span><span class="c4">&nbsp;editions for some books. </span></li><li class="c6 li-bullet-0"><span>related to this: </span><span class="c1">Having different numbers of things</span><span class="c4">&nbsp;is perfectly standard in XML (eg number of authors. So this first book has two authors. The second book - you can&#39;t see them all, but it has three authors)</span></li></ul><ul class="c8 lst-kix_vnrcm0t6c2nt-0"><li class="c10 li-bullet-0"><span class="c7">how this data is queried</span><span>:</span><span class="c4">&nbsp;</span></li></ul><ul class="c8 lst-kix_vnrcm0t6c2nt-1 start"><li class="c6 li-bullet-0"><span>So for the </span><span class="c7">relational model</span><span>, we have </span><span class="c1">relational algebra</span><span>. We have </span><span class="c1">SQL</span><span class="c4">. These are pretty simple, nice languages, I would say. </span></li><li class="c6 li-bullet-0"><span class="c7">XML</span><span class="c4">&nbsp;querying is a little trickier. Now, one of the factors here is that XML is a lot newer than the relational model and querying XML is still settling down to some extent. But I&#39;m just gonna say, it&#39;s a little less [simple]</span></li></ul><ul class="c8 lst-kix_vnrcm0t6c2nt-0"><li class="c10 li-bullet-0"><span class="c7">ordering</span><span class="c4">:</span></li></ul><ul class="c8 lst-kix_vnrcm0t6c2nt-1 start"><li class="c6 li-bullet-0"><span>So the </span><span class="c7">relational model</span><span>&nbsp;is fundamentally an </span><span class="c1">unordered model</span><span class="c4">&nbsp;and that can actually be considered a bad thing to some extent. Sometimes in data applications it&#39;s nice to have ordering. </span></li></ul><ul class="c8 lst-kix_vnrcm0t6c2nt-2 start"><li class="c16 li-bullet-0"><span class="c1">Note</span><span>: We learned the &ldquo;</span><span class="c1">ORDER BY&rdquo; clause</span><span>&nbsp;in SQL and that&#39;s a way </span><span class="c1">to get order</span><span>&nbsp;in query results. But fundamentally, the data in our table, in our relationship database, is a </span><span class="c1">set of data, without an ordering within that set</span><span class="c4">. </span></li></ul><ul class="c8 lst-kix_vnrcm0t6c2nt-1"><li class="c6 li-bullet-0"><span>in </span><span class="c7">XML</span><span>&nbsp;we do have, I would say, an </span><span class="c1">implied ordering</span><span>. So XML, as I said, can be thought of as either a document model or a stream model. In either case, just the nature of the XML </span><span class="c1">being laid out in a document</span><span>&nbsp;as we have here or </span><span class="c1">being in a stream</span><span>&nbsp;</span><span class="c29 c1">induces an order</span><span class="c4">.</span></li><li class="c6 li-bullet-0"><span class="c4">Example:</span></li></ul><ul class="c8 lst-kix_vnrcm0t6c2nt-2 start"><li class="c16 li-bullet-0"><span>Very specifically, let&#39;s take a look at the authors here. So here we have two authors, and these authors are in an order in the document. If we put those authors </span><span class="c1">in a relational database</span><span>, there would be </span><span class="c1">no order</span><span>. They could come out in either order unless we did a ORDER BY clause in our query, whereas </span><span class="c1">in XML</span><span>, implied by the document structure </span><span class="c1">is an order</span><span class="c4">. And there&#39;s an order between these two books as well. Sometimes that order is meaningful; sometimes it&#39;s not. But it is available to be used in an application.</span></li></ul><ul class="c8 lst-kix_vnrcm0t6c2nt-0"><li class="c10 li-bullet-0"><span class="c7">implementation</span><span class="c4">:</span></li></ul><ul class="c8 lst-kix_vnrcm0t6c2nt-1 start"><li class="c6 li-bullet-0"><span class="c1">Native</span><span>: </span><span>As I mentioned in earlier videos, the </span><span class="c7">relational model</span><span>&nbsp;has been around for as least 35 years, and </span><span class="c1">the systems that implement it</span><span>&nbsp;have been around almost as long. They&#39;re </span><span class="c1">very mature</span><span>&nbsp;systems. They implement the relational model as the </span><span class="c9">native model of the systems</span><span>&nbsp;and they&#39;re </span><span class="c1">widely used</span><span class="c4">. </span></li><li class="c6 li-bullet-0"><span class="c1">Add-on</span><span>: Things with </span><span class="c7">XML</span><span>&nbsp;are a little bit different, partly again because XML hasn&#39;t been around as long. But what&#39;s happening right now in terms of XML and conventional database systems is </span><span class="c1">XML is typically an add-on</span><span>. So in most systems, </span><span class="c1">XML will be a layer over the relational database system</span><span class="c4">. </span></li></ul><ul class="c8 lst-kix_vnrcm0t6c2nt-2 start"><li class="c16 li-bullet-0"><span>You can enter </span><span class="c1">data</span><span>&nbsp;in XML; you can </span><span class="c1">query</span><span>&nbsp;data in XML. It will be </span><span class="c1">translated to a relational implementation</span><span>. That&#39;s not necessarily a bad thing. And it does allow you to combine relational data and XML in a single system, sometimes even in a single query, but it&#39;s </span><span class="c9">not the native model of the system</span><span>&nbsp;itself.</span></li></ul><h2 class="c24" id="h.5ua3eds17tjw"><span>Well-formed definition</span></h2><ul class="c8 lst-kix_d1knaq1rozfz-0"><li class="c10 li-bullet-0"><span>An XML document or an XML stream is considered </span><span class="c5 c1">well-formed</span><span class="c4">&nbsp;if it adheres to the basic structural requirements of XML:</span></li></ul><ul class="c8 lst-kix_d1knaq1rozfz-1 start"><li class="c6 li-bullet-0"><span class="c7">single root element</span><span class="c4">&nbsp;(eg. &ldquo;bookstore&rdquo;) </span></li><li class="c6 li-bullet-0"><span>all of our </span><span class="c7">tags are matching</span><span class="c4">, we don&#39;t have open tags without closed tags; </span></li><li class="c6 li-bullet-0"><span>our </span><span class="c7">tags are properly nested</span><span class="c4">, so we don&#39;t have interleaving (Verschachtelung) of elements. </span></li><li class="c6 li-bullet-0"><span>within each element if we have </span><span class="c7">attribute names</span><span>, they&#39;re </span><span class="c7">unique</span><span class="c4">.</span></li></ul><ul class="c8 lst-kix_d1knaq1rozfz-0"><li class="c10 li-bullet-0"><span>In order to </span><span class="c7">test whether a document is well-formed</span><span>, and specifically </span><span class="c7">to access the components of the document </span><span class="c7 c1">in a program</span><span>, we have what&#39;s called an </span><span class="c5 c1">XML parser</span><span>&nbsp;</span><span>(s. </span><span class="c29 c37"><a class="c11" href="#id.6hu1o1xf15e0">Link</a></span><span class="c4">)</span></li></ul><ul class="c8 lst-kix_d1knaq1rozfz-1 start"><li class="c6 li-bullet-0"><span>So, we&#39;ll take an XML document here, and we&#39;ll feed it to an XML parser (s. </span><span class="c29 c37"><a class="c11" href="#id.6hu1o1xf15e0">Link</a></span><span>), and the parser will check the basic structure of the document, just to make sure that everything is okay. If the document doesn&#39;t adhere to these three requirements up here, the </span><span class="c7">parser will just send an error saying it&#39;s not well-formed</span><span>. </span><span class="c7">If the document does adhere to the structure</span><span>, then what comes out is </span><span class="c5 c1">parsed XML</span><span>. And, there&#39;s various </span><span class="c5 c1">standards for how we show (genauer: </span><span>accessing and manipulating</span><span class="c5 c1">) parsed XML</span><span class="c4">: </span></li></ul><ul class="c8 lst-kix_d1knaq1rozfz-2 start"><li class="c16 li-bullet-0"><span class="c5 c1">document object model</span><span>, or </span><span class="c5 c1">DOM</span><span>; it&#39;s a </span><span class="c7">programmatic interface</span><span>&nbsp;for sort of </span><span class="c7">traversing the tree</span><span class="c4">&nbsp;that&#39;s implied by XML. </span></li></ul><hr><p class="c14"><span class="c4"></span></p><ul class="c8 lst-kix_d1knaq1rozfz-3 start"><li class="c19 c18 li-bullet-0"><span>Wiki: The </span><span class="c1">Document Object Model</span><span>&nbsp;(</span><span class="c1">DOM</span><span>) is a</span><span><a class="c11" href="https://www.google.com/url?q=https://en.wikipedia.org/wiki/Cross-platform&amp;sa=D&amp;source=editors&amp;ust=1632356724062000&amp;usg=AOvVaw3xmip5mpWhzoaJojGtwP3e">&nbsp;</a></span><span class="c29 c37"><a class="c11" href="https://www.google.com/url?q=https://en.wikipedia.org/wiki/Cross-platform&amp;sa=D&amp;source=editors&amp;ust=1632356724063000&amp;usg=AOvVaw2_EPdA-ifqmFYXmRn9_EzF">cross-platform</a></span><span>&nbsp;and</span><span><a class="c11" href="https://www.google.com/url?q=https://en.wikipedia.org/wiki/Language-independent_specification&amp;sa=D&amp;source=editors&amp;ust=1632356724063000&amp;usg=AOvVaw1ytkjFszlNry-rNHptiyB4">&nbsp;</a></span><span class="c29 c37"><a class="c11" href="https://www.google.com/url?q=https://en.wikipedia.org/wiki/Language-independent_specification&amp;sa=D&amp;source=editors&amp;ust=1632356724063000&amp;usg=AOvVaw1ytkjFszlNry-rNHptiyB4">language-independent</a></span><span>&nbsp;interface that treats an</span><span><a class="c11" href="https://www.google.com/url?q=https://en.wikipedia.org/wiki/XML&amp;sa=D&amp;source=editors&amp;ust=1632356724063000&amp;usg=AOvVaw2P0CLP2X-UZYwySFdzUS6d">&nbsp;</a></span><span class="c29 c37"><a class="c11" href="https://www.google.com/url?q=https://en.wikipedia.org/wiki/XML&amp;sa=D&amp;source=editors&amp;ust=1632356724063000&amp;usg=AOvVaw2P0CLP2X-UZYwySFdzUS6d">XML</a></span><span>&nbsp;or</span><span><a class="c11" href="https://www.google.com/url?q=https://en.wikipedia.org/wiki/HTML&amp;sa=D&amp;source=editors&amp;ust=1632356724063000&amp;usg=AOvVaw3OlKaPJ20Sy1xQLdCeQSg3">&nbsp;</a></span><span class="c29 c37"><a class="c11" href="https://www.google.com/url?q=https://en.wikipedia.org/wiki/HTML&amp;sa=D&amp;source=editors&amp;ust=1632356724064000&amp;usg=AOvVaw0wLNT9Sjl9bajwHQKndr5m">HTML</a></span><span>&nbsp;document as a</span><span><a class="c11" href="https://www.google.com/url?q=https://en.wikipedia.org/wiki/Tree_structure&amp;sa=D&amp;source=editors&amp;ust=1632356724064000&amp;usg=AOvVaw2FI2l4gH5Q1-YTarNioxmJ">&nbsp;</a></span><span class="c29 c37"><a class="c11" href="https://www.google.com/url?q=https://en.wikipedia.org/wiki/Tree_structure&amp;sa=D&amp;source=editors&amp;ust=1632356724064000&amp;usg=AOvVaw2FI2l4gH5Q1-YTarNioxmJ">tree structure</a></span><span>&nbsp;wherein each</span><span><a class="c11" href="https://www.google.com/url?q=https://en.wikipedia.org/wiki/Node_(computer_science)&amp;sa=D&amp;source=editors&amp;ust=1632356724064000&amp;usg=AOvVaw2OxE5dUrIzKFK4_o8bm6JP">&nbsp;</a></span><span class="c29 c37"><a class="c11" href="https://www.google.com/url?q=https://en.wikipedia.org/wiki/Node_(computer_science)&amp;sa=D&amp;source=editors&amp;ust=1632356724064000&amp;usg=AOvVaw2OxE5dUrIzKFK4_o8bm6JP">node</a></span><span>&nbsp;is an</span><span><a class="c11" href="https://www.google.com/url?q=https://en.wikipedia.org/wiki/Object_(computer_science)&amp;sa=D&amp;source=editors&amp;ust=1632356724065000&amp;usg=AOvVaw1zadhsCHnNTeqGn35cplUL">&nbsp;</a></span><span class="c29 c37"><a class="c11" href="https://www.google.com/url?q=https://en.wikipedia.org/wiki/Object_(computer_science)&amp;sa=D&amp;source=editors&amp;ust=1632356724065000&amp;usg=AOvVaw1zadhsCHnNTeqGn35cplUL">object</a></span><span class="c4">&nbsp;representing a part of the document. </span></li></ul><ul class="c8 lst-kix_d1knaq1rozfz-4 start"><li class="c44 c18 li-bullet-0"><span class="c4">The DOM represents a document with a logical tree. Each branch of the tree ends in a node, and each node contains objects. </span></li><li class="c44 c18 li-bullet-0"><span class="c4">DOM methods allow programmatic access to the tree; with them one can change the structure, style or content of a document. </span></li><li class="c44 c18 li-bullet-0"><span>Nodes can have</span><span><a class="c11" href="https://www.google.com/url?q=https://en.wikipedia.org/wiki/Event_handler&amp;sa=D&amp;source=editors&amp;ust=1632356724065000&amp;usg=AOvVaw2FTnqpewiS-Wv22Q_DGd0H">&nbsp;</a></span><span class="c29 c37"><a class="c11" href="https://www.google.com/url?q=https://en.wikipedia.org/wiki/Event_handler&amp;sa=D&amp;source=editors&amp;ust=1632356724066000&amp;usg=AOvVaw2nwsv0azoFVZu7epVCYf7O">event handlers</a></span><span class="c4">&nbsp;attached to them. Once an event is triggered, the event handlers get executed.</span></li></ul><ul class="c8 lst-kix_d1knaq1rozfz-3"><li class="c19 c60 li-bullet-0"><span>What is </span><span class="c7">the DOM</span><span>&nbsp;? </span><span class="c29 c37"><a class="c11" href="https://www.google.com/url?q=https://www.w3schools.com/xml/xml_dom.asp&amp;sa=D&amp;source=editors&amp;ust=1632356724066000&amp;usg=AOvVaw2jPwlu0y0bL2HUgGPj4OD7">https://www.w3schools.com/xml/xml_dom.asp</a></span></li></ul><ul class="c8 lst-kix_d1knaq1rozfz-4 start"><li class="c44 c60 li-bullet-0"><span class="c4">The DOM defines a standard for accessing and manipulating documents:</span></li></ul><ul class="c8 lst-kix_d1knaq1rozfz-5 start"><li class="c45 c51 li-bullet-0"><span class="c36 c47 c59 c64">&quot;The W3C Document Object Model (DOM) is a platform and language-neutral interface that allows programs and scripts to dynamically access and update the content, structure, and style of a document.&quot;</span></li></ul><ul class="c8 lst-kix_d1knaq1rozfz-4"><li class="c44 c45 li-bullet-0"><span class="c4">The HTML DOM defines a standard way for accessing and manipulating HTML documents. It presents an HTML document as a tree-structure.</span></li><li class="c44 c45 li-bullet-0"><span class="c4">The XML DOM defines a standard way for accessing and manipulating XML documents. It presents an XML document as a tree-structure.</span></li></ul><a id="id.6hu1o1xf15e0"></a><ul class="c8 lst-kix_d1knaq1rozfz-3"><li class="c60 c19 li-bullet-0"><span>What is </span><span class="c7">the XML Parser</span><span>&nbsp;? </span><span class="c29 c37"><a class="c11" href="https://www.google.com/url?q=https://www.w3schools.com/xml/xml_parser.asp&amp;sa=D&amp;source=editors&amp;ust=1632356724067000&amp;usg=AOvVaw2m__FhiV6RsvktMIFDqDkb">https://www.w3schools.com/xml/xml_parser.asp</a></span></li></ul><ul class="c8 lst-kix_d1knaq1rozfz-4 start"><li class="c44 c60 li-bullet-0"><span>The</span><span><a class="c11" href="https://www.google.com/url?q=https://www.w3schools.com/xml/dom_intro.asp&amp;sa=D&amp;source=editors&amp;ust=1632356724067000&amp;usg=AOvVaw1h_v9xxlXRxwxsUa4m7qRL">&nbsp;</a></span><span class="c29 c37"><a class="c11" href="https://www.google.com/url?q=https://www.w3schools.com/xml/dom_intro.asp&amp;sa=D&amp;source=editors&amp;ust=1632356724067000&amp;usg=AOvVaw1h_v9xxlXRxwxsUa4m7qRL">XML DOM (Document Object Model)</a></span><span>&nbsp;defines the properties and methods for accessing and editing XML. However, before an </span><span class="c1">XML document</span><span>&nbsp;can be accessed, it must be </span><span class="c1">loaded into</span><span>&nbsp;an XML </span><span class="c1">DOM object</span><span class="c4">.</span></li><li class="c44 c45 li-bullet-0"><span class="c4">All modern browsers have a built-in XML parser that can convert text into an XML DOM object.</span></li></ul><ul class="c8 lst-kix_d1knaq1rozfz-3"><li class="c45 c19 li-bullet-0"><span class="c4">s. auch Bsp auf den beiden Webseiten</span></li></ul><hr><p class="c45 c52 c56"><span class="c4"></span></p><ul class="c8 lst-kix_d1knaq1rozfz-2"><li class="c16 li-bullet-0"><span class="c5 c1">SAX</span><span>. That&#39;s a more of a </span><span class="c7">stream model</span><span class="c4">&nbsp;for XML.</span></li></ul><hr><p class="c14"><span class="c4"></span></p><ul class="c8 lst-kix_d1knaq1rozfz-3"><li class="c19 c18 li-bullet-0"><span>Wiki: </span><span class="c1">SAX</span><span>&nbsp;(</span><span class="c1">Simple API for XML</span><span>) is an</span><span><a class="c11" href="https://www.google.com/url?q=https://en.wikipedia.org/wiki/Event-driven_programming&amp;sa=D&amp;source=editors&amp;ust=1632356724068000&amp;usg=AOvVaw36hs77NqjMAc1LSCSuLUy4">&nbsp;</a></span><span class="c29 c37"><a class="c11" href="https://www.google.com/url?q=https://en.wikipedia.org/wiki/Event-driven_programming&amp;sa=D&amp;source=editors&amp;ust=1632356724068000&amp;usg=AOvVaw36hs77NqjMAc1LSCSuLUy4">event-driven</a></span><span><a class="c11" href="https://www.google.com/url?q=https://en.wikipedia.org/wiki/Online_algorithm&amp;sa=D&amp;source=editors&amp;ust=1632356724069000&amp;usg=AOvVaw0ZoZVMvDioa8Eqv38qMVAA">&nbsp;</a></span><span class="c29 c37"><a class="c11" href="https://www.google.com/url?q=https://en.wikipedia.org/wiki/Online_algorithm&amp;sa=D&amp;source=editors&amp;ust=1632356724069000&amp;usg=AOvVaw0ZoZVMvDioa8Eqv38qMVAA">online algorithm</a></span><span>&nbsp;for</span><span><a class="c11" href="https://www.google.com/url?q=https://en.wikipedia.org/wiki/Parsing&amp;sa=D&amp;source=editors&amp;ust=1632356724069000&amp;usg=AOvVaw23JB7MhkZHfCYKANS_XPqE">&nbsp;</a></span><span class="c29 c37"><a class="c11" href="https://www.google.com/url?q=https://en.wikipedia.org/wiki/Parsing&amp;sa=D&amp;source=editors&amp;ust=1632356724069000&amp;usg=AOvVaw23JB7MhkZHfCYKANS_XPqE">parsing</a></span><span><a class="c11" href="https://www.google.com/url?q=https://en.wikipedia.org/wiki/XML&amp;sa=D&amp;source=editors&amp;ust=1632356724069000&amp;usg=AOvVaw1SPHW-ymzD28ZYqEKBHmEG">&nbsp;</a></span><span class="c29 c37"><a class="c11" href="https://www.google.com/url?q=https://en.wikipedia.org/wiki/XML&amp;sa=D&amp;source=editors&amp;ust=1632356724070000&amp;usg=AOvVaw1f40YDx5mdz4j-Etqj0TBi">XML</a></span><span>&nbsp;documents, with an</span><span><a class="c11" href="https://www.google.com/url?q=https://en.wikipedia.org/wiki/Application_programming_interface&amp;sa=D&amp;source=editors&amp;ust=1632356724070000&amp;usg=AOvVaw3L3Ig02JoYVzSL948q89X7">&nbsp;</a></span><span class="c29 c37"><a class="c11" href="https://www.google.com/url?q=https://en.wikipedia.org/wiki/Application_programming_interface&amp;sa=D&amp;source=editors&amp;ust=1632356724070000&amp;usg=AOvVaw3L3Ig02JoYVzSL948q89X7">API</a></span><span class="c4">&nbsp;developed by the XML-DEV mailing list.</span></li></ul><ul class="c8 lst-kix_d1knaq1rozfz-4 start"><li class="c44 c18 li-bullet-0"><span>SAX provides a mechanism for reading data from an XML document that is an alternative to that provided by the</span><span><a class="c11" href="https://www.google.com/url?q=https://en.wikipedia.org/wiki/Document_Object_Model&amp;sa=D&amp;source=editors&amp;ust=1632356724070000&amp;usg=AOvVaw2KjaK8Si1tuEhRoz09Fowk">&nbsp;</a></span><span class="c29 c37"><a class="c11" href="https://www.google.com/url?q=https://en.wikipedia.org/wiki/Document_Object_Model&amp;sa=D&amp;source=editors&amp;ust=1632356724070000&amp;usg=AOvVaw2KjaK8Si1tuEhRoz09Fowk">Document Object Model</a></span><span class="c4">&nbsp;(DOM).</span></li><li class="c18 c44 li-bullet-0"><span>Where the DOM operates on the document as a whole&mdash;building the full</span><span><a class="c11" href="https://www.google.com/url?q=https://en.wikipedia.org/wiki/Abstract_syntax_tree&amp;sa=D&amp;source=editors&amp;ust=1632356724071000&amp;usg=AOvVaw2deths-fZz4aV-rMjbZJ7K">&nbsp;</a></span><span class="c29 c37"><a class="c11" href="https://www.google.com/url?q=https://en.wikipedia.org/wiki/Abstract_syntax_tree&amp;sa=D&amp;source=editors&amp;ust=1632356724071000&amp;usg=AOvVaw2deths-fZz4aV-rMjbZJ7K">abstract syntax tree</a></span><span class="c4">&nbsp;of an XML document for convenience of the user&mdash;SAX parsers operate on each piece of the XML document sequentially, issuing parsing events while making a single pass through the input stream. </span></li></ul><hr><p class="c14"><span class="c4"></span></p><ul class="c8 lst-kix_d1knaq1rozfz-1"><li class="c6 li-bullet-0"><span class="c4">So these are the ways in which a program would access the parsed XML when it comes out of the parser</span></li></ul><h2 class="c24" id="h.6nu06339olxv"><span class="c40 c36 c41">How we display XML</span></h2><ul class="c8 lst-kix_kqhtq93lvmrp-0 start"><li class="c10 li-bullet-0"><span>one way to display XML is </span><span class="c7">just as we see it here</span><span class="c4">, but very often we want to format the data that&#39;s in an XML document or an XML string in a more intuitive way.</span></li><li class="c10 li-bullet-0"><span>What we can do is use a rule-based language to take the XML and </span><span class="c7">translate it automatically to HTML</span><span>, which we can then render in a browser. A couple of popular languages are </span><span class="c5 c1">cascading style sheets</span><span>&nbsp;known as </span><span class="c5 c1">CSS</span><span>&nbsp;or the </span><span class="c5 c1">extensible style sheet</span><span>&nbsp;language known as </span><span class="c5 c1">XSL</span><span class="c4">. </span></li></ul><ul class="c8 lst-kix_kqhtq93lvmrp-1 start"><li class="c6 li-bullet-0"><span class="c4">We&#39;re going to look a little bit with XSL on a later video in the context of query in XML. We won&#39;t be covering CSS in this course. </span></li></ul><h3 class="c34" id="h.fx1jadoll9x7"><span>CSS and XSL (basic idea)</span></h3><ul class="c8 lst-kix_kqhtq93lvmrp-0"><li class="c10 li-bullet-0"><span class="c4">But let&#39;s just understand how these languages are used, what the basic structure is.</span></li><li class="c10 li-bullet-0"><span class="c29 c1">the rules</span><span>: So the idea is that we have an XML document and then we send it to an interpreter of CSS or XSL, but we also have to have </span><span class="c7">the rules that we&#39;re going to use on that particular document</span><span>. And the rules are going to do things like </span><span class="c7">match patterns</span><span>&nbsp;or </span><span class="c7">add extra commands</span><span class="c4">&nbsp;and once we send an XML document through the interpreter we&#39;ll get an HTML document out and then we can render that document in the browser.</span></li></ul><ul class="c8 lst-kix_kqhtq93lvmrp-1 start"><li class="c6 li-bullet-0"><span class="c1">Note</span><span class="c4">: we&#39;ll also check with the parser to make sure that the document is well formed as well before we translate it to HTML.</span></li></ul><h2 class="c24" id="h.f6syydv1bon6"><span>Conclusion</span></h2><ul class="c8 lst-kix_kqhtq93lvmrp-0"><li class="c10 li-bullet-0"><span>XML is a </span><span class="c7">standard for data representation and exchange</span><span class="c4">. </span></li><li class="c10 li-bullet-0"><span>It can also be thought of as a </span><span class="c7">data model</span><span>. Sort of a </span><span class="c7">competitor to the relational model</span><span class="c4">&nbsp;for structuring the data in one&#39;s application. </span></li></ul><ul class="c8 lst-kix_kqhtq93lvmrp-1 start"><li class="c6 li-bullet-0"><span>It generally has </span><span class="c7">a lot more flexibility than the relational model</span><span class="c4">, which can be a plus and a minus, actually.</span></li></ul><h1 class="c42" id="h.7vndwdd9cubz"><span class="c40 c36 c46">3.2 DTDs, IDs &amp; IDREFs</span></h1><h2 class="c24" id="h.yupxway0z878"><span>Terminology</span></h2><ul class="c8 lst-kix_iotbe2cpvfyr-0 start"><li class="c10 li-bullet-0"><span class="c5 c1">Valid XML</span><span>&nbsp;has to adhere to the same basic structural requirements as well-formed XML, but it also adheres to </span><span class="c5 c1">content specific specifications</span><span>. And we&#39;re going to learn two </span><span class="c5 c1">languages for those specifications</span><span class="c4">. </span></li></ul><ul class="c8 lst-kix_iotbe2cpvfyr-1 start"><li class="c6 li-bullet-0"><span class="c5 c1">Document Type Descriptors</span><span>&nbsp;or </span><span class="c5 c1">DTDs</span></li><li class="c6 li-bullet-0"><span class="c5 c1">XML schema</span><span class="c4">&nbsp;</span></li></ul><ul class="c8 lst-kix_iotbe2cpvfyr-2 start"><li class="c16 li-bullet-0"><span>Specifications in XML schema are known as </span><span class="c5 c1">XSDs</span><span>&nbsp;</span><span>or </span><span class="c28 c5 c54 c1">XML Schema Descriptions</span></li></ul><ul class="c8 lst-kix_iotbe2cpvfyr-0"><li class="c10 li-bullet-0"><span>So as a reminder, here&#39;s how things worked with </span><span class="c7">well-formed XML documents</span><span>. We sent the document to a parser and the parser would either return that the document was </span><span class="c1">not well-formed</span><span>&nbsp;or it would return </span><span class="c1">parsed XML</span><span>. </span><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 397.12px; height: 175.43px;"><img alt="" src="images/image23.png" style="width: 397.12px; height: 175.43px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></li><li class="c10 li-bullet-0"><span>Now let&#39;s consider what happens with </span><span class="c7">valid XML</span><span>. Now we use a validating XML parser, and we have an </span><span class="c1">additional input</span><span>&nbsp;to the process, which is </span><span class="c1">a specification</span><span>, either a </span><span class="c1">DTD</span><span>&nbsp;or an </span><span class="c1">XSD</span><span class="c4">. So that&#39;s also fed to the parser, along with the document. </span></li></ul><ul class="c8 lst-kix_iotbe2cpvfyr-1 start"><li class="c6 li-bullet-0"><span>The parser can again say the document is </span><span class="c1">not well formed</span><span class="c4">&nbsp;if it doesn&#39;t meet the basic structural requirements. </span></li><li class="c6 li-bullet-0"><span>It could also say that the document is </span><span class="c1">not valid</span><span class="c4">, meaning the structure of the document doesn&#39;t match the content specific specification. </span></li><li class="c6 li-bullet-0"><span>If everything is good, then once again &quot;</span><span class="c1">parsed XML</span><span class="c4">&quot; is returned. </span></li></ul><p class="c18 c39"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 409.93px; height: 177.64px;"><img alt="" src="images/image20.png" style="width: 409.93px; height: 177.64px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><ul class="c8 lst-kix_iotbe2cpvfyr-0"><li class="c10 li-bullet-0"><span>A </span><span class="c7">DTD</span><span>&nbsp;is </span><span class="c7">a language</span><span>&nbsp;that&#39;s kind of </span><span class="c7">like a grammar</span><span>, and </span><span class="c5 c1">what you can specify</span><span class="c4">&nbsp;in that language is for a particular document </span></li></ul><ul class="c8 lst-kix_iotbe2cpvfyr-1 start"><li class="c6 li-bullet-0"><span>what </span><span class="c1">elements</span><span class="c4">&nbsp;you want that document to contain, </span></li><li class="c6 li-bullet-0"><span>the </span><span class="c1">tags</span><span class="c4">&nbsp;of the elements, </span></li><li class="c6 li-bullet-0"><span>what </span><span class="c1">attributes</span><span class="c4">&nbsp;can be in the elements, </span></li><li class="c6 li-bullet-0"><span>how the different types of elements can be </span><span class="c1">nested</span><span class="c4">. </span></li><li class="c6 li-bullet-0"><span>Sometimes the </span><span class="c1">ordering of the elements</span><span class="c4">&nbsp;might want to be specified, </span></li><li class="c6 li-bullet-0"><span>and sometimes the </span><span class="c1">number of occurrences of different elements</span><span class="c4">. </span></li><li class="c6 li-bullet-0"><span>DTDs also allow the introduction of </span><span class="c1">special types of attributes</span><span>, called </span><span class="c5 c1">ids</span><span>&nbsp;and </span><span class="c5 c1">idrefs</span><span class="c4">. </span></li></ul><ul class="c8 lst-kix_iotbe2cpvfyr-2 start"><li class="c16 li-bullet-0"><span>And, effectively, what these allow you to do is </span><span class="c1">specify pointers within a document</span><span>, although these pointers are </span><span class="c1">untyped</span><span class="c4">. </span></li></ul><h2 class="c24" id="h.ovn3uzg2tl1w"><span>Positives and negatives about choosing to use a DTD or an XSD for one&#39;s XML data</span></h2><p class="c18 c52"><span class="c1">Why important: </span><span>I</span><span class="c4">f you&#39;re building an application that encodes its data in XML, you&#39;ll have to decide whether you want the XML to just be well formed or whether you want to have specifications and require the XML to be valid to satisfy those specifications.</span></p><ul class="c8 lst-kix_iotbe2cpvfyr-0"><li class="c10 li-bullet-0"><span class="c7">positives</span><span class="c4">:</span></li></ul><ul class="c8 lst-kix_iotbe2cpvfyr-1 start"><li class="c6 li-bullet-0"><span>when you write your program, you can assume that the data adheres to a specific structure. So programs can assume a structure and so the </span><span class="c1">programs themselves are simpler</span><span class="c4">&nbsp;because they don&#39;t have to be doing a lot of error checking on the data. They&#39;ll know that before the data reaches the program, it&#39;s been run through a validator and it does satisfy a particular structure. </span></li><li class="c6 li-bullet-0"><span>we talked some time ago about the </span><span class="c1">cascading style sheet</span><span>&nbsp;language and the </span><span class="c1">extensible style sheet</span><span>&nbsp;languages. These are languages that take XML and they run rules on it to process it into a different form, often HTML. When you write those rules, if you note that the data has a certain structure, then those </span><span class="c1">rules can be simpler</span><span class="c4">, so like the programs they also can assume particular structure and it makes them simpler. </span></li><li class="c6 li-bullet-0"><span>Now, another use for DTDs or XSDs is </span><span class="c1">as a specification language</span><span class="c4">&nbsp;for conveying what XML might need to look like. </span></li></ul><ul class="c8 lst-kix_iotbe2cpvfyr-2 start"><li class="c16 li-bullet-0"><span class="c4">example: </span></li></ul><ul class="c8 lst-kix_iotbe2cpvfyr-3 start"><li class="c19 c18 li-bullet-0"><span class="c4">if you&#39;re performing data exchange using XML, maybe a company is going to receive purchase orders in XML, the company can actually use the DTD as a specification for what the XML needs to look like when it arrives at the program it&#39;s going to operate on it. </span></li></ul><ul class="c8 lst-kix_iotbe2cpvfyr-1"><li class="c6 li-bullet-0"><span>Also </span><span class="c1">documentation</span><span class="c4">, it can be useful to use one of the specifications to just document what the data itself looks like. </span></li><li class="c6 li-bullet-0"><span>In general, really what we have here is the &ldquo;</span><span class="c1">benefits of typing</span><span>&rdquo; </span><sup><a href="#ftnt1" id="ftnt_ref1">[1]</a></sup></li></ul><ul class="c8 lst-kix_iotbe2cpvfyr-2 start"><li class="c16 li-bullet-0"><span>ie DTDs und XSDs sind quasi </span><span class="c1">types</span><span>&nbsp;(wie int, float, &hellip;) und stellen - wie alle types - eine gewisse Form der Daten sicher</span><a id="id.9gu8288dnxzl"></a><span class="c4">&nbsp;</span></li></ul><ul class="c8 lst-kix_iotbe2cpvfyr-1"><li class="c6 li-bullet-0"><span>We&#39;re talking about </span><span class="c1">strongly typed data</span><span>&nbsp;versus </span><span class="c1">loosely-typed data</span><span>, if you want to think of it that way. </span><sup><a href="#ftnt2" id="ftnt_ref2">[2]</a></sup></li></ul><ul class="c8 lst-kix_iotbe2cpvfyr-0"><li class="c10 li-bullet-0"><span class="c7">negatives</span><span class="c4">&nbsp;- benefits of not using a DTD: </span></li></ul><ul class="c8 lst-kix_iotbe2cpvfyr-1 start"><li class="c6 li-bullet-0"><span class="c1">flexibility</span><span>: So a DTD makes your XML data have to conform to a specification. If you want more flexibility or you want ease of change in the way that the data is formatted without running into a lot of errors, then, if that&#39;s what you want, then </span><span class="c1">the DTD can be constraining</span><span class="c4">. </span></li><li class="c6 li-bullet-0"><span class="c1">messiness: </span><span>Another fact is that </span><span class="c1">DTDs can be &ldquo;fairly&rdquo; messy</span><span>&nbsp;and this is not going to be obvious to you yet until we get into the demo, but </span><span class="c1">if the data is irregular, very irregular, then specifying its structure can be hard</span><span>, especially for irregular documents. Actually, when we see the schema language, we&#39;ll discover that </span><span class="c1">XSDs can be, I would say, &ldquo;really&rdquo; messy</span><span class="c4">, so they can actually get very large. It&#39;s possible to have a document where the specification of the structure of the document is much, much larger than the document itself, which seems not entirely intuitive, but when we get to learn about XSDs, I think you&#39;ll see how that can happen. </span></li><li class="c6 li-bullet-0"><span>So, overall, this is the &ldquo;</span><span class="c1">benefits of no typing</span><span class="c4">&rdquo;. It&#39; s really quite similar to the analogy in programming languages. </span><a id="id.my7qdc2v408e"></a></li></ul><h2 class="c24" id="h.94m9bfl3xb5y"><span>Example: DTDs</span></h2><ul class="c8 lst-kix_iotbe2cpvfyr-0"><li class="c10 li-bullet-0"><span class="c4">watch 3.2 ab 5:30-Ende</span></li><li class="c10 li-bullet-0"><span class="c4">merken, was #PCDATA, EMPTY, #IMPLIED, CDATA, ID, usw. bedeutet</span></li></ul><h3 class="c34" id="h.aj4hi0vojsnn"><span class="c38 c36">Declaring Elements</span></h3><ul class="c8 lst-kix_iotbe2cpvfyr-0"><li class="c45 c39 c68 li-bullet-0"><span class="c4">In a DTD, XML elements are declared with the following syntax:</span></li></ul><p class="c12"><span class="c53">&lt;</span><span class="c58">!ELEMENT</span><span class="c5">&nbsp;element-name category</span><span class="c28 c30">&gt;</span></p><p class="c18 c39"><span class="c4">or</span></p><p class="c12"><span class="c53">&lt;</span><span class="c58">!ELEMENT</span><span class="c5">&nbsp;element-name (element-content)</span><span class="c53">&gt;</span></p><h3 class="c34" id="h.ksahjuu5dqus"><span class="c38 c36">Empty Elements</span></h3><ul class="c8 lst-kix_iotbe2cpvfyr-0"><li class="c10 li-bullet-0"><span class="c4">zu EMPTY:</span></li></ul><ul class="c8 lst-kix_iotbe2cpvfyr-1 start"><li class="c60 c57 c52 li-bullet-0"><span class="c4">W3schools: Empty elements are declared with the category keyword EMPTY:</span></li></ul><p class="c12 c15"><span class="c53">&lt;</span><span class="c58">!ELEMENT</span><span class="c5">&nbsp;element-name EMPTY</span><span class="c53">&gt;</span></p><p class="c12"><span class="c4">Example:</span></p><p class="c12 c15"><span class="c53">&lt;</span><span class="c58">!ELEMENT</span><span class="c5">&nbsp;br EMPTY</span><span class="c53">&gt;</span></p><p class="c12"><span class="c4">XML example:</span></p><p class="c12 c15"><span class="c53">&lt;</span><span class="c58">br</span><span class="c5">&nbsp;/</span><span class="c28 c30">&gt;</span></p><h3 class="c34" id="h.k24iw6ak5ul2"><span class="c38 c36">Elements with Parsed Character Data</span></h3><ul class="c8 lst-kix_iotbe2cpvfyr-0"><li class="c10 li-bullet-0"><span>zu #PCDATA:</span></li></ul><ul class="c8 lst-kix_iotbe2cpvfyr-1 start"><li class="c6 li-bullet-0"><span>aus github: #PCDATA is [the type] when you have a leaf that consists of </span><span class="c40 c47 c54 c1">text data in the XML tree</span></li><li class="c6 li-bullet-0"><span>vom Quiz: #PCDATA is not appropriate for the type of an attribute. It is used for the type of </span><span class="c1">&quot;leaf&quot; text</span><span class="c4">. </span></li><li class="c6 li-bullet-0"><span>W3schools: Elements with only </span><span class="c1">parsed character data</span><span class="c4">&nbsp;are declared with #PCDATA inside parentheses:</span></li></ul><p class="c12 c15"><span class="c53">&lt;</span><span class="c58">!ELEMENT</span><span class="c5">&nbsp;element-name (#PCDATA)</span><span class="c53">&gt;</span></p><p class="c12"><span class="c4">Example:</span></p><p class="c12 c15"><span class="c53">&lt;</span><span class="c58">!ELEMENT</span><span class="c5">&nbsp;from (#PCDATA)</span><span class="c28 c30">&gt;</span></p><h2 class="c24" id="h.it07ra9j185v"><span class="c40 c36 c41">ID, IDREF and IDREFS</span></h2><ul class="c8 lst-kix_kf38y9f1865o-0 start"><li class="c10 li-bullet-0"><span>zB die &ldquo;ISBN&rdquo; eines Buches kann im DTD als </span><span class="c5 c1">ID-attribute</span><span class="c1">&nbsp;</span><span class="c4">festgelegt werden mit</span></li></ul><p class="c12"><span class="c28 c17 c5">&lt;!ELEMENT Book (Title, Remark?)&gt;</span></p><p class="c12"><span class="c17 c5">&lt;!ATTLIST &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c17 c5 c13">Book ISBN ID</span><span class="c28 c17 c5">&nbsp;#REQUIRED</span></p><p class="c18 c52 c15 c55"><span class="c28 c17 c5">Price CDATA #REQUIRED</span></p><p class="c18 c26"><span class="c28 c17 c5">Authors IDREFS #REQUIRED&gt;</span></p><p class="c18 c39"><span>und &ldquo;book&rdquo; als </span><span class="c5 c1">IDREF-attribute</span><span>&nbsp;mit</span></p><p class="c12"><span class="c28 c17 c5">&lt;!ELEMENT BookRef EMPTY&gt;</span></p><p class="c12"><span class="c17 c5">&lt;!ATTLIST BookRef </span><span class="c17 c5 c13">book IDREF</span><span class="c5 c17">&nbsp;#REQUIRED&gt;</span><span class="c28 c5 c36">&nbsp;</span></p><p class="c18 c39"><span>Dann kann man mit </span><span class="c17">&lt;BookRef book=&quot;ISBN-0-13-713526-2&quot;/&gt;</span><span class="c1">&nbsp;</span><span class="c4">auf ein Buch mit dieser &ldquo;ISBN&rdquo; verweisen</span></p><ul class="c8 lst-kix_iotbe2cpvfyr-0"><li class="c10 li-bullet-0"><span>the </span><span class="c7">pointers</span><span>&nbsp;when you have a DTD are </span><span class="c7">untyped</span><span class="c4">. </span></li></ul><ul class="c8 lst-kix_iotbe2cpvfyr-1 start"><li class="c6 li-bullet-0"><span>So it does check to make sure that this is </span><span class="c1">an ID</span><span>&nbsp;of another element, but we weren&#39;t able to specify that it should be </span><span class="c1">a book element</span><span class="c4">&nbsp;in our DTD, and since we&#39;re not able to specify it, of course it&#39;s not possible to check it. </span></li><li class="c6 li-bullet-0"><span class="c1">in XML schema, we can have typed pointers</span><span class="c4">&nbsp;but it&#39;s not possible to have them in DTDs</span></li></ul><h1 class="c42" id="h.6mb807t4012m"><span class="c40 c36 c46">3.3 XML Schema</span></h1><ul class="c8 lst-kix_kf38y9f1865o-0"><li class="c10 li-bullet-0"><span>XML schema is an </span><span class="c1">extensive</span><span class="c4">&nbsp;language, very powerful. </span></li><li class="c10 li-bullet-0"><span>Like document type descriptors </span><span class="c5 c1">we can specify</span><span class="c4">:</span></li></ul><ul class="c8 lst-kix_kf38y9f1865o-1 start"><li class="c6 li-bullet-0"><span>the </span><span class="c1">elements</span><span class="c4">&nbsp;we want in our XML data, </span></li><li class="c6 li-bullet-0"><span>the </span><span class="c1">attributes</span><span class="c4">, </span></li><li class="c6 li-bullet-0"><span>the </span><span class="c1">nesting</span><span class="c4">&nbsp;of the elements, </span></li><li class="c6 li-bullet-0"><span>how elements need to be </span><span class="c1">ordered</span><span class="c4">, </span></li><li class="c6 li-bullet-0"><span class="c1">number of occurrences of elements</span><span class="c4">. </span></li><li class="c6 li-bullet-0"><span class="c4">In addition [compared to DTDs] we can specify </span></li></ul><ul class="c8 lst-kix_kf38y9f1865o-2 start"><li class="c16 li-bullet-0"><span class="c40 c47 c54 c1">data types </span></li><li class="c16 li-bullet-0"><span>we can specify </span><span class="c1">keys</span><span class="c4">, </span></li><li class="c16 li-bullet-0"><span>the </span><span class="c1">pointers</span><span>&nbsp;that we can specify </span><span class="c1">are now typed</span><span class="c4">&nbsp;</span></li><li class="c16 li-bullet-0"><span class="c4">and much, much more. </span></li></ul><ul class="c8 lst-kix_kf38y9f1865o-0"><li class="c10 li-bullet-0"><span>Now, </span><span class="c1">one difference between XML schema and DTDs</span><span>&nbsp;is that </span><span class="c7">the specifications in XML schemas</span><span>&nbsp;called </span><span class="c5 c1">XSD</span><span>&#39;s are actually </span><span class="c1">written in the xml language</span><span class="c4">&nbsp;itself. </span></li></ul><ul class="c8 lst-kix_kf38y9f1865o-1 start"><li class="c6 li-bullet-0"><span class="c4">That can be useful for example if we have a browser that nicely renders the XML.</span></li></ul><ul class="c8 lst-kix_kf38y9f1865o-0"><li class="c10 li-bullet-0"><span class="c4">watch ab 1:26</span></li><li class="c10 li-bullet-0"><span>So, the other thing I want to mention is that right now we have the XML schema descriptor in one file and the XML in another. You might remember for the DTD, we simply placed the DTDs specification at the top of the file with the XML. </span><span class="c1">For DTDs you can do it either way</span><span>&nbsp;in the same file or in a separate file. </span><span class="c1">For XSDs, we always put those in a separate file.</span><span class="c4">&nbsp;</span></li><li class="c10 li-bullet-0"><span>Also notice that the </span><span class="c1">XSD itself is in XML</span><span>. It is using </span><span class="c5 c1">special tags</span><span>. These are </span><span class="c1">tags that are part of the XSD language</span><span>, but we are </span><span class="c1">still expressing it in XML</span><span class="c4">. </span></li><li class="c10 li-bullet-0"><span>So we have two XML files, the data file and the schema file. </span><span class="c1">To validate the data file against the schema file</span><span>, we can use again the </span><span class="c5 c1">xmllint</span><span class="c4">&nbsp;feature.</span></li><li class="c10 li-bullet-0"><span>four </span><span class="c7">features</span><span>&nbsp;of XML schema </span><span class="c7">that aren&#39;t present in DTD&#39;s</span><span class="c4">. </span></li></ul><ul class="c8 lst-kix_kf38y9f1865o-1 start"><li class="c6 li-bullet-0"><span>One of them is </span><span class="c5 c1">typed values</span><span class="c1">.</span><span>&nbsp;(zB attribute &ldquo;Price=&rdquo; muss einen </span><span class="c1">int</span><span class="c4">&nbsp;value haben)</span></li><li class="c6 li-bullet-0"><span>One of them is</span><span class="c1">&nbsp;</span><span class="c5 c1">key declarations</span><span class="c4">. Similar to IDs but a little bit more powerful.</span></li></ul><hr><p class="c14"><span class="c4"></span></p><ul class="c8 lst-kix_kf38y9f1865o-0"><li class="c10 li-bullet-0"><span class="c1">Was meint sie mit</span><span class="c4">&nbsp;&ldquo;When we did something similar with DTDs we got an error because in DTDs, IDs have be globally unique. Here we should not get an error. HG should be a perfectly reasonable key for books because we don&#39;t have another value that&#39;s the same. And in fact it does validate.&rdquo;</span></li></ul><ul class="c8 lst-kix_kf38y9f1865o-1 start"><li class="c6 li-bullet-0"><span class="c1">benutzt man DTDs</span><span>&nbsp;kann man im .xml nicht </span><span class="c17 c5">ISBN=&rdquo;HG&rdquo;</span><span>&nbsp;und gleichzeitig </span><span class="c17 c5">Ident=&rdquo;HG&rdquo;</span><span>&nbsp;festlegen, weil jeder key </span><span class="c1">value</span><span>&nbsp;(hier: &ldquo;HG&rdquo;) nur einmal vorkommen darf, auch wenn die keys unterschiedliche </span><span class="c1">Namen</span><span>&nbsp;haben (die Namen hier: ISBN, Ident) =&gt; dh. die keys d&uuml;rfen </span><span class="c1">GLOBAL </span><span class="c4">nur einmal vorkommen</span></li><li class="c6 li-bullet-0"><span class="c1">benutzt man XSDs </span><span class="c4">geht das !</span></li></ul><hr><p class="c14"><span class="c4"></span></p><ul class="c8 lst-kix_kf38y9f1865o-1"><li class="c6 li-bullet-0"><span>One is </span><span class="c5 c1">references</span><span class="c4">&nbsp;which are again similar to pointers But a little more powerful (sind sozusagen &ldquo;typed&rdquo; pointers)</span></li></ul><hr><p class="c14"><span class="c4"></span></p><ul class="c8 lst-kix_m1jt6hxo4lcq-0 start"><li class="c10 li-bullet-0"><span>one of the reference types that we&#39;ve defined in our DTD is a pointer to authors that we&#39;re using in our books. Specifically, we want to specify that this attribute here, the &ldquo;</span><span class="c17 c5">authIdent</span><span>&rdquo;, has a value that is a key </span><span class="c1">for the author elements</span><span>. And we want to make sure it&#39;s author elements that its pointing to </span><span class="c1">and not other types</span><span>&nbsp;of elements. Dies kann man &uuml;ber </span><span class="c5 c1">XPath </span><span>mit &ldquo;</span><span class="c17 c5">keyref</span><span class="c4">&rdquo; machen (in sp&auml;teren videos):</span></li></ul><p class="c12"><span class="c17 c5">&lt;xsd:keyref name=&quot;AuthorKeyRef&quot; refer=&quot;AuthorKey&quot;&gt;</span></p><p class="c12 c15"><span class="c17 c5">&lt;xsd:selector xpath=&quot;Book/Authors/Auth&quot; /&gt;</span></p><p class="c12 c15"><span class="c28 c17 c5">&lt;xsd:field xpath=&quot;@authIdent&quot; /&gt;</span></p><p class="c12 c15"><span class="c28 c17 c5">&lt;/xsd:keyref&gt;</span></p><p class="c18 c39"><span>what it says is that when we navigate in the document down to one of these &ldquo;</span><span class="c17 c5">Auth</span><span>&rdquo; elements, within that &ldquo;</span><span class="c17 c5">Auth</span><span>&rdquo; element, the &ldquo;</span><span class="c17 c5">authIdent</span><span class="c4">&rdquo; attribute is a reference to what we have already defined as author keys (hier: &ldquo;HG&rdquo;, &ldquo;JU&rdquo;, &ldquo;JW&rdquo;).</span></p><p class="c18 c39"><span class="c4">Analoges Bsp. f&uuml;r &ldquo;Books&rdquo;:</span></p><p class="c18 c39 c15"><span class="c28 c17 c5">&lt;xsd:keyref name=&quot;BookKeyRef&quot; refer=&quot;BookKey&quot;&gt;</span></p><p class="c12 c15"><span class="c28 c17 c5">&lt;xsd:selector xpath=&quot;Book/Remark/BookRef&quot; /&gt;</span></p><p class="c12 c15"><span class="c28 c17 c5">&lt;xsd:field xpath=&quot;@book&quot; /&gt;</span></p><p class="c12 c15"><span class="c28 c17 c5">&lt;/xsd:keyref&gt;</span></p><hr><p class="c14"><span class="c4"></span></p><ul class="c8 lst-kix_kf38y9f1865o-1"><li class="c6 li-bullet-0"><span>and finally </span><span class="c5 c1">occurrence constraints</span><span class="c4">.</span></li></ul><hr><p class="c14"><span class="c4"></span></p><p class="c12"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 465.50px; height: 161.91px;"><img alt="" src="images/image5.png" style="width: 465.50px; height: 161.91px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c12"><span>wenn &ldquo;</span><span class="c17 c5">minOccurs=</span><span>&rdquo; oder &ldquo;</span><span class="c17 c5">maxOccurs=</span><span>&rdquo; nicht angegeben wird, ist es</span><span class="c40 c47 c54 c1">&nbsp;per default gleich 1 !</span></p><hr><p class="c14"><span class="c4"></span></p><ul class="c8 lst-kix_pjw9fvbjrcvk-0 start"><li class="c10 li-bullet-0"><span class="c4">wdh. XML Quiz !</span></li><li class="c10 li-bullet-0"><span class="c4">lerne regexp basics !</span></li></ul><h1 class="c42" id="h.opo0qjn7zla3"><span class="c40 c36 c46">4.1 JSON</span></h1><ul class="c8 lst-kix_776urtvrz4fs-0 start"><li class="c10 li-bullet-0"><span>Like XML, JSON can be thought of as </span><span class="c1">a data model</span><span>. An alternative to the relational data model that is more appropriate </span><span class="c1">for semi-structured data</span><span class="c4">.</span></li><li class="c10 li-bullet-0"><span class="c4">JSON is by a large margin the newest [of the three data models: relational model, XML and JSON]</span></li><li class="c10 li-bullet-0"><span class="c1">there aren&#39;t as many tools for JSON </span><span class="c4">as we have for XML and certainly not as we have for relational. </span></li><li class="c10 li-bullet-0"><span>JSON stands for </span><span class="c5 c1">Javascript object notation</span><span>. Although it&#39;s evolved to become </span><span class="c1">pretty much independent of Javascript at this point</span><span class="c4">.</span></li><li class="c10 li-bullet-0"><span>The little snippet of JSON in the corner right, </span><span>now mostly</span><span class="c4">&nbsp;for decoration. We&#39;ll talk about the details in just a minute. </span></li><li class="c10 li-bullet-0"><span>JSON was </span><span class="c1">designed originally for what&#39;s called </span><span class="c5 c1">serializing data objects</span><span class="c4">. That is taking the objects that are in a program and sort of writing them down in a serial fashion, typically in files. </span></li><li class="c10 li-bullet-0"><span class="c4">one thing about JSON is that </span></li></ul><ul class="c8 lst-kix_776urtvrz4fs-1 start"><li class="c6 li-bullet-0"><span>it is </span><span class="c1">human readable</span><span class="c4">, similar to the way xml is human readable and </span></li><li class="c6 li-bullet-0"><span>is </span><span class="c1">often used for data interchange</span><span class="c4">. So, for writing out, say the objects program so that they can be exchanged with another program and read into that one. </span></li></ul><ul class="c8 lst-kix_776urtvrz4fs-0"><li class="c10 li-bullet-0"><span>Also, just more generally, because JSON is </span><span class="c1">not as rigid as the relational model</span><span>, it&#39;s generally </span><span class="c1">useful for representing and for storing data that doesn&#39;t have rigid structure</span><span>&nbsp;that we&#39;ve been calling </span><span class="c5 c1">semi-structured data</span><span class="c4">. </span></li><li class="c10 li-bullet-0"><span>As I </span><span>mentioned, JSON</span><span>&nbsp;is </span><span class="c1">no longer closely tied to </span><span class="c1">JavaScript</span><span>&nbsp;</span></li></ul><ul class="c8 lst-kix_776urtvrz4fs-1 start"><li class="c6 li-bullet-0"><span>Many</span><span class="c4">&nbsp;different programming languages do have parsers for reading JSON data into the program and for writing out JSON data as well. </span></li></ul><ul class="c8 lst-kix_776urtvrz4fs-0"><li class="c10 li-bullet-0"><span>Now, let&#39;s talk about the </span><span class="c1">basic constructs in JSON</span><span>, and as we will see </span><span>this</span><span>&nbsp;constructs are </span><span class="c5 c1">recursively defined</span><span class="c4">. </span></li><li class="c10 li-bullet-0"><span>I. The </span><span class="c5 c1">basic atomic values</span><span class="c5">&nbsp;(=</span><span class="c5 c1">Base values</span><span class="c5">)</span><span class="c4">&nbsp;in JSON are fairly typical: </span></li></ul><ul class="c8 lst-kix_776urtvrz4fs-1 start"><li class="c6 li-bullet-0"><span>We have </span><span class="c1">numbers</span><span class="c4">, </span></li><li class="c6 li-bullet-0"><span>we have </span><span class="c1">strings</span><span class="c4">. </span></li><li class="c6 li-bullet-0"><span>We also have </span><span class="c1">Boolean Values</span><span class="c4">&nbsp;although there are none of those in this example, that&#39;s true and false, and no values. </span></li></ul><ul class="c8 lst-kix_776urtvrz4fs-0"><li class="c10 li-bullet-0"><span>II. There are two types of </span><span class="c5 c1">composite values</span><span class="c4">&nbsp;in JSON: </span></li></ul><ul class="c8 lst-kix_776urtvrz4fs-1 start"><li class="c6 li-bullet-0"><span>1. </span><span class="c5 c1">Objects</span><span>&nbsp;are </span><span class="c20 c1">enclosed in </span><span class="c5 c1">curly braces</span><span class="c20 c1">&nbsp;and they consist of sets of label-value pairs</span><span class="c4">. </span></li></ul><ul class="c8 lst-kix_776urtvrz4fs-2 start"><li class="c16 li-bullet-0"><span class="c4">For example, we have an object here that has a first name and a last name. We have a more - bigger, let&#39;s say, object here that has ISBN, price, edition, and so on. </span></li></ul><ul class="c8 lst-kix_776urtvrz4fs-1"><li class="c6 li-bullet-0"><span>2. the second type of composite value in JSON is </span><span class="c5 c1">arrays</span><span>, and arrays are </span><span class="c20 c1">enclosed in </span><span class="c5 c1">square brackets</span><span class="c20 c1">&nbsp;with commas between the array elements</span><span>. Actually, we have commas in the objects, as well, and </span><span class="c1">arrays are lists of values</span><span class="c4">. </span></li></ul><ul class="c8 lst-kix_776urtvrz4fs-2 start"><li class="c16 li-bullet-0"><span>For example, we can see here that authors </span><span>is a</span><span class="c4">&nbsp;list of author objects. </span></li></ul><ul class="c8 lst-kix_776urtvrz4fs-0"><li class="c10 li-bullet-0"><span>Now I mentioned that the </span><span class="c1">constructs are </span><span class="c5 c1">recursive</span><span class="c4">, specifically </span></li></ul><ul class="c8 lst-kix_776urtvrz4fs-1 start"><li class="c6 li-bullet-0"><span>the </span><span class="c1">values inside </span><span class="c20 c1">arrays</span><span class="c1">&nbsp;can be anything</span><span>, they can be other arrays or objects, base values and </span><span>the</span><span class="c4">&nbsp;values are making up the label-value pairs </span></li><li class="c6 li-bullet-0"><span>and </span><span class="c20 c1">objects</span><span class="c1">&nbsp;can also be any composite value or a base value</span><span class="c4">. </span></li></ul><ul class="c8 lst-kix_776urtvrz4fs-0"><li class="c10 li-bullet-0"><span>And I did want to mention, by the way, that sometimes this word &ldquo;</span><span class="c20 c1">label</span><span>&rdquo; in &ldquo;</span><span class="c20 c1">label</span><span>-value pairs&rdquo; is called a &quot;</span><span class="c5 c1">property</span><span class="c4">&quot;. </span></li><li class="c10 li-bullet-0"><span>So, just like XML, JSON has some basic structural requirements in its format but it </span><span class="c1">doesn&#39;t have a lot of requirements in terms of uniformity</span><span>. We have a couple of examples of </span><span class="c5 c1">heterogeneity</span><span>&nbsp;in here</span><span class="c4">, for example, </span></li></ul><ul class="c8 lst-kix_776urtvrz4fs-1 start"><li class="c6 li-bullet-0"><span>this</span><span class="c4">&nbsp;book has an edition and the other one doesn&#39;t. </span></li><li class="c6 li-bullet-0"><span class="c4">This book has a remark and the other one doesn&#39;t. </span></li><li class="c6 li-bullet-0"><span class="c4">But we&#39;ll see many more examples of heterogeneity when we do the demo and look into JSON data in more detail. </span></li></ul><ul class="c8 lst-kix_776urtvrz4fs-0"><li class="c10 li-bullet-0"><span>Now let&#39;s </span><span class="c1">compare JSON and the relational model</span><span class="c4">. </span></li></ul><ul class="c8 lst-kix_776urtvrz4fs-1 start"><li class="c6 li-bullet-0"><span>We will see that many of the comparisons are fairly similar to when we compared </span><span class="c1">XML</span><span>&nbsp;to the </span><span class="c1">relational model</span><span class="c4">.</span></li><li class="c6 li-bullet-0"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 356.50px; height: 200.75px;"><img alt="" src="images/image14.png" style="width: 356.50px; height: 200.75px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span><span class="c4">&nbsp;</span></li></ul><ul class="c8 lst-kix_776urtvrz4fs-0"><li class="c10 li-bullet-0"><span>Let&#39;s start with the </span><span class="c1">basic structures</span><span class="c4">&nbsp;underlying the data model. </span></li></ul><ul class="c8 lst-kix_776urtvrz4fs-1 start"><li class="c6 li-bullet-0"><span>So, the </span><span class="c1">relational model</span><span>&nbsp;is based on </span><span class="c1">tables</span><span>. We set </span><span>up structure</span><span>&nbsp;</span><span>of table</span><span class="c4">, a set of columns, and then the data becomes rows in those tables. </span></li><li class="c6 li-bullet-0"><span class="c1">JSON</span><span>&nbsp;is based instead on sets, the </span><span class="c1">sets of label pairs and arrays</span><span class="c4">&nbsp;and as we saw, they can be nested. </span></li></ul><ul class="c8 lst-kix_776urtvrz4fs-0"><li class="c10 li-bullet-0"><span>One of the big differences between the two models, of course, is the </span><span class="c1">schema</span><span class="c4">. </span></li></ul><ul class="c8 lst-kix_776urtvrz4fs-1 start"><li class="c6 li-bullet-0"><span>So the Relational model has a </span><span class="c1">Schema fixed in advance</span><span class="c4">, you set it up before you have any data loaded and then all data needs to conform to that Schema. </span></li><li class="c6 li-bullet-0"><span>JSON on the other hand typically </span><span class="c1">does not require a schema</span><span>&nbsp;in advance. In fact, the </span><span class="c1">schema and the data are kinda mixed together</span><span>&nbsp;just like in XML, and this is often referred to as </span><span class="c5 c1">self-describing data</span><span>, where the </span><span class="c1">schema elements are within the data itself</span><span class="c4">. And this is of course typically more flexible than the relational model. But there are advantages to having a schema as well, definitely. </span></li></ul><ul class="c8 lst-kix_776urtvrz4fs-0"><li class="c10 li-bullet-0"><span>As far as </span><span class="c1">queries</span><span class="c4">&nbsp;go, </span></li></ul><ul class="c8 lst-kix_776urtvrz4fs-1 start"><li class="c6 li-bullet-0"><span>one</span><span>&nbsp;of the nice features of the relational model is that there are </span><span class="c1">simple, expressive languages for querying</span><span class="c4">&nbsp;the database. </span></li><li class="c6 li-bullet-0"><span>In terms of JSON, although a few things have been proposed; at this point </span><span class="c1">there&#39;s nothing widely used for querying JSON data</span><span class="c4">. Typically JSON data is read into a program and it&#39;s manipulated programmatically. </span></li></ul><ul class="c8 lst-kix_776urtvrz4fs-2 start"><li class="c16 li-bullet-0"><span class="c4">Now let me interject that this video is being made in February 2012. So it is possible that some JSON query languages will emerge and become widely used. There is just nothing used at this point. There are some proposals: There&#39;s </span></li></ul><ul class="c8 lst-kix_776urtvrz4fs-3 start"><li class="c19 c18 li-bullet-0"><span>a </span><span class="c5 c1">JSON path</span><span class="c4">&nbsp;language, </span></li><li class="c19 c18 li-bullet-0"><span class="c5 c1">JSON Query</span><span class="c4">, </span></li><li class="c19 c18 li-bullet-0"><span>a language called </span><span class="c5 c1">JAQL</span><span class="c4">. </span></li></ul><ul class="c8 lst-kix_776urtvrz4fs-2"><li class="c16 li-bullet-0"><span>It may be that just like XML, the query language </span><span>are</span><span>&nbsp;</span><span>gonna</span><span>&nbsp;follow the prevalent use of the data format or the data model. But that </span><span>does</span><span class="c4">&nbsp;not happened yet, as of February 2012. </span></li></ul><ul class="c8 lst-kix_776urtvrz4fs-0"><li class="c10 li-bullet-0"><span>How about </span><span class="c1">ordering</span><span class="c4">? </span></li></ul><ul class="c8 lst-kix_776urtvrz4fs-1 start"><li class="c6 li-bullet-0"><span>One aspect of the relational model is that it&#39;s an </span><span class="c1">unordered model</span><span>. It&#39;s </span><span class="c1">based on sets</span><span class="c4">&nbsp;and if we want to see relational data in sorted order then we put that inside a query. </span></li><li class="c6 li-bullet-0"><span>In JSON, we have arrays as one of the basic data structures, and </span><span class="c1">arrays are ordered</span><span>. Like XML, JSON data is usually written to files and </span><span class="c1">files themselves are </span><span class="c5 c1">naturally ordered</span><span>, </span><span class="c13 c1">but the ordering</span><span>&nbsp;of data in files usually </span><span class="c13 c1">isn&#39;t relevant</span><span class="c4">, sometimes it is, but typically not. </span></li></ul><ul class="c8 lst-kix_776urtvrz4fs-0"><li class="c10 li-bullet-0"><span>Finally, in terms of </span><span class="c1">implementation</span><span class="c4">, </span></li></ul><ul class="c8 lst-kix_776urtvrz4fs-1 start"><li class="c6 li-bullet-0"><span>for the relational model, </span><span class="c1">there are systems that implement the relational model natively</span><span class="c4">. They&#39;re very mature, generally quite efficient and powerful systems. </span></li><li class="c6 li-bullet-0"><span>For JSON, </span><span class="c1">we </span><span class="c29 c1">haven&#39;t</span><span class="c1">&nbsp;yet seen stand alone database systems that use JSON as their data model</span><span class="c4">&nbsp;instead JSON is more typically coupled with programming languages. </span></li></ul><ul class="c8 lst-kix_776urtvrz4fs-2 start"><li class="c16 li-bullet-0"><span>One thing I should add </span><span>however JSON</span><span>&nbsp;is </span><span class="c1">used in </span><span class="c5 c1">NoSQL</span><span class="c1">&nbsp;systems</span><span>. We do have videos about NoSQL systems you may or may not have </span><span>watched those yet</span><span class="c4">. There&#39;s a couple of different ways that JSON is used in those systems: </span></li></ul><ul class="c8 lst-kix_776urtvrz4fs-3 start"><li class="c18 c19 li-bullet-0"><span>One of them is just </span><span class="c1">as a format</span><span class="c4">&nbsp;for reading data into the systems and writing data out from the systems. </span></li><li class="c19 c18 li-bullet-0"><span>The other way that it is used is that some of the NoSQL systems are what are called &quot;</span><span class="c5 c1">Document Management Systems</span><span>&quot; where the </span><span class="c1">documents themselves may contain JSON data</span><span class="c4">&nbsp;and then the systems will have special features for manipulating the JSON in the documents that are stored by the system.</span></li></ul><h2 class="c24" id="h.gn6xd48q97px"><span>JSON </span><span>vs</span><span>&nbsp;XML</span></h2><ul class="c8 lst-kix_776urtvrz4fs-0"><li class="c10 li-bullet-0"><span>Now let&#39;s compare JSON and XML. This is actually a </span><span class="c1">hotly debated</span><span>&nbsp;comparison right now. There is </span><span class="c1">significant overlap in the uses of JSON and XML</span><span>. </span><span class="c13 c1">Both of them are very good for putting semi-structured data into a file format and using it for data interchange</span><span class="c4">. And so because there&#39;s so much overlap in what they&#39;re used for, it&#39;s not surprising that there&#39;s significant debate. </span></li><li class="c10 li-bullet-0"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 415.50px; height: 233.98px;"><img alt="" src="images/image7.png" style="width: 415.50px; height: 233.98px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></li><li class="c10 li-bullet-0"><span>Let&#39;s start by looking at the </span><span class="c1">verbosity</span><span class="c4">&nbsp;of expressing data in the two languages. </span></li></ul><ul class="c8 lst-kix_776urtvrz4fs-1 start"><li class="c6 li-bullet-0"><span>So it is the case that </span><span class="c1">XML is in general, a little more verbose than JSON</span><span>. So the same data expressed in the 2 formats will tend to have more characters in XML than JSON and you can see that in our examples because our big JSON example was actually pretty much the same data that we used when we showed XML. And the </span><span class="c1">reason</span><span>&nbsp;for XML being a bit more verbose largely has to do actually with </span><span class="c1">closing tags</span><span class="c4">, and some other features. But I&#39;ll let you judge for yourself whether the somewhat longer expression of XML is a problem. </span></li></ul><ul class="c8 lst-kix_776urtvrz4fs-0"><li class="c10 li-bullet-0"><span>Second is </span><span class="c1">complexity</span><span class="c4">, </span></li></ul><ul class="c8 lst-kix_776urtvrz4fs-1 start"><li class="c6 li-bullet-0"><span>most people would say that </span><span class="c1">XML is a bit more complex than JSON</span><span class="c4">. I&#39;m not sure I entirely agree with that comparison. </span></li></ul><ul class="c8 lst-kix_776urtvrz4fs-2 start"><li class="c16 li-bullet-0"><span class="c4">If you look at the subset of XML that people really use, you&#39;ve got attributes, sub elements and text, and that&#39;s more or less it. </span></li><li class="c16 li-bullet-0"><span>If you look at Json, </span><span>you got</span><span class="c4">&nbsp;your basic values and you&#39;ve got your objects and your arrays. </span></li></ul><ul class="c8 lst-kix_776urtvrz4fs-1"><li class="c6 li-bullet-0"><span>I think the issue is that XML has a lot of extra stuff that goes along with it. So, </span><span class="c40 c47 c54 c1">if you read the entire XML specification, it will take you a long time. </span></li><li class="c6 li-bullet-0"><span class="c1">JSON, you can grasp the entire specification a little bit more quickly</span><span class="c4">. </span></li></ul><ul class="c8 lst-kix_776urtvrz4fs-0"><li class="c10 li-bullet-0"><span>Now let&#39;s turn to </span><span class="c1">validity</span><span>. And by validity I mean the ability to specify constraints or </span><span>restriction</span><span class="c4">&nbsp;or schema on the structure of data in one of these models, and have it enforced by tools or by a system. </span></li></ul><ul class="c8 lst-kix_776urtvrz4fs-1 start"><li class="c6 li-bullet-0"><span>Specifically in XML we have the notion of </span><span class="c1">document type descriptors</span><span>, or </span><span class="c1">DTDs</span><span>, we also have </span><span class="c1">XML Schema</span><span>&nbsp;which gives us </span><span class="c1">XSD&#39;s</span><span>, </span><span class="c1">XML Schema Descriptors</span><span>. And these are </span><span>schema like</span><span class="c4">&nbsp;things that we can specify, and we can have our data checked to make sure it conforms to the schema, </span></li></ul><ul class="c8 lst-kix_776urtvrz4fs-2 start"><li class="c16 li-bullet-0"><span>and these are, I would say, </span><span class="c1">fairly widely used</span><span class="c4">&nbsp;at this point for XML. </span></li></ul><ul class="c8 lst-kix_776urtvrz4fs-1"><li class="c6 li-bullet-0"><span>For JSON, there&#39;s something called </span><span class="c5 c1">JSON Schema</span><span class="c4">. And, you know, similar to XML Schema, it&#39;s a way to specify the structure and then we can check that JSON conforms to that and we will see some of that in our demo. </span></li></ul><ul class="c8 lst-kix_776urtvrz4fs-2 start"><li class="c16 li-bullet-0"><span>The current status, February 2012 is that </span><span class="c1">this is not widely used at this point</span><span>. But again, it could really just be evolution. If we look back at XML, as it was originally proposed, probably we didn&#39;t see a </span><span>whole of lot</span><span class="c4">&nbsp;of use of DTDs, and in fact not as XSDs for sure until later on. So we&#39;ll just have to see whether JSON evolves in a similar way. </span></li></ul><ul class="c8 lst-kix_776urtvrz4fs-0"><li class="c10 li-bullet-0"><span>Now the </span><span class="c1">programming interface</span><span class="c4">&nbsp;is where JSON really shines. </span></li></ul><ul class="c8 lst-kix_776urtvrz4fs-1 start"><li class="c6 li-bullet-0"><span>The programming interface for XML can be </span><span class="c1">fairly clunky</span><span>. The XML model, the attributes and sub-elements and so on, </span><span class="c13 c1">don&#39;t typically match the model of data inside a programming language</span><span>. In fact, that&#39;s something called the </span><span class="c5 c1">impedance mismatch</span><span>:</span><span class="c4">&nbsp;</span></li></ul><ul class="c8 lst-kix_776urtvrz4fs-2 start"><li class="c16 li-bullet-0"><span>[impedance mismatch in </span><span class="c1">relational database</span><span>&nbsp;systems</span><span>:] The impedance mismatch has been discussed in database systems actually for decades because one of the original criticisms of relational database systems is that the data structures used in the database, specifically </span><span class="c1">tables, didn&#39;t match directly with the data structures in programming languages</span><span class="c4">. So there had to be some manipulation at the interface between programming languages and the database system. </span></li><li class="c16 li-bullet-0"><span>[impedance mismatch in </span><span class="c1">XML</span><span>&nbsp;systems:] So that same impedance mismatch is pretty much present in XML where in </span><span class="c13 c1">JSON is really a more direct mapping between many programming languages and the structures of JSON</span><span class="c4">. </span></li></ul><ul class="c8 lst-kix_776urtvrz4fs-0"><li class="c10 li-bullet-0"><span>Finally, let&#39;s talk about </span><span class="c1">querying</span><span class="c4">. </span></li></ul><ul class="c8 lst-kix_776urtvrz4fs-1 start"><li class="c6 li-bullet-0"><span>for XML we do have </span><span class="c1">XPath</span><span>, we have </span><span class="c1">XQuery</span><span>, we have </span><span class="c1">XSLT</span><span>. Maybe </span><span class="c1">not all of them are widely used</span><span>&nbsp;but there&#39;s no question that XPath at least and XSL are used </span><span>quit</span><span class="c4">e a bit. </span></li><li class="c6 li-bullet-0"><span>I&#39;ve already touched on this a bit, but JSON </span><span class="c1">does not have any mature, widely used query languages at this point</span><span class="c4">.</span></li></ul><ul class="c8 lst-kix_776urtvrz4fs-2 start"><li class="c16 li-bullet-0"><span>There is a proposal called </span><span class="c5 c1">JSON path</span><span class="c4">. It looks actually quite a lot like XPath. Maybe it&#39;ll catch on. </span></li><li class="c16 li-bullet-0"><span>There&#39;s something called </span><span class="c5 c1">JSON Query</span><span class="c4">. Doesn&#39;t look so much like XML Query, I mean, XQuery. </span></li><li class="c16 li-bullet-0"><span>and finally, there has been a proposal called </span><span class="c5 c1">JAQL</span><span>&nbsp;for the </span><span class="c5 c1">JSON query language</span><span class="c4">, </span></li><li class="c16 li-bullet-0"><span class="c4">but again as of February 2012 all of these are still very early, so we just don&#39;t know what&#39;s going to catch on. </span></li></ul><h2 class="c24" id="h.77lvxmvak0bf"><span class="c40 c36 c41">Valid JSON</span></h2><h3 class="c34" id="h.d1t8d1ti1t2u"><span class="c38 c36">Syntactically</span></h3><ul class="c8 lst-kix_776urtvrz4fs-0"><li class="c10 li-bullet-0"><span>So now let&#39;s talk about the </span><span class="c1">validity</span><span>&nbsp;of JSON data. JSON data that&#39;s </span><span class="c5 c1">syntactically valid</span><span>, simply needs to adhere to the </span><span class="c1">basic structural requirements</span><span class="c4">. </span></li><li class="c10 li-bullet-0"><span>As a reminder, that would be that we have sets of label value pairs, we have arrays of values and our base values are from predefined types. And again, these values here are defined recursively. So we start with a JSON file and we send it to a </span><span class="c1">parser</span><span class="c4">, the parser may determine that the file has syntactic errors or if the file is syntactically correct then it can be parsed into objects in a programming language. </span></li></ul><h3 class="c34" id="h.8vq5moq7ukik"><span class="c38 c36">Semantically</span></h3><ul class="c8 lst-kix_776urtvrz4fs-0"><li class="c10 li-bullet-0"><span>Now if we&#39;re interested in </span><span class="c5 c1">semantically valid</span><span>&nbsp;JSON; that is </span><span class="c1">JSON that conforms to some constraints or a schema</span><span class="c4">, then </span></li></ul><ul class="c8 lst-kix_776urtvrz4fs-1 start"><li class="c6 li-bullet-0"><span>in addition to checking the </span><span>basics</span><span class="c4">&nbsp;structural requirements, </span></li><li class="c6 li-bullet-0"><span class="c4">we check whether JSON conforms to the specified schema. </span></li></ul><ul class="c8 lst-kix_776urtvrz4fs-0"><li class="c10 li-bullet-0"><span>If we use a language like </span><span class="c5 c1">JSON schema</span><span>&nbsp;for example, we put a specification in as a separate file, and in fact </span><span class="c1">JSON schema is expressed in JSON itself</span><span>, as we&#39;ll see in our demo, we send it to a </span><span class="c5 c1">validator</span><span>&nbsp;and that validator might find that there are some </span><span class="c5 c1">syntactic errors</span><span>&nbsp;or it may find that there are some </span><span class="c5 c1">semantic errors</span><span class="c4">&nbsp;so the data could be correct syntactically but not conform to the schema. If it&#39;s both syntactically and semantically correct then it can move on to the parser where it will be parsed again into objects in a programming language. </span></li></ul><h2 class="c24" id="h.l83v4fcespy8"><span class="c40 c36 c41">Summary</span></h2><ul class="c8 lst-kix_776urtvrz4fs-0"><li class="c10 li-bullet-0"><span>So </span><span class="c1">to summarize</span><span class="c4">, JSON stands for Javascript Object Notation. It&#39;s a standard for taking data objects and serializing them into a format that&#39;s human readable. It&#39;s also very useful for exchanging data between programs, and for representing and storing semi-structured data in a flexible fashion. </span></li><li class="c10 li-bullet-0"><span>In the </span><span class="c1">next video</span><span class="c4">&nbsp;we&#39;ll go live with a demonstration of JSON. We&#39;ll use a couple of JSON editors, we&#39;ll take a look at the structure of JSON data, when it&#39;s syntactically correct. We&#39;ll demonstrate how it&#39;s very flexible when our data might be irregular, and we&#39;ll also demonstrate schema checking using an example of JSON&#39;s schema.</span></li></ul><h1 class="c42" id="h.dkgtthnbdvk"><span class="c40 c36 c46">4.2 Demo</span></h1><h1 class="c42" id="h.tex8061baenp"><span class="c40 c36 c46">5.1 Relational Algebra 1</span></h1><ul class="c8 lst-kix_ng6ognesc1lx-0 start"><li class="c10 li-bullet-0"><span>So let&#39;s talk about, say, doing the </span><span class="c5 c1">cross products</span><span>&nbsp;of students and apply. So if we do this cross products, just to save drawing, I&#39;m just gonna </span><span class="c1">glue these two relations together</span><span>&nbsp;here. So if we do the cross product we&#39;ll get at the result a big relation, here, which is going to have eight attributes (4 + 4, dh </span><span class="c1">dieselben</span><span>&nbsp;4 Spalten einfach &ldquo;</span><span class="c1">aneinandergeschoben</span><span class="c4">&rdquo;) </span></li></ul><ul class="c8 lst-kix_ng6ognesc1lx-1 start"><li class="c6 li-bullet-0"><span>aber Ergebnis hat mehr Zeilen, s. </span><span class="c29 c37"><a class="c11" href="#id.isk5wwmds2ae">n&auml;chster Punkt</a></span></li></ul><a id="id.isk5wwmds2ae"></a><ul class="c8 lst-kix_ng6ognesc1lx-0"><li class="c10 li-bullet-0"><span>Now let&#39;s talk about the contents of these. So let&#39;s suppose that the student relation had </span><span class="c1">S</span><span>&nbsp;tuples (=Reihen) in it, while the apply had </span><span class="c1">A</span><span>&nbsp;tuples (=Reihen) in it, the </span><span class="c1">result</span><span>&nbsp;of the </span><span class="c5 c1">Cartesian products (= cross products)</span><span>&nbsp;is gonna have </span><span class="c1">S times A tuples </span><span class="c4">(=Reihen), is going to have one tuple (=Reihe) for every combination of tuples (=Reihen) from the student relation and the apply relation.</span></li><li class="c10 li-bullet-0"><span class="c4">Now, the cross-product seems like it might not be that helpful, but what is interesting is when we use the cross-product together with other operators:</span></li></ul><ul class="c8 lst-kix_ng6ognesc1lx-1 start"><li class="c6 li-bullet-0"><span class="c1">Example</span><span class="c4">: &ldquo;Let&#39;s suppose that we want to get the names and GPAs of students with a high school size greater than a thousand who applied to CS and were rejected.&rdquo;</span></li><li class="c6 li-bullet-0"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 470.50px; height: 213.35px;"><img alt="" src="images/image30.png" style="width: 470.50px; height: 213.35px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></li></ul><ul class="c8 lst-kix_ng6ognesc1lx-0"><li class="c10 li-bullet-0"><span>relational algebra includes an operator called the </span><span class="c5 c1">natural join</span><span>&nbsp;that is used to combine tuples s.t. we get meaningful combinations of tuples. What the natural join does is, it performs a </span><span class="c1">cross-product</span><span>, but then it </span><span class="c1">enforces equality on all of the attributes with the same name</span><span>. In addition it gets rid of these pesky attributes that have the same names (ie. it </span><span class="c1">removes the duplicate columns</span><span class="c4">). </span></li></ul><ul class="c8 lst-kix_ng6ognesc1lx-1 start"><li class="c6 li-bullet-0"><span>The natural join operator is written using a </span><span class="c1">bow tie</span><span class="c4">, that&#39;s just the convention. You will find that in your text editing programs if you look carefully.</span></li><li class="c6 li-bullet-0"><span class="c1">Example</span><span class="c4">: </span></li></ul><ul class="c8 lst-kix_ng6ognesc1lx-2 start"><li class="c16 li-bullet-0"><span class="c4">1. the example from above</span></li><li class="c16 li-bullet-0"><span class="c4">2. Now let&#39;s add one more complication to our query. Let&#39;s suppose that we&#39;re only interested in applications to colleges where the enrollment is greater than 20,000.</span></li></ul><ul class="c8 lst-kix_ng6ognesc1lx-3 start"><li class="c19 c18 li-bullet-0"><span>Now, technically, the natural join is a </span><span class="c5 c1">binary operator</span><span>, people often use it without parentheses because it&#39;s </span><span class="c5 c1">associative</span><span class="c4">, but if we get pedantic about it we could add that and then we&#39;re in good shape.</span></li></ul><ul class="c8 lst-kix_ng6ognesc1lx-1"><li class="c6 li-bullet-0"><span>The natural join actually </span><span class="c1">does not add any expressive power</span><span class="c4">&nbsp;to relational algebra, [...] but it is very convenient notationally. </span></li></ul><ul class="c8 lst-kix_ng6ognesc1lx-2 start"><li class="c16 li-bullet-0"><span>We can </span><span class="c1">rewrite the natural join</span><span class="c4">&nbsp;without [the natural join] using the cross-product: </span></li></ul><ul class="c8 lst-kix_ng6ognesc1lx-3 start"><li class="c19 c18 li-bullet-0"><span>first expression E1 union the schema of the second expression E2 (That&#39;s a </span><span class="c5 c1">real union</span><span class="c4">, so that means if we have two copies we just keep one of them.) Over the selection of - now we&#39;re going to set all the shared attributes of the first expression to be equal to the shared attributes of the second - I&#39;ll just write E1.A1 equals E2.A1 and E1.A2 equals E2.A2. Now these are the cases where, again, the attributes have the same names, and so on. So we&#39;re setting all those equal, and that is applied over E1 cross-product E2.</span></li></ul><p class="c18 c26"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 406.90px; height: 122.34px;"><img alt="" src="images/image34.png" style="width: 406.90px; height: 122.34px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><ul class="c8 lst-kix_ng6ognesc1lx-0"><li class="c10 li-bullet-0"><span class="c5 c1">theta join operator</span><span class="c4">: </span></li></ul><ul class="c8 lst-kix_ng6ognesc1lx-1 start"><li class="c6 li-bullet-0"><span>Like natural join, theta join is actually an abbreviation that </span><span class="c1">doesn&#39;t add expressive power</span><span class="c4">&nbsp;to the language. </span></li><li class="c6 li-bullet-0"><span>The theta join operator takes two expressions and combines them with the bow tie looking operator, but </span><span class="c1">with a subscript theta</span><span class="c4">.</span></li></ul><p class="c12"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 427.50px; height: 150.55px;"><img alt="" src="images/image33.png" style="width: 427.50px; height: 150.55px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><ul class="c8 lst-kix_ng6ognesc1lx-1"><li class="c6 li-bullet-0"><span>That </span><span class="c1">theta is a condition</span><span class="c4">. It&#39;s a condition in the style of the condition in the selection operator. </span></li><li class="c6 li-bullet-0"><span>It&#39;s </span><span class="c1">equivalent to</span><span class="c4">&nbsp;applying the theta condition to the cross-product of the two expressions. </span></li><li class="c6 li-bullet-0"><span>So you might wonder why I even mention the theta join operator, and the reason I mention it is that </span><span class="c1">most DBMS</span><span>&nbsp;implement the theta join as their </span><span class="c1">basic operation for combining relations</span><span class="c4">.</span></li><li class="c6 li-bullet-0"><span class="c4">So the basic operation is take two relations, combine all tuples, but then only keep the combinations that pass the theta condition. </span></li><li class="c6 li-bullet-0"><span>Often when you talk to people who build database systems or use databases, when they use </span><span class="c5 c1">the word join</span><span class="c4">, they really mean the theta join.</span></li></ul><ul class="c8 lst-kix_ng6ognesc1lx-0"><li class="c10 li-bullet-0"><span>So, in conclusion, </span><span class="c5 c1">relational algebra</span><span>&nbsp;is a </span><span class="c1">formal language</span><span class="c4">. It operates on sets of relations and produces relations as a result. </span></li></ul><ul class="c8 lst-kix_ng6ognesc1lx-1 start"><li class="c6 li-bullet-0"><span class="c4">The simplest query is just the name of a relation and then operators are used to filter relations, slice them, and combine them. </span></li><li class="c6 li-bullet-0"><span class="c4">So far, we&#39;ve learned: </span></li></ul><ul class="c8 lst-kix_ng6ognesc1lx-2 start"><li class="c16 li-bullet-0"><span class="c4">the select operator for selecting rows; </span></li><li class="c16 li-bullet-0"><span class="c4">the project operator for selecting columns; </span></li><li class="c16 li-bullet-0"><span class="c4">the cross-product operator for combining every possible pair of tuples from two relations; </span></li><li class="c16 li-bullet-0"><span>and then two </span><span class="c5 c1">abbreviations</span><span>, the </span><span class="c1">natural join</span><span>, which a very useful way to combine relations by enforcing a equality on certain columns; and the </span><span class="c1">theta join</span><span class="c4">&nbsp;operator.</span></li></ul><h1 class="c42" id="h.bfh0wcgva6xj"><span class="c40 c36 c46">5.2 Relational Algebra 2</span></h1><ul class="c8 lst-kix_yz56o84pgchk-0 start"><li class="c10 li-bullet-0"><span>bei natural join kommen in der result relation nur die Reihen vor, f&uuml;r die es in den beiden gejointen relations matches gab, </span><span class="c1">der Rest f&auml;llt weg</span><span>&nbsp;(vgl. </span><span class="c29 c37"><a class="c11" href="https://www.google.com/url?q=https://www.geeksforgeeks.org/extended-operators-in-relational-algebra/&amp;sa=D&amp;source=editors&amp;ust=1632356724114000&amp;usg=AOvVaw0FmUH0TBLoYJ3mu7SEWSf1">https://www.geeksforgeeks.org/extended-operators-in-relational-algebra/</a></span><span class="c4">&nbsp;unter natural join)</span></li></ul><ul class="c8 lst-kix_yz56o84pgchk-1 start"><li class="c6 li-bullet-0"><span class="c4">im Video beim Bsp. zum &ldquo;Difference operator&rdquo;: beim natural join fallen alle Reihen der &ldquo;Student&rdquo; relation weg, deren sID nicht auch in der Differenz vorkommt</span></li></ul><ul class="c8 lst-kix_yz56o84pgchk-0"><li class="c10 li-bullet-0"><span class="c4">This video will cover </span></li></ul><ul class="c8 lst-kix_yz56o84pgchk-1 start"><li class="c6 li-bullet-0"><span class="c4">set operators, </span></li></ul><ul class="c8 lst-kix_yz56o84pgchk-2 start"><li class="c16 li-bullet-0"><span class="c4">union </span></li><li class="c16 li-bullet-0"><span class="c4">difference</span></li><li class="c16 li-bullet-0"><span class="c4">intersection, </span></li></ul><ul class="c8 lst-kix_yz56o84pgchk-1"><li class="c6 li-bullet-0"><span class="c4">the renaming operator, and </span></li><li class="c6 li-bullet-0"><span class="c4">different notations for expressions of relational algebra. </span></li></ul><ul class="c8 lst-kix_yz56o84pgchk-0"><li class="c10 li-bullet-0"><span>Just as a reminder, we </span><span class="c1">apply</span><span>&nbsp;a relational algebra </span><span class="c1">query or expression</span><span>&nbsp;</span><span class="c13 c1">to a set of relations</span><span>&nbsp;and we get as a result of that expression </span><span class="c9 c1">a relation as our answer</span><span class="c4">. </span></li><li class="c10 li-bullet-0"><span>The first of three set operators is the </span><span class="c5 c1">union operator</span><span>, and </span><span class="c1">it&#39;s a standard set union</span><span class="c4">&nbsp;that you learned about in elementary school. </span></li></ul><ul class="c8 lst-kix_yz56o84pgchk-1 start"><li class="c6 li-bullet-0"><span>Let&#39;s suppose, for example, that we want &ldquo;</span><span class="c20">a list of the college and student names in our database</span><span class="c4">&rdquo;. So we just want those as a list. For example, we might want Stanford and Susan and Cornell and Mary and John and so on.</span></li></ul><ul class="c8 lst-kix_yz56o84pgchk-2 start"><li class="c16 li-bullet-0"><span>Now you might think we can generate this list by using one of the operators we&#39;ve already learned for combining information from multiple relations, such as the cross-product operator or the natural join operator. The problem with those operators is that they kind of combine information from multiple relations horizontally. They might take a tuple T1 from one relation and tuple T2 from the other and kind of match them. But that&#39;s not what we want to do here. We want to </span><span class="c1">combine the information vertically</span><span class="c4">&nbsp;to create our list. And to do that we&#39;re going to use the union operator. </span></li><li class="c16 li-bullet-0"><span>So in order to get a list of the college names and the student names, we&#39;ll project the college name from the college relation. That gives us a list of college names. We&#39;ll similarly project the student name from the student relation, and we&#39;ve got those two lists and we&#39;ll just apply the union operator between them and that will give us our result. Now, technically, in relational algebra </span><span class="c1">in order to union two lists they have to have the same schema</span><span>, that means </span><span>that</span><span>&nbsp;same</span><span class="c4">&nbsp;attribute name and these don&#39;t, but we&#39;ll correct that later (&rarr;rename operator). For now, you get the basic idea of the union operator. </span><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 228.50px; height: 98.54px;"><img alt="" src="images/image13.png" style="width: 228.50px; height: 98.54px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></li></ul><ul class="c8 lst-kix_yz56o84pgchk-0"><li class="c10 li-bullet-0"><span>Our next set operator is the </span><span class="c5 c1">difference operator</span><span class="c4">, and this one can be extremely useful. </span></li></ul><ul class="c8 lst-kix_yz56o84pgchk-1 start"><li class="c6 li-bullet-0"><span>As an </span><span class="c1">example</span><span>, let&#39;s suppose we want to find &ldquo;</span><span class="c20">the IDs of students who didn&#39;t apply to any colleges</span><span class="c4">&rdquo;. </span></li></ul><ul class="c8 lst-kix_yz56o84pgchk-2 start"><li class="c16 li-bullet-0"><span class="c4">We&#39;ll start by projecting the student ID from the student relation itself and that will give us all of these student IDs. Then lets project the student ID from the apply relation and that gives us the IDs of all students who have applied somewhere. All we need to do is take the difference operator, written with the minus sign, and that gives us the result of our query. It will take all IDs of the students and then subtract the ones who have applied somewhere. </span><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 262.50px; height: 48.72px;"><img alt="" src="images/image11.png" style="width: 262.50px; height: 48.72px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></li></ul><ul class="c8 lst-kix_yz56o84pgchk-1"><li class="c6 li-bullet-0"><span>Suppose instead that we wanted &ldquo;</span><span class="c20">the names of the students who didn&#39;t apply anywhere, not just their IDs</span><span class="c4">&rdquo;. </span></li></ul><ul class="c8 lst-kix_yz56o84pgchk-2 start"><li class="c16 li-bullet-0"><span class="c4">So that&#39;s a little bit more complicated. You might think, &quot;Oh, just add student name to the projection list here,&quot; but if we do that, then we&#39;re trying to subtract a set that has just IDs from a set that has the pair of ID names. And we can&#39;t have the student name here because the student name isn&#39;t part of the apply relation. </span></li><li class="c16 li-bullet-0"><span>So there is a nice trick, however, that&#39;s going to do what we want. What we&#39;re going to do is we&#39;re going to take this whole expression here which gives us the student IDs who didn&#39;t apply anywhere and we&#39;re gonna do a natural join with the student relation. And now, that&#39;s called a </span><span class="c5 c1">join back</span><span class="c4">. So we&#39;ve taken the IDs, a certain select set of IDs and we&#39;ve joined them back to the student relation. That&#39;s going to give us a schema that&#39;s the student relation itself, and then we&#39;re just going to add to that a projection of the student name. And that will give us our desired answer. </span><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 256.23px; height: 144.13px;"><img alt="" src="images/image16.png" style="width: 256.23px; height: 144.13px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></li></ul><ul class="c8 lst-kix_yz56o84pgchk-0"><li class="c10 li-bullet-0"><span>The last of the three set operators is the </span><span class="c5 c1">intersection operator</span><span class="c4">. </span></li></ul><ul class="c8 lst-kix_yz56o84pgchk-1 start"><li class="c6 li-bullet-0"><span>So let&#39;s suppose we want to &ldquo;</span><span class="c20">find names that are both a college name and a student name</span><span class="c4">&rdquo;. So perhaps, Washington is the name of a student and a college. </span><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 268.50px; height: 151.20px;"><img alt="" src="images/image31.png" style="width: 268.50px; height: 151.20px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></li></ul><ul class="c8 lst-kix_yz56o84pgchk-2 start"><li class="c16 li-bullet-0"><span>To find those, we&#39;re going to do something similar to what we&#39;ve done in the previous examples. Let&#39;s start by getting the college names. Then let&#39;s get the student names, and then what we&#39;re going to do is just perform an intersection of those two expressions and that will give us the result that we want. Now like our previous example, technically speaking, the </span><span class="c1">two expressions on the two sides of the intersection ought to have the same schema</span><span class="c4">&nbsp;and again, I&#39;ll show you just a little bit later, how we take care of that (&rarr;rename operator). </span></li></ul><ul class="c8 lst-kix_yz56o84pgchk-0"><li class="c10 li-bullet-0"><span>Now, it turns out that </span><span class="c1">intersection</span><span>&nbsp;actually </span><span class="c1">doesn&#39;t add any expressive power</span><span>&nbsp;to our language and I&#39;m going to show that actually in </span><span class="c1">two different ways</span><span class="c4">. </span></li></ul><ul class="c8 lst-kix_yz56o84pgchk-1 start"><li class="c6 li-bullet-0"><span>1. The first way is that if we have two expressions, let&#39;s say E1 and E2 and we perform their </span><span class="c1">intersection</span><span>, that is </span><span class="c1">exactly equivalent to writing E1 minus, using the difference operator, E1 minus E2</span><span class="c4">. </span></li></ul><ul class="c8 lst-kix_yz56o84pgchk-2 start"><li class="c16 li-bullet-0"><span>Now if you&#39;re not convinced of that immediately, let&#39;s go back to </span><span class="c13 c1">Venn diagrams</span><span class="c4">, again a concept you probably learned early in your schooling. So let&#39;s make a picture of two circles. And let&#39;s say that the first circle Circle represents the result of expression E1 and the second rear circle represents the result of expression E2. Now if we take the entire circle E1. Let&#39;s shade that in purple. And then we take the result, so that&#39;s E1 here, and then we take E1, the result of the expression E1 minus E2 here, we&#39;ll write that in green, so that&#39;s everything in E1 that&#39;s not in E2. And if we take the purple minus the green you will see that we actually do get the intersection here. </span><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 245.87px; height: 138.15px;"><img alt="" src="images/image6.png" style="width: 245.87px; height: 138.15px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></li><li class="c16 li-bullet-0"><span>So that&#39;s a simple </span><span class="c1">property of set operations</span><span>&nbsp;but what that&#39;s telling us is that this intersection operator here isn&#39;t giving us more expressive power because any expression that we can write in this fashion, </span><span class="c13 c1">we can equivalently write with the difference operator</span><span class="c4">&nbsp;in this fashion. </span></li></ul><ul class="c8 lst-kix_yz56o84pgchk-1"><li class="c6 li-bullet-0"><span>2. Let me show you a completely different way in which intersection doesn&#39;t add any expressive power. So, let&#39;s go back to E1 intersect E2 and as a reminder for this to be completely correct </span><span class="c1">these have to have the same schema as equal between the two</span><span>. E1 </span><span class="c13 c1">intersect</span><span>&nbsp;E2 turns out to be exactly the same as E1 </span><span class="c13 c1">natural join</span><span class="c4">&nbsp;E2 in this particular case because the schema is the same. (Remember what natural join does. Natural join says that you match up all columns that are equal and you eliminate duplicate values of columns.)</span><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 291.50px; height: 164.15px;"><img alt="" src="images/image15.png" style="width: 291.50px; height: 164.15px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></li></ul><ul class="c8 lst-kix_yz56o84pgchk-0"><li class="c10 li-bullet-0"><span class="c4">Nevertheless, the intersection can be very useful to use in queries.</span></li><li class="c10 li-bullet-0"><span>Our last operator is the </span><span class="c5 c1">rename operator</span><span class="c4">. The rename operator is necessary to express certain queries in relational algebra. </span></li><li class="c10 li-bullet-0"><span>Let me first show the form of the operator and then we&#39;ll see it in use. The rename operator uses the Greek symbol </span><span class="c5 c1">rho</span><span>. And like all of our other operators, it </span><span class="c1">applies to the result of any expression</span><span class="c4">&nbsp;of relational algebra. </span></li><li class="c10 li-bullet-0"><span>And what the rename operator does is </span><span class="c1">it reassigns the schema in the result of E</span><span class="c4">. </span></li></ul><ul class="c8 lst-kix_yz56o84pgchk-1 start"><li class="c6 li-bullet-0"><span class="c4">zu 1. So we compute E, we get a relation as a result, and it says that I&#39;m going to call the result of that, relation R with attributes A1 through An and then when this expression itself is embedded in a more complex expression, we can use this schema to describe the result of the E. Again we&#39;ll see shortly why that&#39;s useful. </span><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 306.50px; height: 172.60px;"><img alt="" src="images/image19.png" style="width: 306.50px; height: 172.60px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></li></ul><ul class="c8 lst-kix_yz56o84pgchk-0"><li class="c10 li-bullet-0"><span>There are a couple of the </span><span class="c1">abbreviations that are used in the rename operator</span><span class="c4">, this form is the general form here. </span></li></ul><ul class="c8 lst-kix_yz56o84pgchk-1 start"><li class="c6 li-bullet-0"><span>zu 2. One abbreviation is if we just want to use the same attribute names that came out of E, but </span><span class="c1">change the relation name</span><span class="c4">, we write row sub R applied to E, </span></li><li class="c6 li-bullet-0"><span>zu 3. and similarly, if we want to </span><span class="c1">change just the attribute names</span><span>&nbsp;then we </span><span>write attribute</span><span class="c4">&nbsp;list here and it would keep the same relation name. This form of course has to have a list of attributes or we would not be able to distinguish it from the previous form. </span></li><li class="c6 li-bullet-0"><span class="c4">But again these are just abbreviations and the general form is the one up here. </span></li></ul><ul class="c8 lst-kix_yz56o84pgchk-0"><li class="c10 li-bullet-0"><span class="c4">Okay, so now let&#39;s see the rename operator in use. </span></li><li class="c10 li-bullet-0"><span>The </span><span class="c13 c1">first use</span><span>&nbsp;of the rename operator is something I alluded to earlier in this video which is the fact that </span><span class="c1">when we do the set operators, the union, difference, and intersect operators, we do expect the schemas on the two the sides of the operator to match</span><span class="c4">, and in a couple of our examples they didn&#39;t match, and the rename operator will allow us to fix that. </span></li></ul><ul class="c8 lst-kix_yz56o84pgchk-1 start"><li class="c6 li-bullet-0"><span>So, for example, if we&#39;re doing the list of college and student names, and let me just remind you how we wrote that query. We took the C name from college and we took the s name from students and we did the big union of those. Now, </span><span class="c1">to make this technically correct</span><span class="c4">, these two attribute names would have to be the same. So we&#39;re just going to apply the rename operator. Let&#39;s say that we&#39;re gonna rename the result of this first expression to say the relation name C with attribute name. And let&#39;s make the result of the second expression similarly be the relation C with attribute name. And now we have two matching schemas and then we can properly perform the union operator. </span><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 331.50px; height: 186.68px;"><img alt="" src="images/image9.png" style="width: 331.50px; height: 186.68px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></li><li class="c6 li-bullet-0"><span>Again, this is </span><span class="c1">just a syntactic necessity to have well-formed relational algebra expressions</span><span class="c4">. </span></li></ul><ul class="c8 lst-kix_yz56o84pgchk-0"><li class="c10 li-bullet-0"><span>Now, the </span><span class="c13 c1">second use</span><span>&nbsp;of the rename operator is a little more complicated and quite a bit more important actually which is </span><span class="c5 c1">disambiguation in &ldquo;self-joins&rdquo;</span><span class="c4">&nbsp;and you probably have no idea what I&#39;m talking about when I say that, but let me give an example. </span></li></ul><ul class="c8 lst-kix_yz56o84pgchk-1 start"><li class="c6 li-bullet-0"><span>Let&#39;s suppose that we wanted to have a query that finds &ldquo;</span><span class="c20">pairs of colleges in the same state</span><span>&rdquo;. Now, think about that. So we want to have, for example, Stanford and Berkeley and Berkeley and UCLA and so on. So that, as you can see, unlike the union operator, we&#39;re looking for this </span><span class="c13 c1">horizontal joining</span><span>&nbsp;here. So we&#39;re going to have to combine essentially two instances of the college </span><span>relation</span><span class="c4">. And that&#39;s exactly what we&#39;re going to do. We&#39;re effectively going to do college join college making the state equal. </span></li><li class="c6 li-bullet-0"><span>So, let&#39;s work on that a little bit. So, what we wanna do is we wanna have college and we want to, let&#39;s just start with, say, the </span><span class="c13 c1">cross-product</span><span>&nbsp;of college. And then we want to somehow say, &quot;Well, the state equals the state.&quot; </span><span class="c1">But that&#39;s not gonna work</span><span class="c4">. Which state are these? And how do we describe the two instances of college? </span><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 271.50px; height: 96.85px;"><img alt="" src="images/image17.png" style="width: 271.50px; height: 96.85px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></li><li class="c6 li-bullet-0"><span>So what we&#39;re going to do and let me just erase this, is we&#39;re going to rename those two instances of colleges so they have different names. So we&#39;re going to take the first instance of college here and we&#39;re going to apply a rename operator to that. And we&#39;ll call it C1 and we&#39;ll say that it has name1, state1, and enrollment1. And then we&#39;ll take the second instance here. We&#39;ll call it C2, so N2, S2, E2 of college and now we have two different relations. So what we can do is we can take the cross-product of those two like that, and then we can select where S1 equals S2, okay? And that gives us &ldquo;</span><span class="c20">pairs of colleges in the same state</span><span>&rdquo;</span><span class="c4">. </span><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 270.48px; height: 126.25px;"><img alt="" src="images/image28.png" style="width: 270.48px; height: 126.25px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></li><li class="c6 li-bullet-0"><span>Actually, let me show you an even trickier, </span><span class="c1">simpler way of doing this</span><span>. Let&#39;s take away the selection operator here, okay? And let&#39;s take away this. And let&#39;s make this into a </span><span class="c13 c1">natural join</span><span class="c4">. Now that&#39;s not gonna work quite yet because the natural join requires attribute names to be the same, and we don&#39;t have any attribute names that are the same. So the last little trick we&#39;re gonna do is we&#39;re gonna make those two attribute names, S, be the same. And now when we do the natural join, it&#39;s gonna require equality on those two S&#39;s and everything is gonna be great. </span><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 260.76px; height: 109.70px;"><img alt="" src="images/image24.png" style="width: 260.76px; height: 109.70px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></li><li class="c6 li-bullet-0"><span>Now, things are still a little bit more complicated. One problem with this query is that we are going to get colleges paired with themselves. So we&#39;re going to get from this, for example, </span><span class="c20">Stanford Stanford</span><span>. If you think about it, right? </span><span class="c20">Berkeley Berkeley</span><span>, as well as </span><span class="c20">Stanford Berkeley</span><span class="c4">. Now, that&#39;s not really what we want presumably. Presumably we actually want different colleges. but that&#39;s pretty easy to handle, actually. </span><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 313.50px; height: 116.13px;"><img alt="" src="images/image27.png" style="width: 313.50px; height: 116.13px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></li></ul><ul class="c8 lst-kix_yz56o84pgchk-2 start"><li class="c16 li-bullet-0"><span>Let&#39;s put a </span><span class="c13 c1">selection condition</span><span>&nbsp;here so that the name one is &ldquo;</span><span class="c13 c1">not equal to</span><span class="c4">&rdquo; name two. Great. We took care of that. So in that case we will no longer get Stanford Stanford and Berkeley Berkeley. </span></li></ul><ul class="c8 lst-kix_yz56o84pgchk-1"><li class="c6 li-bullet-0"><span>Ah, but there&#39;s still one more problem. We&#39;ll get </span><span class="c20">Stanford Berkeley</span><span>&nbsp;but we&#39;ll also get </span><span class="c20">Berkeley Stanford</span><span class="c4">. </span></li></ul><ul class="c8 lst-kix_yz56o84pgchk-2 start"><li class="c16 li-bullet-0"><span>Actually, there&#39;s a surprisingly simple way, kind of clever. We&#39;re gonna take away this &ldquo;not </span><span>equals</span><span>&rdquo; and we&#39;re going to replace it with a &ldquo;</span><span class="c13 c1">less than</span><span>&rdquo;. And now we&#39;ll only get pairs where the first one is less than the second. So Stanford and Berkeley </span><span>goes</span><span class="c4">&nbsp;away and we get Berkeley Stanford. And this is our final query for what we wanted to do here. </span><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 304.50px; height: 171.47px;"><img alt="" src="images/image3.png" style="width: 304.50px; height: 171.47px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></li></ul><ul class="c8 lst-kix_yz56o84pgchk-0"><li class="c10 li-bullet-0"><span>Now what I really wanted to show, aside from some of the uses of relational algebra, is the fact that the </span><span class="c1">rename operator was absolutely necessary for this query. We could not have done this query without the rename operator</span><span class="c4">.</span></li><li class="c10 li-bullet-0"><span>Now we&#39;ve seen all the operators of relational algebra. Before we wrap up the video I did want to mention that there are some </span><span class="c1">other notations that can be used for relational algebra expressions</span><span class="c4">. </span></li></ul><ul class="c8 lst-kix_yz56o84pgchk-1 start"><li class="c6 li-bullet-0"><span>So far we&#39;ve just been writing our expressions in a </span><span class="c13 c1">standard form</span><span>&nbsp;with relation names and operators between those names and </span><span>applying to</span><span class="c4">&nbsp;those names. </span></li><li class="c6 li-bullet-0"><span>But sometimes people prefer to write using a more </span><span>linear notation of</span><span class="c13 c1">&nbsp;assignment statements</span><span class="c4">&nbsp;and </span></li><li class="c6 li-bullet-0"><span>sometimes people like to write the </span><span class="c13 c1">expressions as trees</span><span class="c4">. </span></li></ul><ul class="c8 lst-kix_yz56o84pgchk-0"><li class="c10 li-bullet-0"><span class="c4">So I&#39;m just gonna briefly show a couple of examples of those and then we&#39;ll wrap up.</span></li><li class="c10 li-bullet-0"><span>So </span><span class="c13 c1">assignment statements</span><span>&nbsp;are </span><span class="c1">a way to break down relational algebra expressions into their parts</span><span>. Let&#39;s do the same query we just finished as a big expression which is &ldquo;</span><span class="c20">the pairs of colleges that are in the same state</span><span>&rdquo;</span><span>. We&#39;ll start by writing two assignment statements that do the </span><span>rename</span><span>&nbsp;of the two instances of the college relation. So we&#39;ll start with C1 colon equals and we&#39;ll use a rename operator and now we use the abbreviated form that just lists attribute names. So we&#39;ll see say C1, S, E1 of college and we&#39;ll similarly say that C2 gets the rename, and we&#39;ll call it C2, S, E2 of college, and remember we use the same </span><span>S here</span><span>&nbsp;so that we can do the natural join. So, now we&#39;ll say that college pairs </span><span>gets C1 natural</span><span>&nbsp;join C2, and then finally we&#39;ll do our </span><span>selection condition</span><span class="c4">. So our final answer will be the selection where N1 is less than N2 of CP. </span><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 323.96px; height: 182.50px;"><img alt="" src="images/image32.png" style="width: 323.96px; height: 182.50px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></li></ul><ul class="c8 lst-kix_yz56o84pgchk-1 start"><li class="c6 li-bullet-0"><span>And again, this is equivalent to the expression that we saw on the earlier slide. It&#39;s </span><span class="c1">just a notation that sometimes people prefer to modularize their expressions</span><span class="c4">. </span></li></ul><ul class="c8 lst-kix_yz56o84pgchk-0"><li class="c10 li-bullet-0"><span>The second alternate notation I&#39;m going to show is </span><span class="c13 c1">expression trees</span><span class="c4">. And expression trees are actually commonly used in relational algebra. </span></li></ul><ul class="c8 lst-kix_yz56o84pgchk-1 start"><li class="c6 li-bullet-0"><span>They </span><span class="c1">allow you to visualize the structure of the expression a little bit better</span><span class="c4">. </span></li><li class="c6 li-bullet-0"><span>And as it turns out </span><span class="c1">when SQL is compiled in database systems, it&#39;s often compiled into an expression tree</span><span class="c4">&nbsp;that looks very much like what I&#39;m gonna show you right now. </span></li><li class="c6 li-bullet-0"><span>So for this example let&#39;s suppose that we want to &ldquo;</span><span class="c20">find the GPAs of students who are applying to CS in California</span><span>&rdquo;</span><span>. So that&#39;s going to involve all three relations because we&#39;re looking at the state is in California, and we&#39;re looking at the student GPA&#39;s and we&#39;re looking at them applying to CS. So what we&#39;re going to do is we&#39;re going to make a little tree notation here where we&#39;re going to first do the natural join of these three relations. So technically the expression I&#39;m going to show you is going to stop down here. It&#39;s not going to actually have the tables. So the </span><span class="c5 c1">leaves</span><span>&nbsp;of the expression are going to be the three relations: college, students, and apply. And in relational algebra trees, the </span><span class="c1">leaves are always relation names</span><span>. And we&#39;re going to do the natural join of those three which as a reminder enforces equality of the college name against the college name here against the college name here, and the student ID here and the student ID here. That enforcement means that we get triples that are talking about a student applying to a particular college. And then we&#39;re going to apply to that - and that&#39;s going to be written as a new </span><span class="c5 c1">node</span><span>&nbsp;above this one in the tree - the selection </span><span>condition that says</span><span class="c4">&nbsp;that the state equals California and the major equals CS. And finally, we&#39;ll put on top of that the projection that gets the GPA. okay? </span><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 347.50px; height: 195.69px;"><img alt="" src="images/image18.png" style="width: 347.50px; height: 195.69px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></li><li class="c6 li-bullet-0"><span>Now actually this expression is </span><span class="c1">exactly equivalent to if we wrote it linearly</span><span class="c4">, project the GPA, select etc. of the three college join student, join apply. I&#39;m just abbreviating here. That would be an equivalent expression. </span></li><li class="c6 li-bullet-0"><span class="c4">But again, people often like to use the tree notation because it does allow you to visualize the structure of the expression, and it is used inside implementations of the SQL language. </span></li></ul><ul class="c8 lst-kix_yz56o84pgchk-0"><li class="c10 li-bullet-0"><span>Let me finish up by </span><span class="c1">summarizing relational algebra</span><span class="c4">. </span></li><li class="c10 li-bullet-0"><span>Let&#39;s start with the </span><span class="c5 c1">core constructs</span><span class="c4">&nbsp;of the language. </span></li></ul><ul class="c8 lst-kix_yz56o84pgchk-1 start"><li class="c6 li-bullet-0"><span>So a </span><span class="c1">relation name</span><span class="c4">&nbsp;is a query in relational algebra, </span><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 324.50px; height: 182.73px;"><img alt="" src="images/image29.png" style="width: 324.50px; height: 182.73px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></li><li class="c6 li-bullet-0"><span>and then we use </span><span class="c1">operators</span><span class="c4">&nbsp;that combine relations and filter relations. </span></li></ul><ul class="c8 lst-kix_yz56o84pgchk-2 start"><li class="c16 li-bullet-0"><span>So we have the </span><span class="c1">select</span><span class="c4">&nbsp;operator that applies a condition to the result of an expression. </span></li><li class="c16 li-bullet-0"><span>We have the </span><span class="c1">project</span><span class="c4">&nbsp;operator that gives us a set of attributes that we take from the result of an expression. </span></li><li class="c16 li-bullet-0"><span>We have the expression one </span><span class="c1">cross-product</span><span class="c4">&nbsp;expression two. And again those can be any expressions. </span></li><li class="c16 li-bullet-0"><span>Then we have expression one </span><span class="c1">union</span><span class="c4">&nbsp;expression two. </span></li><li class="c16 li-bullet-0"><span>And we have expression one </span><span class="c1">minus</span><span class="c4">&nbsp;expression two. </span></li><li class="c16 li-bullet-0"><span>And finally we have the </span><span class="c1">rename</span><span class="c4">&nbsp;operator that takes an expression and renames the result of that, the schema in the result of that expression. </span></li></ul><ul class="c8 lst-kix_yz56o84pgchk-0"><li class="c10 li-bullet-0"><span>Now, you probably noticed that I skipped a few of our favorite operators, but this is the core of the language and all the other operators are actually </span><span class="c5 c1">abbreviations</span><span class="c4">&nbsp;that don&#39;t increase the expressive power of the language but they can be very useful performing queries. And the abbreviations that we learned were </span></li></ul><ul class="c8 lst-kix_yz56o84pgchk-1 start"><li class="c6 li-bullet-0"><span>expression one </span><span class="c1">natural join</span><span class="c4">&nbsp;expression two. </span></li><li class="c6 li-bullet-0"><span>They were expression one </span><span class="c1">theta join</span><span class="c4">&nbsp;expression two. </span></li><li class="c6 li-bullet-0"><span>And, finally, expression one </span><span class="c1">intersect</span><span class="c4">&nbsp;expression two. </span></li></ul><ul class="c8 lst-kix_yz56o84pgchk-0"><li class="c10 li-bullet-0"><span class="c4">All of those where we had a method of rewriting them using the core operators. </span></li><li class="c10 li-bullet-0"><span>Just a small aside about </span><span class="c5 c1">parentheses</span><span>. Parentheses are </span><span class="c13 c1">used</span><span>&nbsp;in relational expressions for, relational algebraic expressions, </span><span class="c13 c1">for disambiguation</span><span class="c4">, similarly to arithmetic expressions. I was a little cavalier about whether I included parentheses or not, but as you write your relational algebra expressions you will see that it&#39;s pretty straightforward to figure out when disambiguation is needed. </span></li><li class="c10 li-bullet-0"><span class="c4">So to conclude relational algebra entirely </span></li></ul><ul class="c8 lst-kix_yz56o84pgchk-1 start"><li class="c6 li-bullet-0"><span class="c4">It&#39;s a formal language. </span></li><li class="c6 li-bullet-0"><span class="c4">It&#39;s based on sets, set operators and other operators that combine data from multiple relations. </span></li><li class="c6 li-bullet-0"><span class="c4">It takes relations as input, it produces relations as answers and </span></li><li class="c6 li-bullet-0"><span class="c4">it does form the formal foundation of implemented relational database management systems.</span></li></ul><h1 class="c42" id="h.mwvscoml6lfk"><span class="c40 c36 c46">6.1 Introduction to SQL</span></h1><h2 class="c24" id="h.eyq35wrkj4b0"><span class="c40 c36 c41">Intro</span></h2><ul class="c8 lst-kix_e771vgvj1z3x-0 start"><li class="c10 li-bullet-0"><span>SQL, like the relational model, </span><span class="c1">has been around for decades</span><span>&nbsp;and supports a many </span><span class="c1">billion dollar market</span><span class="c4">. </span></li><li class="c10 li-bullet-0"><span>The first thing you might be wondering is how you </span><span class="c1">pronounce</span><span class="c4">&nbsp;it. Is it &quot;SQL,&quot; or is it &quot;sequel&quot;? My friends in industry tell me that &quot;sequel&quot; is the &ldquo;in&rdquo; pronunciation, so that&#39;s the one I&#39;ll be using. </span></li><li class="c10 li-bullet-0"><span>Now SQL is </span><span class="c1">supported by all major commercial database systems</span><span class="c4">. </span></li><li class="c10 li-bullet-0"><span>It has been around a long time and it is a </span><span class="c1">standardized language</span><span>. The standard started out relatively simple but over the decades it&#39;s really ballooned. There are currently </span><span class="c1">thousands of pages in the SQL standard</span><span>. But the essence of the language, which is what we&#39;ll be learning in these videos, is still relatively simple. We will be learning primarily the </span><span class="c5 c1">SQL2 standard</span><span>&nbsp;also known as </span><span class="c5 c1">SQL 92</span><span>&nbsp;along with some constructs from the </span><span class="c5 c1">SQL3 standard</span><span class="c4">. </span></li><li class="c10 li-bullet-0"><span>When SQL is used, it can be used in a database system </span><span class="c1">interactively</span><span class="c4">&nbsp;</span></li></ul><ul class="c8 lst-kix_e771vgvj1z3x-1 start"><li class="c6 li-bullet-0"><span>through a </span><span class="c1">graphical user interface</span><span class="c4">&nbsp;or </span></li><li class="c6 li-bullet-0"><span class="c1">a prompt</span><span class="c4">&nbsp;so you type SQL queries or commands and you get results back, or </span></li><li class="c6 li-bullet-0"><span>SQL can be </span><span class="c1">embedded in programs</span><span class="c4">. </span></li></ul><ul class="c8 lst-kix_e771vgvj1z3x-0"><li class="c10 li-bullet-0"><span>So, the </span><span class="c1">most common use</span><span>&nbsp;is to </span><span class="c1">embed SQL in programs,</span><span class="c4">&nbsp;but for the demos in our videos, naturally, we&#39;ll be submitting queries through a GUI interface. </span></li><li class="c10 li-bullet-0"><span>The last thing I wanted to mention about SQL is that it is a </span><span class="c5 c1">declarative language</span><span class="c4">. That means that in SQL, you&#39;ll write pretty simple queries that say exactly what you want out of the database, and the queries do not need to describe how to get the data out of the database. </span></li><li class="c10 li-bullet-0"><span>The language is also </span><span class="c1">based on relational algebra</span><span class="c4">, and I hope you&#39;ve watched the relational algebra videos. </span></li><li class="c10 li-bullet-0"><span>Now, the declarative nature of SQL leads to the component of the database system called the </span><span class="c5 c1">query optimizer</span><span class="c4">&nbsp;to be extremely important. What the query optimizer does is it takes a query written in a SQL language and it figures out the best way, the fastest way, to execute that on the database. </span></li><li class="c10 li-bullet-0"><span>Now let&#39;s talk briefly about some </span><span class="c1">terminology</span><span>&nbsp;and the </span><span class="c1">commands</span><span>&nbsp;that are in the SQL language. There&#39;s two parts of the language, the </span><span class="c5 c1">Data Definition Language</span><span>&nbsp;or </span><span class="c5 c1">DDL</span><span>, and the </span><span class="c5 c1">Data Manipulation</span><span>&nbsp;or </span><span class="c5 c1">DML</span><span>:</span><span class="c4">&nbsp;</span></li></ul><ul class="c8 lst-kix_e771vgvj1z3x-1 start"><li class="c6 li-bullet-0"><span>The </span><span class="c1">Data Definition Language</span><span>&nbsp;includes commands to create a table. We saw that in a previous video. It also includes commands to drop </span><span>table</span><span class="c4">&nbsp;and to create and drop other aspects of databases that we&#39;ll be learning about in later videos, such as indexes and views. </span></li><li class="c6 li-bullet-0"><span>The </span><span class="c1">Data Manipulation Language</span><span class="c4">&nbsp;is the language that&#39;s used to query and modify the database. So in the SQL language the Data Manipulation Language includes for querying the database, the select statement and then for modifying the database: an insert statement, a delete statement, and an update statement. </span></li><li class="c6 li-bullet-0"><span>There are many </span><span class="c1">other commands</span><span class="c4">&nbsp;in SQL for indexes, constraints, views, triggers, transactions, authorization, all of which we&#39;ll be learning about in later videos. </span></li></ul><ul class="c8 lst-kix_e771vgvj1z3x-0"><li class="c10 li-bullet-0"><span>For now, let&#39;s just take a look in a little more detail at the </span><span class="c5 c1">select statement</span><span>&nbsp;which is really the bread and butter of the SQL language and it&#39;s what we use to query the database. So the select statement </span><span class="c1">consists of three basic clauses</span><span class="c4">. </span></li></ul><ul class="c8 lst-kix_e771vgvj1z3x-1 start"><li class="c6 li-bullet-0"><span class="c4">There&#39;s the SELECT clause, </span></li><li class="c6 li-bullet-0"><span class="c4">the FROM clause and </span></li><li class="c6 li-bullet-0"><span class="c4">the WHERE clause. </span></li></ul><ul class="c8 lst-kix_e771vgvj1z3x-0"><li class="c10 li-bullet-0"><span>The </span><span class="c1">best order to think of these</span><span class="c4">&nbsp;actually, is first the FROM clause, then the WHERE and then the SELECT and just the basic idea is that the FROM identifies the relations that you want to query over, the condition is used to combine the relations and to filter the relations. And finally, the SELECT tells you what to return. </span></li><li class="c10 li-bullet-0"><span>Now, if you&#39;re familiar with relational algebra, this expression here, this SQL query, is </span><span class="c1">equivalent to the relational algebra expression</span><span>&nbsp;</span><span>that</span><span class="c4">&nbsp;you project the set of attributes A1 through AN. And then you select and, by the way, it&#39;s different from this select here. In fact, this selection corresponds to the WHERE. You select the condition on the cross-product of the relations that are listed in the from clause. So that&#39;s the equivalent in relational algebra. </span></li><li class="c10 li-bullet-0"><span>And the last thing I wanted to mention is that, as you know, the relational query languages are </span><span class="c5 c1">compositional</span><span>. That means when you run a query over relations, </span><span class="c1">you get a relation as a result</span><span class="c4">. So the result of this select statement is a relation. It doesn&#39;t have a name but the schema of that relation is the set of attributes that are returned. </span></li><li class="c10 li-bullet-0"><span>In </span><span class="c1">conclusion</span><span>, the SQL language is very prominent. It&#39;s supported by all major commercial database systems. It&#39;s been standardized over time. It can be used through programs. It can be used interactively and it&#39;s a declarative high-level language whose foundations are based </span><span>on the relational</span><span class="c4">&nbsp;algebra.</span></li></ul><h2 class="c24" id="h.nftvwt3deubz"><span class="c40 c36 c41">SELECT statement</span></h2><ul class="c8 lst-kix_e771vgvj1z3x-0"><li class="c10 li-bullet-0"><span>As a reminder, the </span><span class="c1">SELECT statement</span><span class="c4">&nbsp;selects a set of attributes from a set of relations satisfying a particular condition. We will see in the demo that even with these three clauses, we can write quite powerful queries. </span></li><li class="c10 li-bullet-0"><span>All of the seven demos are going to be using the simple </span><span class="c1">college admissions database</span><span>&nbsp;that we learned about in the relational algebra videos. As a reminder, we have </span><span class="c1">three relations</span><span>:</span><span class="c4">&nbsp;</span></li></ul><ul class="c8 lst-kix_e771vgvj1z3x-1 start"><li class="c6 li-bullet-0"><span>We have the </span><span class="c1">college relation</span><span class="c4">: college relation contains information about the name of the colleges, the state, and the enrollment of those colleges. </span></li><li class="c6 li-bullet-0"><span>We have the </span><span class="c1">student relation</span><span class="c4">, which contains student IDs, their names, their GPA, and the size of the high school that they come from. </span></li><li class="c6 li-bullet-0"><span>And finally, the </span><span class="c1">application information</span><span class="c4">, that tells us that a particular student applied to a particular college for a particular major and there was a decision of that application </span></li></ul><ul class="c8 lst-kix_e771vgvj1z3x-0"><li class="c10 li-bullet-0"><span>Now as a reminder, in the relational model, when we </span><span class="c5 c1">underline attributes</span><span>, that means we&#39;re </span><span class="c1">designating a key for the relation</span><span class="c4">. </span></li></ul><ul class="c8 lst-kix_e771vgvj1z3x-1 start"><li class="c6 li-bullet-0"><span>So, the underlined attributes in our example say that the college name is going to be </span><span class="c1">unique within the college relation</span><span>. The student&#39;s idea is unique within the student relation and in the apply relation, the combination of these three attributes is unique. That means </span><span>that student</span><span class="c4">&nbsp;can, if he or she wishes, apply to a college many times, or apply for a major many times, but can only apply to a college for a particular major once. </span></li></ul><ul class="c8 lst-kix_e771vgvj1z3x-0"><li class="c10 li-bullet-0"><span class="c4">Let&#39;s turn to the demo. WATCH !</span></li></ul><a id="t.568a8e87b6c05283e1d4972aa117331b18489ea3"></a><a id="t.0"></a><table class="c32"><tbody><tr class="c33"><td class="c31" colspan="1" rowspan="1"><p class="c18"><span class="c3">/**************************************************************<br> &nbsp;BASIC SELECT STATEMENTS<br> &nbsp;Works for SQLite, MySQL, Postgres<br>**************************************************************/</span><span class="c0"><br><br></span><span class="c3">/**************************************************************<br> &nbsp;IDs, names, and GPAs of students with GPA &gt; 3.6<br>**************************************************************/</span><span class="c0"><br><br></span><span class="c2">select</span><span class="c0">&nbsp;</span><span class="c2">sID</span><span class="c0">, sName, GPA<br></span><span class="c2">from</span><span class="c0">&nbsp;Student<br></span><span class="c2">where</span><span class="c0">&nbsp;GPA &gt; 3.6;<br><br></span><span class="c3">/*** Same query </span><span class="c27 c13">without GPA</span><span class="c3">&nbsp;***/</span><span class="c0"><br><br></span><span class="c2">select</span><span class="c0">&nbsp;</span><span class="c2">sID</span><span class="c0">, </span><span class="c0">sName</span><span class="c25"><br></span><span class="c2">from</span><span class="c0">&nbsp;Student<br></span><span class="c2">where</span><span class="c0">&nbsp;GPA &gt; 3.6;<br><br></span><span class="c3">/**************************************************************<br> &nbsp;Student names and majors for which they&#39;ve applied<br>**************************************************************/</span><span class="c0"><br><br></span><span class="c2">select</span><span class="c0">&nbsp;</span><span class="c0">sName</span><span class="c0">, major<br></span><span class="c2">from</span><span class="c0">&nbsp;Student, </span><span class="c2">Apply</span><span class="c0"><br></span><span class="c2">where</span><span class="c0">&nbsp;</span><span class="c25 c13">Student.sID = Apply.sID</span><span class="c0">;<br><br></span><span class="c3">/*** Same query with Distinct, note difference from algebra ***/</span><span class="c0"><br><br></span><span class="c2">select</span><span class="c0">&nbsp;</span><span class="c21 c13">distinct</span><span class="c0">&nbsp;sName, major<br></span><span class="c2">from</span><span class="c0">&nbsp;Student, </span><span class="c2">Apply</span><span class="c0"><br></span><span class="c2">where</span><span class="c0">&nbsp;Student.sID = Apply.sID;<br><br></span><span class="c3">/**************************************************************<br> &nbsp;Names and GPAs of students with sizeHS &lt; 1000 applying to<br> &nbsp;CS at Stanford, and the application decision<br>**************************************************************/</span><span class="c0"><br><br></span><span class="c2">select</span><span class="c0">&nbsp;sname, GPA, decision<br></span><span class="c2">from</span><span class="c0">&nbsp;Student, </span><span class="c2">Apply</span><span class="c0"><br></span><span class="c2">where</span><span class="c0">&nbsp;Student.sID = Apply.sID<br> &nbsp;</span><span class="c2">and</span><span class="c0">&nbsp;sizeHS &lt; 1000 </span><span class="c2">and</span><span class="c0">&nbsp;major = </span><span class="c22">&#39;CS&#39;</span><span class="c0">&nbsp;</span><span class="c2">and</span><span class="c0">&nbsp;cname = </span><span class="c22">&#39;Stanford&#39;</span><span class="c0">;<br><br></span><span class="c3">/**************************************************************<br> &nbsp;All large campuses with CS applicants<br>**************************************************************/</span><span class="c0"><br><br></span><span class="c2">select</span><span class="c0">&nbsp;cName<br></span><span class="c2">from</span><span class="c0">&nbsp;College, </span><span class="c2">Apply</span><span class="c0"><br></span><span class="c2">where</span><span class="c0">&nbsp;College.cName = Apply.cName<br> &nbsp;</span><span class="c2">and</span><span class="c0">&nbsp;enrollment &gt; 20000 </span><span class="c2">and</span><span class="c0">&nbsp;major = </span><span class="c22">&#39;CS&#39;</span><span class="c0">;<br><br></span><span class="c3">/*** Fix error ***/</span><span class="c0"><br><br></span><span class="c2">select</span><span class="c0">&nbsp;</span><span class="c25 c13">College.</span><span class="c0">cName<br></span><span class="c2">from</span><span class="c0">&nbsp;College, </span><span class="c2">Apply</span><span class="c0"><br></span><span class="c2">where</span><span class="c0">&nbsp;College.cName = Apply.cName<br> &nbsp;</span><span class="c2">and</span><span class="c0">&nbsp;enrollment &gt; 20000 </span><span class="c2">and</span><span class="c0">&nbsp;major = </span><span class="c22">&#39;CS&#39;</span><span class="c0">;<br><br></span><span class="c3">/*** Add Distinct ***/</span><span class="c0"><br><br></span><span class="c2">select</span><span class="c0">&nbsp;</span><span class="c21 c13">distinct</span><span class="c0">&nbsp;College.cName<br></span><span class="c2">from</span><span class="c0">&nbsp;College, </span><span class="c2">Apply</span><span class="c0"><br></span><span class="c2">where</span><span class="c0">&nbsp;College.cName = Apply.cName<br> &nbsp;</span><span class="c2">and</span><span class="c0">&nbsp;enrollment &gt; 20000 </span><span class="c2">and</span><span class="c0">&nbsp;major = </span><span class="c22">&#39;CS&#39;</span><span class="c0">;<br><br></span><span class="c3">/**************************************************************<br> &nbsp;Application information<br>**************************************************************/</span><span class="c0"><br><br></span><span class="c2">select</span><span class="c0">&nbsp;Student.sID, sName, GPA, Apply.cName, enrollment<br></span><span class="c2">from</span><span class="c0">&nbsp;Student, College, </span><span class="c2">Apply</span><span class="c0"><br></span><span class="c2">where</span><span class="c0">&nbsp;</span><span class="c25 c13">Apply.sID = Student.sID </span><span class="c21 c13">and</span><span class="c25 c13">&nbsp;Apply.cName = College.cName</span><span class="c0">;<br><br></span><span class="c3">/*** Sort by decreasing GPA ***/</span><span class="c0"><br><br></span><span class="c2">select</span><span class="c0">&nbsp;Student.sID, sName, GPA, Apply.cName, enrollment<br></span><span class="c2">from</span><span class="c0">&nbsp;Student, College, </span><span class="c2">Apply</span><span class="c0"><br></span><span class="c2">where</span><span class="c0">&nbsp;Apply.sID = Student.sID </span><span class="c2">and</span><span class="c0">&nbsp;Apply.cName = College.cName<br></span><span class="c21 c13">order</span><span class="c25 c13">&nbsp;</span><span class="c21 c13">by</span><span class="c25 c13">&nbsp;GPA </span><span class="c21 c13">desc</span><span class="c0">;<br><br></span><span class="c3 c28">/*** Then by increasing enrollment </span></p><p class="c18"><span class="c3">(</span><span class="c27 c13">primary sort order</span><span class="c3">: GPA desc + </span><span class="c27 c13">secondary sort order</span><span class="c3 c28">&nbsp;[within each tie in primary sort order]: enroll asc) </span></p><p class="c18"><span class="c3">(</span><span class="c27 c13">asc is default</span><span class="c3">&nbsp;in order by clause) ***/</span><span class="c0"><br><br></span><span class="c2">select</span><span class="c0">&nbsp;Student.sID, sName, GPA, Apply.cName, enrollment<br></span><span class="c2">from</span><span class="c0">&nbsp;Student, College, </span><span class="c2">Apply</span><span class="c0"><br></span><span class="c2">where</span><span class="c0">&nbsp;Apply.sID = Student.sID </span><span class="c2">and</span><span class="c0">&nbsp;Apply.cName = College.cName<br></span><span class="c2">order</span><span class="c0">&nbsp;</span><span class="c2">by</span><span class="c0">&nbsp;GPA </span><span class="c2">desc</span><span class="c25 c13">, enrollment</span><span class="c0">;<br><br></span><span class="c3">/**************************************************************<br> &nbsp;Applicants to bio majors<br>**************************************************************/</span><span class="c0"><br><br></span><span class="c2">select</span><span class="c0">&nbsp;</span><span class="c2">sID</span><span class="c0">, major<br></span><span class="c2">from</span><span class="c0">&nbsp;</span><span class="c2">Apply</span><span class="c0"><br></span><span class="c2">where</span><span class="c0">&nbsp;</span><span class="c25 c13">major </span><span class="c21 c13">like</span><span class="c25 c13">&nbsp;</span><span class="c50 c13">&#39;%bio%&#39;</span><span class="c0">;<br><br></span><span class="c3">/*** Same query with Select * ***/</span><span class="c0"><br><br></span><span class="c21 c13">select</span><span class="c25 c13">&nbsp;*</span><span class="c0"><br></span><span class="c2">from</span><span class="c0">&nbsp;</span><span class="c2">Apply</span><span class="c0"><br></span><span class="c2">where</span><span class="c0">&nbsp;major </span><span class="c2">like</span><span class="c0">&nbsp;</span><span class="c22">&#39;%bio%&#39;</span><span class="c0">;<br><br></span><span class="c3">/**************************************************************<br> &nbsp;Select * cross-product<br>**************************************************************/</span><span class="c0"><br><br></span><span class="c2">select</span><span class="c0">&nbsp;*<br></span><span class="c2">from</span><span class="c0">&nbsp;Student, College;<br><br></span><span class="c3">/**************************************************************<br> &nbsp;Add </span><span class="c13 c27">scaled GPA based on sizeHS</span><span class="c3"><br> &nbsp;Also note missing Where clause<br>**************************************************************/</span><span class="c0"><br><br></span><span class="c2">select</span><span class="c0">&nbsp;</span><span class="c2">sID</span><span class="c0">, sName, GPA, sizeHS, </span><span class="c25 c13">GPA*(sizeHS/1000.0)</span><span class="c0"><br></span><span class="c2">from</span><span class="c0">&nbsp;Student;<br><br></span><span class="c3">/*** </span><span class="c27 c13">Rename result attribute</span><span class="c3">&nbsp;***/</span><span class="c0"><br><br></span><span class="c2">select</span><span class="c0">&nbsp;</span><span class="c2">sID</span><span class="c0">, sName, GPA, sizeHS, GPA*(sizeHS/1000.0) </span><span class="c21 c13">as</span><span class="c25 c13">&nbsp;scaledGPA</span><span class="c0"><br></span><span class="c2">from</span><span class="c0">&nbsp;Student;</span></p></td></tr></tbody></table><h2 class="c49" id="h.bumebixbz9ll"><span class="c40 c36 c41">Table variables and Set operators</span></h2><ul class="c8 lst-kix_s21zi9nvc79q-0 start"><li class="c18 c62 li-bullet-0"><span>In this demo, we&#39;ll be learning some more features of the SQL language. Specifically, we&#39;ll be learning about </span><span class="c5 c1">table variables</span><span>&nbsp;and about </span><span class="c5 c1">set operators</span><span class="c4">. </span></li><li class="c18 c62 li-bullet-0"><span>The first construct is </span><span class="c5 c1">table variables</span><span>. Table variables are in the FROM clause, and they actually serve </span><span class="c1">two uses</span><span>:</span><span class="c4">&nbsp;</span></li></ul><ul class="c8 lst-kix_s21zi9nvc79q-1 start"><li class="c18 c57 li-bullet-0"><span>One is simply to </span><span class="c1">make queries more readable</span><span class="c4">, as we&#39;ll see. </span></li><li class="c18 c57 li-bullet-0"><span>But a second purpose is </span><span class="c1">to rename relations that are used in the FROM clause, particularly when we have two instances of the same relation</span><span>. This is exactly what we needed </span><span>in the relational</span><span class="c4">&nbsp;algebra when we wrote joins that included two instances of the same relation. </span></li></ul><ul class="c8 lst-kix_s21zi9nvc79q-0"><li class="c18 c62 li-bullet-0"><span>The second construct we&#39;ll be learning, actually a set of constructs, in this video, are the </span><span class="c5 c1">set operators</span><span class="c4">. And we&#39;ll be learning the same three set operators we had in relational algebra: </span></li></ul><ul class="c8 lst-kix_s21zi9nvc79q-1 start"><li class="c18 c57 li-bullet-0"><span>the </span><span class="c1">union</span><span class="c4">&nbsp;operator, </span></li><li class="c18 c57 li-bullet-0"><span>the </span><span class="c1">intersect</span><span class="c4">&nbsp;operator, and </span></li><li class="c18 c57 li-bullet-0"><span>the </span><span class="c1">except</span><span>&nbsp;operator which is the </span><span class="c1">minus</span><span class="c4">&nbsp;operator. </span></li></ul><ul class="c8 lst-kix_s21zi9nvc79q-0"><li class="c18 c62 li-bullet-0"><span class="c4">Let&#39;s move to the demo. </span></li></ul><p class="c18 c56"><span class="c4"></span></p><a id="t.6a37d169b4f1ef7d0d39d1fe7ea98689ba99ae5a"></a><a id="t.1"></a><table class="c32"><tbody><tr class="c33"><td class="c31" colspan="1" rowspan="1"><p class="c18"><span class="c3">/**************************************************************<br> &nbsp;TABLE VARIABLES AND SET OPERATORS<br> &nbsp;Works for SQLite, Postgres<br> &nbsp;MySQL doesn&#39;t support Intersect or Except<br>**************************************************************/</span><span class="c0"><br><br></span><span class="c3">/**************************************************************<br> &nbsp;Application information<br>**************************************************************/</span><span class="c0"><br><br></span><span class="c2">select</span><span class="c0">&nbsp;Student.sID, sName, GPA, Apply.cName, enrollment<br></span><span class="c2">from</span><span class="c0">&nbsp;Student, College, </span><span class="c2">Apply</span><span class="c0"><br></span><span class="c2">where</span><span class="c0">&nbsp;Apply.sID = Student.sID </span><span class="c2">and</span><span class="c0">&nbsp;Apply.cName = College.cName;<br><br></span><span class="c3">/*** Introduce table variables ***/</span><span class="c0"><br><br></span><span class="c2">select</span><span class="c0">&nbsp;S.sID, S.sName, S.GPA, A.cName, C.enrollment<br></span><span class="c2">from</span><span class="c0">&nbsp;Student </span><span class="c25 c13">S</span><span class="c0">, College </span><span class="c25 c13">C</span><span class="c0">, </span><span class="c2">Apply</span><span class="c0">&nbsp;</span><span class="c25 c13">A</span><span class="c0"><br></span><span class="c2">where</span><span class="c0">&nbsp;</span><span class="c25 c13">A.sID</span><span class="c0">&nbsp;= </span><span class="c25 c13">S.sID</span><span class="c0">&nbsp;</span><span class="c2">and</span><span class="c0">&nbsp;</span><span class="c25 c13">A.cName</span><span class="c0">&nbsp;= </span><span class="c25 c13">C.cName</span><span class="c0">;<br><br></span><span class="c3">/**************************************************************<br> &nbsp;Pairs of students with same GPA<br>**************************************************************/</span><span class="c0"><br><br></span><span class="c2">select</span><span class="c0">&nbsp;S1.sID, S1.sName, S1.GPA, S2.sID, S2.sName, S2.GPA<br></span><span class="c2">from</span><span class="c0">&nbsp;Student S1, Student S2<br></span><span class="c2">where</span><span class="c0">&nbsp;S1.GPA = S2.GPA;<br><br></span><span class="c3">/*** Get rid of self-pairings ***/</span><span class="c0"><br><br></span><span class="c2">select</span><span class="c0">&nbsp;S1.sID, S1.sName, S1.GPA, S2.sID, S2.sName, S2.GPA<br></span><span class="c2">from</span><span class="c0">&nbsp;Student S1, Student S2<br></span><span class="c2">where</span><span class="c0">&nbsp;S1.GPA = S2.GPA </span><span class="c21 c13">and</span><span class="c25 c13">&nbsp;S1.sID &lt;&gt; S2.sID</span><span class="c0">;<br><br></span><span class="c3">/*** Get rid of reverse-pairings ***/</span><span class="c0"><br><br></span><span class="c2">select</span><span class="c0">&nbsp;S1.sID, S1.sName, S1.GPA, S2.sID, S2.sName, S2.GPA<br></span><span class="c2">from</span><span class="c0">&nbsp;Student S1, Student S2<br></span><span class="c2">where</span><span class="c0">&nbsp;S1.GPA = S2.GPA </span><span class="c2">and</span><span class="c0">&nbsp;S1.sID </span><span class="c25 c13">&lt;</span><span class="c0">&nbsp;S2.sID;<br><br></span><span class="c3">/**************************************************************<br> &nbsp;List of college names and student names<br>**************************************************************/</span><span class="c0"><br><br></span><span class="c2">select</span><span class="c0">&nbsp;cName </span><span class="c2">from</span><span class="c0">&nbsp;College<br></span><span class="c21 c13">union</span><span class="c0"><br></span><span class="c2">select</span><span class="c0">&nbsp;sName </span><span class="c2">from</span><span class="c0">&nbsp;Student;<br><br></span><span class="c3">/*** Add &#39;As name&#39; to both sides [weil sonst nur cName als </span><span class="c3">Spaltenlabel</span><span class="c3">] ***/</span><span class="c0"><br><br></span><span class="c2">select</span><span class="c0">&nbsp;cName </span><span class="c21 c13">as</span><span class="c25 c13">&nbsp;</span><span class="c21 c13">name</span><span class="c0">&nbsp;</span><span class="c2">from</span><span class="c0">&nbsp;College<br></span><span class="c2">union &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c25">-- set operator</span><span class="c0"><br></span><span class="c2">select</span><span class="c0">&nbsp;sName </span><span class="c21 c13">as name</span><span class="c0">&nbsp;</span><span class="c2">from</span><span class="c0 c28">&nbsp;Student;<br></span></p><p class="c18"><span class="c3 c28">/*** phth: </span></p><ol class="c8 lst-kix_6ffqlpfm8a8u-0 start" start="1"><li class="c18 c62 li-bullet-0"><span class="c3">in SQLite results are sorted (</span><span class="c21 c13">depends on DBMS</span><span class="c3 c28">) </span></li></ol><p class="c18"><span class="c3">&nbsp; &nbsp;2. in SQLite union by default eliminates duplicates in its result; in general, elimination of duplicates </span><span class="c21 c13">depends on DBMS</span><span class="c3">; if duplicates shall not be eliminated use &ldquo;union all&rdquo; ***/<br>/*** Change to Union All ***/</span><span class="c0"><br><br></span><span class="c2">select</span><span class="c0">&nbsp;cName </span><span class="c2">as</span><span class="c0">&nbsp;</span><span class="c2">name</span><span class="c0">&nbsp;</span><span class="c2">from</span><span class="c0">&nbsp;College<br></span><span class="c21 c13">union</span><span class="c25 c13">&nbsp;all</span><span class="c25">&nbsp; &nbsp; &nbsp; &nbsp;-- multiset operator</span><span class="c0"><br></span><span class="c2">select</span><span class="c0">&nbsp;sName </span><span class="c2">as</span><span class="c0">&nbsp;</span><span class="c2">name</span><span class="c0">&nbsp;</span><span class="c2">from</span><span class="c0">&nbsp;Student;<br><br></span><span class="c3">/*** Notice </span><span class="c27 c13">not sorted any more</span><span class="c3">&nbsp;(SQLite), add order by name ***/</span><span class="c0"><br><br></span><span class="c2">select</span><span class="c0">&nbsp;cName </span><span class="c2">as</span><span class="c0">&nbsp;</span><span class="c2">name</span><span class="c0">&nbsp;</span><span class="c2">from</span><span class="c0">&nbsp;College<br></span><span class="c2">union</span><span class="c0">&nbsp;all<br></span><span class="c2">select</span><span class="c0">&nbsp;sName </span><span class="c2">as</span><span class="c0">&nbsp;</span><span class="c2">name</span><span class="c0">&nbsp;</span><span class="c2">from</span><span class="c0">&nbsp;Student<br></span><span class="c25 c13">order by name</span><span class="c0">;<br><br></span><span class="c3">/**************************************************************<br> &nbsp;IDs of students who applied to both CS and EE<br>**************************************************************/</span><span class="c0"><br><br></span><span class="c2">select</span><span class="c0">&nbsp;</span><span class="c2">sID</span><span class="c0">&nbsp;</span><span class="c2">from</span><span class="c0">&nbsp;</span><span class="c2">Apply</span><span class="c0">&nbsp;</span><span class="c2">where</span><span class="c0">&nbsp;major = </span><span class="c22">&#39;CS&#39;</span><span class="c0"><br></span><span class="c21 c13">intersect</span><span class="c0"><br></span><span class="c2">select</span><span class="c0">&nbsp;</span><span class="c2">sID</span><span class="c0">&nbsp;</span><span class="c2">from</span><span class="c0">&nbsp;</span><span class="c2">Apply</span><span class="c0">&nbsp;</span><span class="c2">where</span><span class="c0">&nbsp;major = </span><span class="c22">&#39;EE&#39;</span><span class="c0">;<br><br></span><span class="c3">/**************************************************************<br> &nbsp;IDs of students who applied to both CS and EE<br> &nbsp;</span><span class="c27 c13">Some systems don&#39;t support intersect</span><span class="c3"><br>**************************************************************/</span><span class="c0"><br><br></span><span class="c2">select</span><span class="c0">&nbsp;A1.sID<br></span><span class="c2">from</span><span class="c0">&nbsp;</span><span class="c2">Apply</span><span class="c0">&nbsp;A1, </span><span class="c2">Apply</span><span class="c0">&nbsp;A2<br></span><span class="c21 c13">where</span><span class="c25 c13">&nbsp;A1.sID = A2.sID </span><span class="c21 c13">and</span><span class="c25 c13">&nbsp;A1.major = </span><span class="c50 c13">&#39;CS&#39;</span><span class="c25 c13">&nbsp;</span><span class="c21 c13">and</span><span class="c25 c13">&nbsp;A2.major = </span><span class="c50 c13">&#39;EE&#39;</span><span class="c0">;<br><br></span><span class="c3">/*** Why so many duplicates? Look at Apply table [student 123 hat sich bei stanford f&uuml;r CS und EE, bei berkeley f&uuml;r CS und bei cornell f&uuml;r EE beworben, dh. die obige query gibt sID 123 </span><span class="c3">vier mal</span><span class="c3">&nbsp;zur&uuml;ck ***/</span><span class="c0"><br></span><span class="c3">/*** Add Distinct ***/</span><span class="c0"><br><br></span><span class="c2">select</span><span class="c0">&nbsp;</span><span class="c21 c13">distinct</span><span class="c0">&nbsp;A1.sID<br></span><span class="c2">from</span><span class="c0">&nbsp;</span><span class="c2">Apply</span><span class="c0">&nbsp;A1, </span><span class="c2">Apply</span><span class="c0">&nbsp;A2<br></span><span class="c2">where</span><span class="c0">&nbsp;A1.sID = A2.sID </span><span class="c2">and</span><span class="c0">&nbsp;A1.major = </span><span class="c22">&#39;CS&#39;</span><span class="c0">&nbsp;</span><span class="c2">and</span><span class="c0">&nbsp;A2.major = </span><span class="c22">&#39;EE&#39;</span><span class="c0">;<br><br></span><span class="c3">/**************************************************************<br> &nbsp;IDs of students who applied to CS but not EE<br>**************************************************************/</span><span class="c0"><br><br></span><span class="c2">select</span><span class="c0">&nbsp;</span><span class="c2">sID</span><span class="c0">&nbsp;</span><span class="c2">from</span><span class="c0">&nbsp;</span><span class="c2">Apply</span><span class="c0">&nbsp;</span><span class="c2">where</span><span class="c0">&nbsp;major = </span><span class="c22">&#39;CS&#39;</span><span class="c0"><br></span><span class="c21 c13">except</span><span class="c0"><br></span><span class="c2">select</span><span class="c0">&nbsp;</span><span class="c2">sID</span><span class="c0">&nbsp;</span><span class="c2">from</span><span class="c0">&nbsp;</span><span class="c2">Apply</span><span class="c0">&nbsp;</span><span class="c2">where</span><span class="c0">&nbsp;major = </span><span class="c22">&#39;EE&#39;</span><span class="c0 c28">;<br></span></p><p class="c18"><span class="c0 c28">=&gt; gibt 3 results<br></span></p><p class="c18"><span class="c3">/**************************************************************<br> &nbsp;IDs of students who applied to CS but not EE<br> &nbsp;</span><span class="c27 c13">Some systems don&#39;t support except</span><span class="c3"><br>**************************************************************/</span><span class="c0"><br><br></span><span class="c2">select</span><span class="c0">&nbsp;A1.sID<br></span><span class="c2">from</span><span class="c0">&nbsp;</span><span class="c2">Apply</span><span class="c0">&nbsp;A1, </span><span class="c2">Apply</span><span class="c0">&nbsp;A2<br></span><span class="c2">where</span><span class="c0">&nbsp;A1.sID = A2.sID </span><span class="c2">and</span><span class="c0">&nbsp;A1.major = </span><span class="c22">&#39;CS&#39;</span><span class="c0">&nbsp;</span><span class="c2">and</span><span class="c0">&nbsp;A2.major &lt;&gt; </span><span class="c22">&#39;EE&#39;</span><span class="c0 c28">;<br></span></p><p class="c18"><span class="c0 c28">=&gt; gibt viel mehr als 3 results</span></p><p class="c18"><span class="c0"><br></span><span class="c3">/*** Add Distinct ***/</span><span class="c0"><br><br></span><span class="c2">select</span><span class="c0">&nbsp;</span><span class="c21 c13">distinct</span><span class="c0">&nbsp;A1.sID<br></span><span class="c2">from</span><span class="c0">&nbsp;</span><span class="c2">Apply</span><span class="c0">&nbsp;A1, </span><span class="c2">Apply</span><span class="c0">&nbsp;A2<br></span><span class="c2">where</span><span class="c0">&nbsp;A1.sID = A2.sID </span><span class="c2">and</span><span class="c0">&nbsp;A1.major = </span><span class="c22">&#39;CS&#39;</span><span class="c0">&nbsp;</span><span class="c2">and</span><span class="c0">&nbsp;A2.major &lt;&gt; </span><span class="c22">&#39;EE&#39;</span><span class="c0 c28">;<br></span></p><p class="c18"><span class="c0 c28">=&gt; gibt 5 results</span></p><p class="c18"><span class="c0"><br></span><span class="c3">/*** </span><span class="c27 c13">Can&#39;t do it with constructs we have so far</span><span class="c3">&nbsp;***/</span></p></td></tr></tbody></table><p class="c18 c56"><span class="c4"></span></p><h2 class="c49" id="h.iqou4piuqlm"><span class="c40 c36 c41">Subqueries in WHERE Clause</span></h2><a id="t.fa7016e3b2c403c832b126c28b5c482cc660e5da"></a><a id="t.2"></a><table class="c32"><tbody><tr class="c33"><td class="c31" colspan="1" rowspan="1"><p class="c18"><span class="c3">/**************************************************************<br> &nbsp;SUBQUERIES IN THE WHERE CLAUSE<br> &nbsp;Works for MySQL, Postgres<br> &nbsp;SQLite doesn&#39;t support All or Any<br>**************************************************************/</span><span class="c0"><br><br></span><span class="c3 c28">/**************************************************************<br> &nbsp;Query 1</span></p><p class="c18"><span class="c3">&nbsp; IDs and names of students applying to CS<br>**************************************************************/</span><span class="c0"><br><br></span><span class="c2">select</span><span class="c0">&nbsp;</span><span class="c2">sID</span><span class="c0">, </span><span class="c0">sName</span><span class="c0"><br></span><span class="c2">from</span><span class="c0">&nbsp;Student<br></span><span class="c2">where</span><span class="c0">&nbsp;</span><span class="c2">sID</span><span class="c0">&nbsp;</span><span class="c21 c13">in</span><span class="c25 c13">&nbsp;(</span><span class="c21 c13">select</span><span class="c25 c13">&nbsp;</span><span class="c21 c13">sID</span><span class="c25 c13">&nbsp;</span><span class="c21 c13">from</span><span class="c25 c13">&nbsp;</span><span class="c21 c13">Apply</span><span class="c25 c13">&nbsp;</span><span class="c21 c13">where</span><span class="c25 c13">&nbsp;major = </span><span class="c50 c13">&#39;CS&#39;</span><span class="c25 c13">)</span><span class="c0">;<br><br></span><span class="c3">/**************************************************************<br> &nbsp;Same query written </span><span class="c27 c13">without &#39;In&#39;</span><span class="c3"><br>**************************************************************/</span><span class="c0"><br><br></span><span class="c2">select</span><span class="c0">&nbsp;</span><span class="c2">sID</span><span class="c0">, </span><span class="c0">sName</span><span class="c0"><br></span><span class="c2">from</span><span class="c0">&nbsp;Student, </span><span class="c2">Apply</span><span class="c0"><br></span><span class="c2">where</span><span class="c0">&nbsp;Student.sID = Apply.sID </span><span class="c2">and</span><span class="c0">&nbsp;major = </span><span class="c22">&#39;CS&#39;</span><span class="c0">;<br><br></span><span class="c3">/*** Fix </span><span class="c27 c13">error</span><span class="c3">&nbsp;***/</span><span class="c0"><br><br></span><span class="c2">select</span><span class="c0">&nbsp;</span><span class="c25 c13">Student.</span><span class="c0">sID, sName<br></span><span class="c2">from</span><span class="c0">&nbsp;Student, </span><span class="c2">Apply</span><span class="c0"><br></span><span class="c2">where</span><span class="c0">&nbsp;Student.sID = Apply.sID </span><span class="c2">and</span><span class="c0">&nbsp;major = </span><span class="c22">&#39;CS&#39;</span><span class="c0">;<br><br></span><span class="c3">/*** Remove duplicates ***/</span><span class="c0"><br><br></span><span class="c2">select</span><span class="c0">&nbsp;</span><span class="c21 c13">distinct</span><span class="c0">&nbsp;Student.sID, sName<br></span><span class="c2">from</span><span class="c0">&nbsp;Student, </span><span class="c2">Apply</span><span class="c0"><br></span><span class="c2">where</span><span class="c0">&nbsp;Student.sID = Apply.sID </span><span class="c2">and</span><span class="c0">&nbsp;major = </span><span class="c22">&#39;CS&#39;</span><span class="c0">;<br><br></span><span class="c3">/**************************************************************<br> &nbsp;</span><span class="c27 c13">Just names</span><span class="c3">&nbsp;of students applying to CS<br>**************************************************************/</span><span class="c0"><br><br></span><span class="c2">select</span><span class="c0">&nbsp;</span><span class="c0">sName</span><span class="c0"><br></span><span class="c2">from</span><span class="c0">&nbsp;Student<br></span><span class="c2">where</span><span class="c0">&nbsp;sID </span><span class="c21 c13">in</span><span class="c25 c13">&nbsp;(</span><span class="c21 c13">select</span><span class="c25 c13">&nbsp;sID </span><span class="c21 c13">from</span><span class="c25 c13">&nbsp;Apply </span><span class="c21 c13">where</span><span class="c25 c13">&nbsp;major = </span><span class="c13 c50">&#39;CS&#39;</span><span class="c25 c13">)</span><span class="c0">;<br><br></span><span class="c3">/**************************************************************<br> &nbsp;Same query written </span><span class="c27 c13">without &#39;In&#39;</span><span class="c3"><br>**************************************************************/</span><span class="c0"><br><br></span><span class="c2">select</span><span class="c0">&nbsp;</span><span class="c0">sName</span><span class="c0"><br></span><span class="c2">from</span><span class="c0">&nbsp;Student, </span><span class="c2">Apply</span><span class="c0"><br></span><span class="c2">where</span><span class="c0">&nbsp;Student.sID = Apply.sID </span><span class="c2">and</span><span class="c0">&nbsp;major = </span><span class="c22">&#39;CS&#39;</span><span class="c0">;<br><br></span><span class="c3">/*** Remove duplicates (</span><span class="c27 c13">still incorrect</span><span class="c3">) phth: weil nur ein &ldquo;Craig&rdquo; statt richtig &ldquo;345 Craig&rdquo; und &ldquo;543 Craig&rdquo; wie in Query 1. Dh. &ldquo;distinct&rdquo; l&ouml;scht ALLE gleichen Namen trotz unterschiedlicher keys, wenn kein key im result angegeben wird ! ***/</span><span class="c0"><br><br></span><span class="c2">select</span><span class="c0">&nbsp;</span><span class="c21 c13">distinct</span><span class="c0">&nbsp;sName<br></span><span class="c2">from</span><span class="c0">&nbsp;Student, </span><span class="c2">Apply</span><span class="c0"><br></span><span class="c2">where</span><span class="c0">&nbsp;Student.sID = Apply.sID </span><span class="c2">and</span><span class="c0">&nbsp;major = </span><span class="c22">&#39;CS&#39;</span><span class="c0">;<br><br></span><span class="c3">/**************************************************************<br> &nbsp;Duplicates are important: </span><span class="c27 c13">average GPA</span><span class="c3">&nbsp;of CS applicants<br>**************************************************************/</span><span class="c0"><br><br></span><span class="c2">select</span><span class="c0">&nbsp;</span><span class="c25 c13">GPA</span><span class="c0"><br></span><span class="c2">from</span><span class="c0">&nbsp;Student<br></span><span class="c2">where</span><span class="c0">&nbsp;</span><span class="c2">sID</span><span class="c0">&nbsp;</span><span class="c2">in</span><span class="c0">&nbsp;(</span><span class="c2">select</span><span class="c0">&nbsp;</span><span class="c2">sID</span><span class="c0">&nbsp;</span><span class="c2">from</span><span class="c0">&nbsp;</span><span class="c2">Apply</span><span class="c0">&nbsp;</span><span class="c2">where</span><span class="c0">&nbsp;major = </span><span class="c22">&#39;CS&#39;</span><span class="c0">);<br><br></span><span class="c3">/**************************************************************<br> &nbsp;Alternative (incorrect) queries </span><span class="c28 c27 c13">without &#39;In&#39;</span></p><p class="c18"><span class="c3">&nbsp; weil &ldquo;distinct&rdquo; wie oben beschrieben alle gleichen Noten l&ouml;scht und kein key f&uuml;r die Noten angegeben wurde<br>**************************************************************/</span><span class="c0"><br><br></span><span class="c2">select</span><span class="c0">&nbsp;GPA<br></span><span class="c2">from</span><span class="c0">&nbsp;Student, </span><span class="c2">Apply</span><span class="c0"><br></span><span class="c2">where</span><span class="c0">&nbsp;</span><span class="c25 c13">Student.sID = Apply.sID </span><span class="c21 c13">and</span><span class="c25 c13">&nbsp;major = </span><span class="c50 c13">&#39;CS&#39;</span><span class="c0">;<br><br></span><span class="c2">select</span><span class="c0">&nbsp;</span><span class="c21 c13">distinct</span><span class="c0">&nbsp;GPA<br></span><span class="c2">from</span><span class="c0">&nbsp;Student, </span><span class="c2">Apply</span><span class="c0"><br></span><span class="c2">where</span><span class="c0">&nbsp;Student.sID = Apply.sID </span><span class="c2">and</span><span class="c0">&nbsp;major = </span><span class="c22">&#39;CS&#39;</span><span class="c0">;<br><br></span><span class="c3">/**************************************************************<br> &nbsp;Students who applied to CS but not EE<br> &nbsp;(query we used </span><span class="c27 c13">&#39;Except&#39;</span><span class="c3 c28">&nbsp;for earlier)</span></p><p class="c18"><span class="c3">&nbsp; was aber nicht ohne &ldquo;Except&rdquo; ging bisher<br>**************************************************************/</span><span class="c0"><br><br></span><span class="c2">select</span><span class="c0">&nbsp;</span><span class="c2">sID</span><span class="c0">, </span><span class="c0">sName</span><span class="c0"><br></span><span class="c2">from</span><span class="c0">&nbsp;Student<br></span><span class="c2">where</span><span class="c0">&nbsp;</span><span class="c2">sID</span><span class="c0">&nbsp;</span><span class="c21 c13">in</span><span class="c0">&nbsp;(</span><span class="c2">select</span><span class="c0">&nbsp;</span><span class="c2">sID</span><span class="c0">&nbsp;</span><span class="c2">from</span><span class="c0">&nbsp;</span><span class="c2">Apply</span><span class="c0">&nbsp;</span><span class="c2">where</span><span class="c0">&nbsp;major = </span><span class="c22">&#39;CS&#39;</span><span class="c0">)<br> &nbsp;</span><span class="c2">and</span><span class="c0">&nbsp;</span><span class="c2">sID</span><span class="c0">&nbsp;</span><span class="c21 c13">not</span><span class="c25 c13">&nbsp;</span><span class="c13 c21">in</span><span class="c0">&nbsp;(</span><span class="c2">select</span><span class="c0">&nbsp;</span><span class="c2">sID</span><span class="c0">&nbsp;</span><span class="c2">from</span><span class="c0">&nbsp;</span><span class="c2">Apply</span><span class="c0">&nbsp;</span><span class="c2">where</span><span class="c0">&nbsp;major = </span><span class="c22">&#39;EE&#39;</span><span class="c0">);<br><br></span><span class="c3">/*** Change to &#39;not sID in&#39; aber gleiches query ***/</span><span class="c0"><br><br></span><span class="c2">select</span><span class="c0">&nbsp;</span><span class="c2">sID</span><span class="c0">, </span><span class="c0">sName</span><span class="c0"><br></span><span class="c2">from</span><span class="c0">&nbsp;Student<br></span><span class="c2">where</span><span class="c0">&nbsp;</span><span class="c2">sID</span><span class="c0">&nbsp;</span><span class="c21 c13">in</span><span class="c0">&nbsp;(</span><span class="c2">select</span><span class="c0">&nbsp;</span><span class="c2">sID</span><span class="c0">&nbsp;</span><span class="c2">from</span><span class="c0">&nbsp;</span><span class="c2">Apply</span><span class="c0">&nbsp;</span><span class="c2">where</span><span class="c0">&nbsp;major = </span><span class="c22">&#39;CS&#39;</span><span class="c0">)<br> &nbsp;</span><span class="c2">and</span><span class="c0">&nbsp;</span><span class="c21 c13">not</span><span class="c0">&nbsp;</span><span class="c2">sID</span><span class="c0">&nbsp;</span><span class="c21 c13">in</span><span class="c0">&nbsp;(</span><span class="c2">select</span><span class="c0">&nbsp;</span><span class="c2">sID</span><span class="c0">&nbsp;</span><span class="c2">from</span><span class="c0">&nbsp;</span><span class="c2">Apply</span><span class="c0">&nbsp;</span><span class="c2">where</span><span class="c0">&nbsp;major = </span><span class="c22">&#39;EE&#39;</span><span class="c0">);<br><br></span><span class="c3 c28">/**************************************************************<br> &nbsp;Colleges such that some other college is in the same state</span></p><p class="c18"><span class="c3">&nbsp; -&ldquo;exists&rdquo; </span><span class="c28 c27 c13">checks if empty or not</span></p><p class="c18"><span class="c3">&nbsp; -example is </span><span class="c27 c13">similar to self-join</span><span class="c3">&nbsp;example above<br>**************************************************************/</span><span class="c0"><br><br></span><span class="c2">select</span><span class="c0">&nbsp;cName, state<br></span><span class="c2">from</span><span class="c0">&nbsp;College </span><span class="c25 c9">C1</span><span class="c0"><br></span><span class="c2">where</span><span class="c0">&nbsp;</span><span class="c21 c13">exists</span><span class="c0">&nbsp;(</span><span class="c2">select</span><span class="c0">&nbsp;* </span><span class="c2">from</span><span class="c0">&nbsp;College C2<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c2">where</span><span class="c0">&nbsp;C2.state = </span><span class="c25 c9">C1</span><span class="c0">.state); &nbsp;</span><span class="c3">-- &ldquo;</span><span class="c27 c13">correlated reference</span><span class="c3">&rdquo;: C1 refers to relation outside the query</span><span class="c0"><br><br></span><span class="c3">/*** Fix </span><span class="c27 c13">error</span><span class="c3 c28">&nbsp;</span></p><p class="c18"><span class="c3">- every college in C1 was returned because, of course, C1 and C2 contain the same colleges, so </span><span class="c27 c13">&ldquo;exists&rdquo; condition was always satisfied</span><span class="c3">&nbsp;***/</span><span class="c0"><br><br></span><span class="c2">select</span><span class="c0">&nbsp;cName, state<br></span><span class="c2">from</span><span class="c0">&nbsp;College C1<br></span><span class="c2">where</span><span class="c0">&nbsp;</span><span class="c2">exists</span><span class="c0">&nbsp;(</span><span class="c2">select</span><span class="c0">&nbsp;* </span><span class="c2">from</span><span class="c0">&nbsp;College C2<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c2">where</span><span class="c0">&nbsp;C2.state = C1.state </span><span class="c21 c13">and</span><span class="c25 c13">&nbsp;C2.cName &lt;&gt; C1.cName</span><span class="c0">);<br><br></span><span class="c3">/**************************************************************<br> &nbsp;Biggest college (</span><span class="c27 c13">without max</span><span class="c3">&nbsp;operator)<br>**************************************************************/</span><span class="c0"><br><br></span><span class="c2">select</span><span class="c0">&nbsp;cName<br></span><span class="c2">from</span><span class="c0">&nbsp;College C1<br></span><span class="c2">where</span><span class="c0">&nbsp;</span><span class="c21 c13">not</span><span class="c13 c25">&nbsp;</span><span class="c21 c13">exists</span><span class="c0">&nbsp;(</span><span class="c2">select</span><span class="c0">&nbsp;* </span><span class="c2">from</span><span class="c0">&nbsp;College C2<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c2">where</span><span class="c0">&nbsp;C2.enrollment &gt; C1.enrollment);<br><br></span><span class="c3">/*** Similar: student with highest GPA &nbsp;***/</span><span class="c0"><br><br></span><span class="c2">select</span><span class="c0">&nbsp;</span><span class="c0">sName</span><span class="c0"><br></span><span class="c2">from</span><span class="c0">&nbsp;Student C1<br></span><span class="c2">where</span><span class="c0">&nbsp;</span><span class="c21 c13">not</span><span class="c25 c13">&nbsp;</span><span class="c21 c13">exists</span><span class="c0">&nbsp;(</span><span class="c2">select</span><span class="c0">&nbsp;* </span><span class="c2">from</span><span class="c0">&nbsp;Student C2<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c2">where</span><span class="c0 c28">&nbsp;C2.GPA &gt; C1.GPA);<br><br></span></p><p class="c18"><span class="c3 c28">/*** 4 students in result because all 4 students have highest GPA 3.9. ***/</span></p><p class="c18"><span class="c3">/*** Add GPA ***/</span><span class="c0"><br><br></span><span class="c2">select</span><span class="c0">&nbsp;</span><span class="c0">sName</span><span class="c0">, </span><span class="c25 c13">GPA</span><span class="c0"><br></span><span class="c2">from</span><span class="c0">&nbsp;Student C1<br></span><span class="c2">where</span><span class="c0">&nbsp;</span><span class="c2">not</span><span class="c0">&nbsp;</span><span class="c2">exists</span><span class="c0">&nbsp;(</span><span class="c2">select</span><span class="c0">&nbsp;* </span><span class="c2">from</span><span class="c0">&nbsp;Student C2<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c2">where</span><span class="c0">&nbsp;C2.GPA &gt; C1.GPA);<br><br></span><span class="c3">/**************************************************************<br> &nbsp;Highest GPA </span><span class="c27 c13">with no subquery</span><span class="c27">&nbsp;(aka wir brauchen EIN</span><sup class="c27"><a href="#ftnt3" id="ftnt_ref3">[3]</a></sup><span class="c28 c27">&nbsp;&ldquo;join&rdquo;)</span></p><p class="c18"><span class="c3">&nbsp; (incorrect)<br>**************************************************************/</span><span class="c0"><br><br></span><span class="c2">select</span><span class="c0">&nbsp;S1.sName, S1.GPA<br></span><span class="c2">from</span><span class="c0">&nbsp;Student S1, Student S2 </span><span class="c27">-- cross-product join</span><span class="c0"><br></span><span class="c2">where</span><span class="c0">&nbsp;S1.GPA &gt; S2.GPA;<br><br></span><span class="c3">/*** Remove duplicates (</span><span class="c27 c13">still incorrect</span><span class="c3 c28">) ***/</span></p><p class="c18"><span class="c3">/*** -instead finds all students except those with lowest GPA ***/</span><span class="c0"><br><br></span><span class="c2">select</span><span class="c0">&nbsp;</span><span class="c21 c13">distinct</span><span class="c0">&nbsp;S1.sName, S1.GPA<br></span><span class="c2">from</span><span class="c0">&nbsp;Student S1, Student S2<br></span><span class="c2">where</span><span class="c0">&nbsp;S1.GPA &gt; S2.GPA;<br><br></span><span class="c3">/**************************************************************<br> &nbsp;Highest GPA using &quot;&gt;= all&quot;<br>**************************************************************/</span><span class="c0"><br><br></span><span class="c2">select</span><span class="c0">&nbsp;</span><span class="c0">sName</span><span class="c0">, GPA<br></span><span class="c2">from</span><span class="c0">&nbsp;Student<br></span><span class="c2">where</span><span class="c0">&nbsp;GPA </span><span class="c25 c13">&gt;= </span><span class="c21 c13">all</span><span class="c0">&nbsp;(</span><span class="c2">select</span><span class="c0">&nbsp;GPA </span><span class="c2">from</span><span class="c0">&nbsp;Student);<br><br></span><span class="c3 c28">/**************************************************************<br> &nbsp;Higher GPA than all other students</span></p><p class="c18"><span class="c3 c28">&nbsp; -incorrect formulation of &ldquo;&gt;= all&rdquo; query oben dr&uuml;ber: gibt empty result, weil 3 andere auch gr&ouml;&szlig;tes GPA 3.9 haben (vgl oben), sodass es keine students gibt f&uuml;r die gilt GPA &gt; all</span></p><p class="c18"><span class="c3">&nbsp; -funktioniert nur, wenn GPAs unique (wie in n&auml;chstem Bsp) <br>**************************************************************/</span><span class="c0"><br><br></span><span class="c2">select</span><span class="c0">&nbsp;</span><span class="c0">sName</span><span class="c0">, GPA<br></span><span class="c2">from</span><span class="c0">&nbsp;Student S1<br></span><span class="c2">where</span><span class="c0">&nbsp;GPA </span><span class="c25 c13">&gt; all</span><span class="c0">&nbsp;(</span><span class="c2">select</span><span class="c0">&nbsp;GPA </span><span class="c2">from</span><span class="c0">&nbsp;Student S2<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c21 c13">where</span><span class="c25 c13">&nbsp;S2.sID &lt;&gt; S1.sID</span><span class="c0">);<br><br></span><span class="c3 c28">/*** Similar: higher enrollment than all other colleges &nbsp;***/</span></p><p class="c18"><span class="c3">/*** hier funktioniert obige query, weil enrollment unique &nbsp;***/</span><span class="c0"><br><br></span><span class="c2">select</span><span class="c0">&nbsp;cName<br></span><span class="c2">from</span><span class="c0">&nbsp;College S1<br></span><span class="c2">where</span><span class="c0">&nbsp;enrollment </span><span class="c25 c13">&gt; all</span><span class="c0">&nbsp;(</span><span class="c2">select</span><span class="c0">&nbsp;enrollment </span><span class="c2">from</span><span class="c0">&nbsp;College S2<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c21 c13">where</span><span class="c25 c13">&nbsp;S2.cName &lt;&gt; S1.cName</span><span class="c0">);<br><br></span><span class="c3">/*** Same query using &#39;Not &lt;= Any&#39; ***/</span><span class="c0"><br><br></span><span class="c2">select</span><span class="c0">&nbsp;cName<br></span><span class="c2">from</span><span class="c0">&nbsp;College S1<br></span><span class="c2">where</span><span class="c0">&nbsp;</span><span class="c21 c13">not</span><span class="c0">&nbsp;enrollment </span><span class="c25 c13">&lt;= </span><span class="c21 c13">any</span><span class="c0">&nbsp;(</span><span class="c2">select</span><span class="c0">&nbsp;enrollment </span><span class="c2">from</span><span class="c0">&nbsp;College S2<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c2">where</span><span class="c0">&nbsp;S2.cName &lt;&gt; S1.cName);<br><br></span><span class="c3">/**************************************************************<br> &nbsp;Students not from the smallest HS<br>**************************************************************/</span><span class="c0"><br><br></span><span class="c2">select</span><span class="c0">&nbsp;</span><span class="c2">sID</span><span class="c0">, sName, sizeHS<br></span><span class="c2">from</span><span class="c0">&nbsp;Student<br></span><span class="c2">where</span><span class="c0">&nbsp;sizeHS </span><span class="c25 c13">&gt; </span><span class="c21 c13">any</span><span class="c0">&nbsp;(</span><span class="c2">select</span><span class="c0">&nbsp;sizeHS </span><span class="c2">from</span><span class="c0">&nbsp;Student);<br><br></span><span class="c3">/**************************************************************<br> &nbsp;Students not from the smallest HS<br> &nbsp;</span><span class="c28 c27 c13">Some systems don&#39;t support Any/All</span></p><p class="c18"><span class="c3">&nbsp; -use &ldquo;exists&rdquo;/&rdquo;not exists&rdquo; instead of any/all<br>**************************************************************/</span><span class="c0"><br><br></span><span class="c2">select</span><span class="c0">&nbsp;</span><span class="c2">sID</span><span class="c0">, sName, sizeHS<br></span><span class="c2">from</span><span class="c0">&nbsp;Student S1<br></span><span class="c2">where</span><span class="c0">&nbsp;</span><span class="c21 c13">exists</span><span class="c0">&nbsp;(</span><span class="c2">select</span><span class="c0">&nbsp;* </span><span class="c2">from</span><span class="c0">&nbsp;Student S2<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c2">where</span><span class="c0">&nbsp;S2.sizeHS &lt; S1.sizeHS);<br><br></span><span class="c3 c28">/**************************************************************<br> &nbsp;Students who applied to CS but not EE (wie oben)</span></p><p class="c18"><span class="c3">&nbsp; -incorrect<br>**************************************************************/</span><span class="c0"><br><br></span><span class="c2">select</span><span class="c0">&nbsp;</span><span class="c2">sID</span><span class="c0">, </span><span class="c0">sName</span><span class="c0"><br></span><span class="c2">from</span><span class="c0">&nbsp;Student<br></span><span class="c2">where</span><span class="c0">&nbsp;</span><span class="c2">sID</span><span class="c0">&nbsp;</span><span class="c25 c13">= </span><span class="c21 c13">any</span><span class="c0">&nbsp;(</span><span class="c2">select</span><span class="c0">&nbsp;</span><span class="c2">sID</span><span class="c0">&nbsp;</span><span class="c2">from</span><span class="c0">&nbsp;</span><span class="c2">Apply</span><span class="c0">&nbsp;</span><span class="c2">where</span><span class="c0">&nbsp;major = </span><span class="c22">&#39;CS&#39;</span><span class="c0">)<br> &nbsp;</span><span class="c2">and</span><span class="c0">&nbsp;</span><span class="c2">sID</span><span class="c0">&nbsp;</span><span class="c25 c13">&lt;&gt; </span><span class="c21 c13">any</span><span class="c0">&nbsp;(</span><span class="c2">select</span><span class="c0">&nbsp;</span><span class="c2">sID</span><span class="c0">&nbsp;</span><span class="c2">from</span><span class="c0">&nbsp;</span><span class="c2">Apply</span><span class="c0">&nbsp;</span><span class="c2">where</span><span class="c0">&nbsp;major = </span><span class="c22">&#39;EE&#39;</span><span class="c0">);<br><br></span><span class="c3">/*** Subtle error, fix ***/</span><span class="c0"><br><br></span><span class="c2">select</span><span class="c0">&nbsp;</span><span class="c2">sID</span><span class="c0">, </span><span class="c0">sName</span><span class="c0"><br></span><span class="c2">from</span><span class="c0">&nbsp;Student<br></span><span class="c2">where</span><span class="c0">&nbsp;</span><span class="c2">sID</span><span class="c0">&nbsp;= </span><span class="c2">any</span><span class="c0">&nbsp;(</span><span class="c2">select</span><span class="c0">&nbsp;</span><span class="c2">sID</span><span class="c0">&nbsp;</span><span class="c2">from</span><span class="c0">&nbsp;</span><span class="c2">Apply</span><span class="c0">&nbsp;</span><span class="c2">where</span><span class="c0">&nbsp;major = </span><span class="c22">&#39;CS&#39;</span><span class="c0">)<br> &nbsp;</span><span class="c2">and</span><span class="c0">&nbsp;</span><span class="c21 c13">not</span><span class="c0">&nbsp;</span><span class="c2">sID</span><span class="c0">&nbsp;</span><span class="c25 c13">= </span><span class="c21 c13">any</span><span class="c0">&nbsp;(</span><span class="c2">select</span><span class="c0">&nbsp;</span><span class="c2">sID</span><span class="c0">&nbsp;</span><span class="c2">from</span><span class="c0">&nbsp;</span><span class="c2">Apply</span><span class="c0">&nbsp;</span><span class="c2">where</span><span class="c0">&nbsp;major = </span><span class="c22">&#39;EE&#39;</span><span class="c0">);</span></p></td></tr><tr class="c33"><td class="c31" colspan="1" rowspan="1"><p class="c18 c56"><span class="c3 c28"></span></p></td></tr></tbody></table><h2 class="c49" id="h.rddj6ase88kb"><span class="c40 c36 c41">Subqueries in FROM and SELECT</span></h2><a id="t.969d2d66eb92a913de7db3fa1839a9637e9d41d2"></a><a id="t.3"></a><table class="c32"><tbody><tr class="c33"><td class="c31" colspan="1" rowspan="1"><p class="c18"><span class="c3">/**************************************************************<br> &nbsp;SUBQUERIES IN THE FROM AND SELECT CLAUSES<br> &nbsp;Works for MySQL and Postgres<br> &nbsp;SQLite doesn&#39;t support All<br>**************************************************************/</span><span class="c0"><br><br></span><span class="c3">/**************************************************************<br> &nbsp;Students whose scaled GPA changes GPA by more than 1<br>**************************************************************/</span><span class="c0"><br><br></span><span class="c2">select</span><span class="c0">&nbsp;</span><span class="c2">sID</span><span class="c0">, sName, GPA, GPA*(sizeHS/1000.0) </span><span class="c2">as</span><span class="c0">&nbsp;scaledGPA<br></span><span class="c2">from</span><span class="c0">&nbsp;Student<br></span><span class="c2">where</span><span class="c0">&nbsp;GPA*(sizeHS/1000.0) - GPA &gt; 1.0<br> &nbsp; </span><span class="c2">or</span><span class="c0">&nbsp;GPA - GPA*(sizeHS/1000.0) &gt; 1.0;<br><br></span><span class="c3">/*** Can simplify using absolute value function ***/</span><span class="c0"><br><br></span><span class="c2">select</span><span class="c0">&nbsp;</span><span class="c2">sID</span><span class="c0">, sName, GPA, GPA*(sizeHS/1000.0) </span><span class="c2">as</span><span class="c0">&nbsp;scaledGPA<br></span><span class="c2">from</span><span class="c0">&nbsp;Student<br></span><span class="c2">where</span><span class="c0">&nbsp;</span><span class="c2">abs</span><span class="c0">(GPA*(sizeHS/1000.0) - GPA) &gt; 1.0;<br><br></span><span class="c3">/*** Can further simplify using subquery in From ***/</span><span class="c0"><br><br></span><span class="c2">select</span><span class="c0">&nbsp;*<br></span><span class="c2">from</span><span class="c0">&nbsp;(</span><span class="c2">select</span><span class="c0">&nbsp;</span><span class="c2">sID</span><span class="c0">, sName, GPA, GPA*(sizeHS/1000.0) </span><span class="c2">as</span><span class="c0">&nbsp;scaledGPA<br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c2">from</span><span class="c0">&nbsp;Student) G<br></span><span class="c2">where</span><span class="c0">&nbsp;</span><span class="c2">abs</span><span class="c0">(scaledGPA - GPA) &gt; 1.0;<br><br></span><span class="c3">/**************************************************************<br> &nbsp;Colleges paired with the highest GPA of their applicants<br>**************************************************************/</span><span class="c0"><br><br></span><span class="c2">select</span><span class="c0">&nbsp;College.cName, state, GPA<br></span><span class="c2">from</span><span class="c0">&nbsp;College, </span><span class="c2">Apply</span><span class="c0">, Student<br></span><span class="c2">where</span><span class="c0">&nbsp;College.cName = Apply.cName<br> &nbsp;</span><span class="c2">and</span><span class="c0">&nbsp;Apply.sID = Student.sID<br> &nbsp;</span><span class="c2">and</span><span class="c0">&nbsp;GPA &gt;= all<br> &nbsp; &nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(</span><span class="c2">select</span><span class="c0">&nbsp;GPA </span><span class="c2">from</span><span class="c0">&nbsp;Student, </span><span class="c2">Apply</span><span class="c0"><br> &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c2">where</span><span class="c0">&nbsp;Student.sID = Apply.sID<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c2">and</span><span class="c0">&nbsp;Apply.cName = College.cName);<br><br></span><span class="c3">/*** Add Distinct to remove duplicates ***/</span><span class="c0"><br><br></span><span class="c2">select</span><span class="c0">&nbsp;</span><span class="c2">distinct</span><span class="c0">&nbsp;College.cName, state, GPA<br></span><span class="c2">from</span><span class="c0">&nbsp;College, </span><span class="c2">Apply</span><span class="c0">, Student<br></span><span class="c2">where</span><span class="c0">&nbsp;College.cName = Apply.cName<br> &nbsp;</span><span class="c2">and</span><span class="c0">&nbsp;Apply.sID = Student.sID<br> &nbsp;</span><span class="c2">and</span><span class="c0">&nbsp;GPA &gt;= all<br> &nbsp; &nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(</span><span class="c2">select</span><span class="c0">&nbsp;GPA </span><span class="c2">from</span><span class="c0">&nbsp;Student, </span><span class="c2">Apply</span><span class="c0"><br> &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c2">where</span><span class="c0">&nbsp;Student.sID = Apply.sID<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c2">and</span><span class="c0">&nbsp;Apply.cName = College.cName);<br><br></span><span class="c3">/*** Use subquery in Select ***/</span><span class="c0"><br><br></span><span class="c2">select</span><span class="c0">&nbsp;</span><span class="c2">distinct</span><span class="c0">&nbsp;cName, state,<br> &nbsp;(</span><span class="c2">select</span><span class="c0">&nbsp;</span><span class="c2">distinct</span><span class="c0">&nbsp;GPA<br> &nbsp; </span><span class="c2">from</span><span class="c0">&nbsp;</span><span class="c2">Apply</span><span class="c0">, Student<br> &nbsp; </span><span class="c2">where</span><span class="c0">&nbsp;College.cName = Apply.cName<br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c2">and</span><span class="c0">&nbsp;Apply.sID = Student.sID<br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c2">and</span><span class="c0">&nbsp;GPA &gt;= all<br> &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(</span><span class="c2">select</span><span class="c0">&nbsp;GPA </span><span class="c2">from</span><span class="c0">&nbsp;Student, </span><span class="c2">Apply</span><span class="c0"><br> &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c2">where</span><span class="c0">&nbsp;Student.sID = Apply.sID<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c2">and</span><span class="c0">&nbsp;Apply.cName = College.cName)) </span><span class="c2">as</span><span class="c0">&nbsp;GPA<br></span><span class="c2">from</span><span class="c0">&nbsp;College;<br><br></span><span class="c3">/*** Now pair colleges with names of their applicants<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(doesn&#39;t work due to multiple rows in subquery result) ***/</span><span class="c0"><br><br></span><span class="c2">select</span><span class="c0">&nbsp;</span><span class="c2">distinct</span><span class="c0">&nbsp;cName, state,<br> &nbsp;(</span><span class="c2">select</span><span class="c0">&nbsp;</span><span class="c2">distinct</span><span class="c0">&nbsp;sName<br> &nbsp; </span><span class="c2">from</span><span class="c0">&nbsp;</span><span class="c2">Apply</span><span class="c0">, Student<br> &nbsp; </span><span class="c2">where</span><span class="c0">&nbsp;College.cName = Apply.cName<br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c2">and</span><span class="c0">&nbsp;Apply.sID = Student.sID) </span><span class="c2">as</span><span class="c0">&nbsp;sName<br></span><span class="c2">from</span><span class="c0">&nbsp;College;</span></p></td></tr></tbody></table><h2 class="c24" id="h.7a1p3cpvgoq2"><span class="c40 c36 c41">The JOIN Family of Operators</span></h2><a id="t.ad76e619be57ce8558e8a9726bb04bde336bdfe0"></a><a id="t.4"></a><table class="c32"><tbody><tr class="c33"><td class="c31" colspan="1" rowspan="1"><p class="c18"><span class="c3">/**************************************************************<br> &nbsp;JOIN OPERATORS<br> &nbsp;Works for Postgres<br> &nbsp;MySQL doesn&#39;t support FULL OUTER JOIN<br> &nbsp;SQLite doesn&#39;t support RIGHT or FULL OUTER JOIN<br>**************************************************************/</span><span class="c0"><br><br></span><span class="c3">/**************************************************************<br> &nbsp;INNER JOIN<br> &nbsp;Student names and majors for which they&#39;ve applied<br>**************************************************************/</span><span class="c0"><br><br></span><span class="c2">select</span><span class="c0">&nbsp;</span><span class="c2">distinct</span><span class="c0">&nbsp;sName, major<br></span><span class="c2">from</span><span class="c0">&nbsp;Student, </span><span class="c2">Apply</span><span class="c0"><br></span><span class="c2">where</span><span class="c0">&nbsp;Student.sID = Apply.sID;<br><br></span><span class="c3">/*** Rewrite using INNER JOIN ***/</span><span class="c0"><br><br></span><span class="c2">select</span><span class="c0">&nbsp;</span><span class="c2">distinct</span><span class="c0">&nbsp;sName, major<br></span><span class="c2">from</span><span class="c0">&nbsp;Student </span><span class="c2">inner</span><span class="c0">&nbsp;</span><span class="c2">join</span><span class="c0">&nbsp;</span><span class="c2">Apply</span><span class="c0"><br></span><span class="c2">on</span><span class="c0">&nbsp;Student.sID = Apply.sID;<br><br></span><span class="c3">/*** Abbreviation is JOIN ***/</span><span class="c0"><br><br></span><span class="c2">select</span><span class="c0">&nbsp;</span><span class="c2">distinct</span><span class="c0">&nbsp;sName, major<br></span><span class="c2">from</span><span class="c0">&nbsp;Student </span><span class="c2">join</span><span class="c0">&nbsp;</span><span class="c2">Apply</span><span class="c0"><br></span><span class="c2">on</span><span class="c0">&nbsp;Student.sID = Apply.sID;<br><br></span><span class="c3">/**************************************************************<br> &nbsp;INNER JOIN WITH ADDITIONAL CONDITIONS<br> &nbsp;Names and GPAs of students with sizeHS &lt; 1000 applying to<br> &nbsp;CS at Stanford<br>**************************************************************/</span><span class="c0"><br><br></span><span class="c2">select</span><span class="c0">&nbsp;</span><span class="c0">sName</span><span class="c0">, GPA<br></span><span class="c2">from</span><span class="c0">&nbsp;Student, </span><span class="c2">Apply</span><span class="c0"><br></span><span class="c2">where</span><span class="c0">&nbsp;Student.sID = Apply.sID<br> &nbsp;</span><span class="c2">and</span><span class="c0">&nbsp;sizeHS &lt; 1000 </span><span class="c2">and</span><span class="c0">&nbsp;major = </span><span class="c22">&#39;CS&#39;</span><span class="c0">&nbsp;</span><span class="c2">and</span><span class="c0">&nbsp;cName = </span><span class="c22">&#39;Stanford&#39;</span><span class="c0">;<br><br></span><span class="c3">/*** Rewrite using JOIN ***/</span><span class="c0"><br><br></span><span class="c2">select</span><span class="c0">&nbsp;</span><span class="c0">sName</span><span class="c0">, GPA<br></span><span class="c2">from</span><span class="c0">&nbsp;Student </span><span class="c2">join</span><span class="c0">&nbsp;</span><span class="c2">Apply</span><span class="c0"><br></span><span class="c2">on</span><span class="c0">&nbsp;Student.sID = Apply.sID<br></span><span class="c2">where</span><span class="c0">&nbsp;sizeHS &lt; 1000 </span><span class="c2">and</span><span class="c0">&nbsp;major = </span><span class="c22">&#39;CS&#39;</span><span class="c0">&nbsp;</span><span class="c2">and</span><span class="c0">&nbsp;cName = </span><span class="c22">&#39;Stanford&#39;</span><span class="c0">;<br><br></span><span class="c3">/*** Can move everything into JOIN ON condition ***/</span><span class="c0"><br><br></span><span class="c2">select</span><span class="c0">&nbsp;</span><span class="c0">sName</span><span class="c0">, GPA<br></span><span class="c2">from</span><span class="c0">&nbsp;Student </span><span class="c2">join</span><span class="c0">&nbsp;</span><span class="c2">Apply</span><span class="c0"><br></span><span class="c2">on</span><span class="c0">&nbsp;Student.sID = Apply.sID<br></span><span class="c2">and</span><span class="c0">&nbsp;sizeHS &lt; 1000 </span><span class="c2">and</span><span class="c0">&nbsp;major = </span><span class="c22">&#39;CS&#39;</span><span class="c0">&nbsp;</span><span class="c2">and</span><span class="c0">&nbsp;cName = </span><span class="c22">&#39;Stanford&#39;</span><span class="c0">;<br><br></span><span class="c3">/**************************************************************<br> &nbsp;THREE-WAY INNER JOIN<br> &nbsp;Application info: ID, name, GPA, college name, enrollment<br>**************************************************************/</span><span class="c0"><br><br></span><span class="c2">select</span><span class="c0">&nbsp;Apply.sID, sName, GPA, Apply.cName, enrollment<br></span><span class="c2">from</span><span class="c0">&nbsp;</span><span class="c2">Apply</span><span class="c0">, Student, College<br></span><span class="c2">where</span><span class="c0">&nbsp;Apply.sID = Student.sID </span><span class="c2">and</span><span class="c0">&nbsp;Apply.cName = College.cName;<br><br></span><span class="c3">/*** Rewrite using three-way JOIN ***/</span><span class="c0"><br></span><span class="c3">/*** Works in SQLite and MySQL but not Postgres ***/</span><span class="c0"><br><br></span><span class="c2">select</span><span class="c0">&nbsp;Apply.sID, sName, GPA, Apply.cName, enrollment<br></span><span class="c2">from</span><span class="c0">&nbsp;</span><span class="c2">Apply</span><span class="c0">&nbsp;</span><span class="c2">join</span><span class="c0">&nbsp;Student </span><span class="c2">join</span><span class="c0">&nbsp;College<br></span><span class="c2">on</span><span class="c0">&nbsp;Apply.sID = Student.sID </span><span class="c2">and</span><span class="c0">&nbsp;Apply.cName = College.cName;<br><br></span><span class="c3">/*** Rewrite using binary JOIN ***/</span><span class="c0"><br><br></span><span class="c2">select</span><span class="c0">&nbsp;Apply.sID, sName, GPA, Apply.cName, enrollment<br></span><span class="c2">from</span><span class="c0">&nbsp;(</span><span class="c2">Apply</span><span class="c0">&nbsp;</span><span class="c2">join</span><span class="c0">&nbsp;Student </span><span class="c2">on</span><span class="c0">&nbsp;Apply.sID = Student.sID) </span><span class="c2">join</span><span class="c0">&nbsp;College </span><span class="c2">on</span><span class="c0">&nbsp;Apply.cName = College.cName;<br><br></span><span class="c3">/**************************************************************<br> &nbsp;NATURAL JOIN<br> &nbsp;Student names and majors for which they&#39;ve applied<br>**************************************************************/</span><span class="c0"><br><br></span><span class="c2">select</span><span class="c0">&nbsp;</span><span class="c2">distinct</span><span class="c0">&nbsp;sName, major<br></span><span class="c2">from</span><span class="c0">&nbsp;Student </span><span class="c2">inner</span><span class="c0">&nbsp;</span><span class="c2">join</span><span class="c0">&nbsp;</span><span class="c2">Apply</span><span class="c0"><br></span><span class="c2">on</span><span class="c0">&nbsp;Student.sID = Apply.sID;<br><br></span><span class="c3">/*** Rewrite using NATURAL JOIN ***/</span><span class="c0"><br><br></span><span class="c2">select</span><span class="c0">&nbsp;</span><span class="c2">distinct</span><span class="c0">&nbsp;sName, major<br></span><span class="c2">from</span><span class="c0">&nbsp;Student </span><span class="c2">natural</span><span class="c0">&nbsp;</span><span class="c2">join</span><span class="c0">&nbsp;</span><span class="c2">Apply</span><span class="c0">;<br><br></span><span class="c3">/*** Like relational algebra, eliminates duplicate columns ***/</span><span class="c0"><br><br></span><span class="c2">select</span><span class="c0">&nbsp;*<br></span><span class="c2">from</span><span class="c0">&nbsp;Student </span><span class="c2">natural</span><span class="c0">&nbsp;</span><span class="c2">join</span><span class="c0">&nbsp;</span><span class="c2">Apply</span><span class="c0">;<br><br></span><span class="c2">select</span><span class="c0">&nbsp;</span><span class="c2">distinct</span><span class="c0">&nbsp;</span><span class="c2">sID</span><span class="c0"><br></span><span class="c2">from</span><span class="c0">&nbsp;Student </span><span class="c2">natural</span><span class="c0">&nbsp;</span><span class="c2">join</span><span class="c0">&nbsp;</span><span class="c2">Apply</span><span class="c0">;<br><br></span><span class="c3">/*** Would get ambiguity error with cross-product ***/</span><span class="c0"><br><br></span><span class="c2">select</span><span class="c0">&nbsp;</span><span class="c2">distinct</span><span class="c0">&nbsp;</span><span class="c2">sID</span><span class="c0"><br></span><span class="c2">from</span><span class="c0">&nbsp;Student, </span><span class="c2">Apply</span><span class="c0">;<br><br></span><span class="c3">/**************************************************************<br> &nbsp;NATURAL JOIN WITH ADDITIONAL CONDITIONS<br> &nbsp;Names and GPAs of students with sizeHS &lt; 1000 applying to<br> &nbsp;CS at Stanford<br>**************************************************************/</span><span class="c0"><br><br></span><span class="c2">select</span><span class="c0">&nbsp;</span><span class="c0">sName</span><span class="c0">, GPA<br></span><span class="c2">from</span><span class="c0">&nbsp;Student </span><span class="c2">join</span><span class="c0">&nbsp;</span><span class="c2">Apply</span><span class="c0"><br></span><span class="c2">on</span><span class="c0">&nbsp;Student.sID = Apply.sID<br></span><span class="c2">where</span><span class="c0">&nbsp;sizeHS &lt; 1000 </span><span class="c2">and</span><span class="c0">&nbsp;major = </span><span class="c22">&#39;CS&#39;</span><span class="c0">&nbsp;</span><span class="c2">and</span><span class="c0">&nbsp;cName = </span><span class="c22">&#39;Stanford&#39;</span><span class="c0">;<br><br></span><span class="c3">/*** Rewrite using NATURAL JOIN ***/</span><span class="c0"><br><br></span><span class="c2">select</span><span class="c0">&nbsp;</span><span class="c0">sName</span><span class="c0">, GPA<br></span><span class="c2">from</span><span class="c0">&nbsp;Student </span><span class="c2">natural</span><span class="c0">&nbsp;</span><span class="c2">join</span><span class="c0">&nbsp;</span><span class="c2">Apply</span><span class="c0"><br></span><span class="c2">where</span><span class="c0">&nbsp;sizeHS &lt; 1000 </span><span class="c2">and</span><span class="c0">&nbsp;major = </span><span class="c22">&#39;CS&#39;</span><span class="c0">&nbsp;</span><span class="c2">and</span><span class="c0">&nbsp;cName = </span><span class="c22">&#39;Stanford&#39;</span><span class="c0">;<br><br></span><span class="c3">/*** USING clause considered safer ***/</span><span class="c0"><br><br></span><span class="c2">select</span><span class="c0">&nbsp;</span><span class="c0">sName</span><span class="c0">, GPA<br></span><span class="c2">from</span><span class="c0">&nbsp;Student </span><span class="c2">join</span><span class="c0">&nbsp;</span><span class="c2">Apply</span><span class="c0">&nbsp;</span><span class="c2">using</span><span class="c0">(</span><span class="c2">sID</span><span class="c0">)<br></span><span class="c2">where</span><span class="c0">&nbsp;sizeHS &lt; 1000 </span><span class="c2">and</span><span class="c0">&nbsp;major = </span><span class="c22">&#39;CS&#39;</span><span class="c0">&nbsp;</span><span class="c2">and</span><span class="c0">&nbsp;cName = </span><span class="c22">&#39;Stanford&#39;</span><span class="c0">;<br><br></span><span class="c3">/**************************************************************<br> &nbsp;SELF-JOIN<br> &nbsp;Pairs of students with same GPA<br>**************************************************************/</span><span class="c0"><br><br></span><span class="c2">select</span><span class="c0">&nbsp;S1.sID, S1.sName, S1.GPA, S2.sID, S2.sName, S2.GPA<br></span><span class="c2">from</span><span class="c0">&nbsp;Student S1, Student S2<br></span><span class="c2">where</span><span class="c0">&nbsp;S1.GPA = S2.GPA </span><span class="c2">and</span><span class="c0">&nbsp;S1.sID &lt; S2.sID;<br><br></span><span class="c3">/*** Rewrite using JOIN and USING (disallowed) ***/</span><span class="c0"><br><br></span><span class="c2">select</span><span class="c0">&nbsp;S1.sID, S1.sName, S1.GPA, S2.sID, S2.sName, S2.GPA<br></span><span class="c2">from</span><span class="c0">&nbsp;Student S1 </span><span class="c2">join</span><span class="c0">&nbsp;Student S2 </span><span class="c2">on</span><span class="c0">&nbsp;S1.sID &lt; S2.sID </span><span class="c2">using</span><span class="c0">(GPA);<br><br></span><span class="c3">/*** Without ON clause ***/</span><span class="c0"><br><br></span><span class="c2">select</span><span class="c0">&nbsp;S1.sID, S1.sName, S1.GPA, S2.sID, S2.sName, S2.GPA<br></span><span class="c2">from</span><span class="c0">&nbsp;Student S1 </span><span class="c2">join</span><span class="c0">&nbsp;Student S2 </span><span class="c2">using</span><span class="c0">(GPA)<br></span><span class="c2">where</span><span class="c0">&nbsp;S1.sID &lt; S2.sID;<br><br></span><span class="c3">/**************************************************************<br> &nbsp;SELF NATURAL JOIN<br>**************************************************************/</span><span class="c0"><br><br></span><span class="c2">select</span><span class="c0">&nbsp;*<br></span><span class="c2">from</span><span class="c0">&nbsp;Student S1 </span><span class="c2">natural</span><span class="c0">&nbsp;</span><span class="c2">join</span><span class="c0">&nbsp;Student S2;<br><br></span><span class="c3">/*** Verify equivalence to Student ***/</span><span class="c0"><br><br></span><span class="c2">select</span><span class="c0">&nbsp;* </span><span class="c2">from</span><span class="c0">&nbsp;Student;<br><br></span><span class="c3">/**************************************************************<br> &nbsp;LEFT OUTER JOIN<br> &nbsp;Student application info: name, ID, college name, major<br>**************************************************************/</span><span class="c0"><br><br></span><span class="c2">select</span><span class="c0">&nbsp;sName, </span><span class="c2">sID</span><span class="c0">, cName, major<br></span><span class="c2">from</span><span class="c0">&nbsp;Student </span><span class="c2">inner</span><span class="c0">&nbsp;</span><span class="c2">join</span><span class="c0">&nbsp;</span><span class="c2">Apply</span><span class="c0">&nbsp;</span><span class="c2">using</span><span class="c0">(</span><span class="c2">sID</span><span class="c0">);<br><br></span><span class="c3">/*** Include students who haven&#39;t applied anywhere ***/</span><span class="c0"><br><br></span><span class="c2">select</span><span class="c0">&nbsp;sName, </span><span class="c2">sID</span><span class="c0">, cName, major<br></span><span class="c2">from</span><span class="c0">&nbsp;Student </span><span class="c2">left</span><span class="c0">&nbsp;</span><span class="c2">outer</span><span class="c0">&nbsp;</span><span class="c2">join</span><span class="c0">&nbsp;</span><span class="c2">Apply</span><span class="c0">&nbsp;</span><span class="c2">using</span><span class="c0">(</span><span class="c2">sID</span><span class="c0">);<br><br></span><span class="c3">/*** Abbreviation is LEFT JOIN ***/</span><span class="c0"><br><br></span><span class="c2">select</span><span class="c0">&nbsp;sName, </span><span class="c2">sID</span><span class="c0">, cName, major<br></span><span class="c2">from</span><span class="c0">&nbsp;Student </span><span class="c2">left</span><span class="c0">&nbsp;</span><span class="c2">join</span><span class="c0">&nbsp;</span><span class="c2">Apply</span><span class="c0">&nbsp;</span><span class="c2">using</span><span class="c0">(</span><span class="c2">sID</span><span class="c0">);<br><br></span><span class="c3">/*** Using NATURAL OUTER JOIN ***/</span><span class="c0"><br><br></span><span class="c2">select</span><span class="c0">&nbsp;sName, </span><span class="c2">sID</span><span class="c0">, cName, major<br></span><span class="c2">from</span><span class="c0">&nbsp;Student </span><span class="c2">natural</span><span class="c0">&nbsp;</span><span class="c2">left</span><span class="c0">&nbsp;</span><span class="c2">outer</span><span class="c0">&nbsp;</span><span class="c2">join</span><span class="c0">&nbsp;</span><span class="c2">Apply</span><span class="c0">;<br><br></span><span class="c3">/*** Can simulate without any JOIN operators ***/</span><span class="c0"><br><br></span><span class="c2">select</span><span class="c0">&nbsp;sName, Student.sID, cName, major<br></span><span class="c2">from</span><span class="c0">&nbsp;Student, </span><span class="c2">Apply</span><span class="c0"><br></span><span class="c2">where</span><span class="c0">&nbsp;Student.sID = Apply.sID<br></span><span class="c2">union</span><span class="c0"><br></span><span class="c2">select</span><span class="c0">&nbsp;sName, </span><span class="c2">sID</span><span class="c0">, </span><span class="c35">NULL</span><span class="c0">, </span><span class="c35">NULL</span><span class="c0"><br></span><span class="c2">from</span><span class="c0">&nbsp;Student<br></span><span class="c2">where</span><span class="c0">&nbsp;</span><span class="c2">sID</span><span class="c0">&nbsp;</span><span class="c2">not</span><span class="c0">&nbsp;</span><span class="c2">in</span><span class="c0">&nbsp;(</span><span class="c2">select</span><span class="c0">&nbsp;</span><span class="c2">sID</span><span class="c0">&nbsp;</span><span class="c2">from</span><span class="c0">&nbsp;</span><span class="c2">Apply</span><span class="c0">);<br><br></span><span class="c3">/*** Instead include applications without matching students ***/</span><span class="c0"><br><br></span><span class="c2">insert</span><span class="c0">&nbsp;</span><span class="c2">into</span><span class="c0">&nbsp;</span><span class="c2">Apply</span><span class="c0">&nbsp;</span><span class="c2">values</span><span class="c0">&nbsp;(321, </span><span class="c22">&#39;MIT&#39;</span><span class="c0">, </span><span class="c22">&#39;history&#39;</span><span class="c0">, </span><span class="c22">&#39;N&#39;</span><span class="c0">);<br></span><span class="c2">insert</span><span class="c0">&nbsp;</span><span class="c2">into</span><span class="c0">&nbsp;</span><span class="c2">Apply</span><span class="c0">&nbsp;</span><span class="c2">values</span><span class="c0">&nbsp;(321, </span><span class="c22">&#39;MIT&#39;</span><span class="c0">, </span><span class="c22">&#39;psychology&#39;</span><span class="c0">, </span><span class="c22">&#39;Y&#39;</span><span class="c0">);<br><br></span><span class="c2">select</span><span class="c0">&nbsp;sName, </span><span class="c2">sID</span><span class="c0">, cName, major<br></span><span class="c2">from</span><span class="c0">&nbsp;</span><span class="c2">Apply</span><span class="c0">&nbsp;</span><span class="c2">natural</span><span class="c0">&nbsp;</span><span class="c2">left</span><span class="c0">&nbsp;</span><span class="c2">outer</span><span class="c0">&nbsp;</span><span class="c2">join</span><span class="c0">&nbsp;Student;<br><br></span><span class="c3">/**************************************************************<br> &nbsp;RIGHT OUTER JOIN<br> &nbsp;Student application info: name, ID, college name, major<br>**************************************************************/</span><span class="c0"><br><br></span><span class="c3">/*** Include applications without matching students ***/</span><span class="c0"><br><br></span><span class="c2">select</span><span class="c0">&nbsp;sName, </span><span class="c2">sID</span><span class="c0">, cName, major<br></span><span class="c2">from</span><span class="c0">&nbsp;Student </span><span class="c2">natural</span><span class="c0">&nbsp;</span><span class="c2">right</span><span class="c0">&nbsp;</span><span class="c2">outer</span><span class="c0">&nbsp;</span><span class="c2">join</span><span class="c0">&nbsp;</span><span class="c2">Apply</span><span class="c0">;<br><br></span><span class="c3">/**************************************************************<br> &nbsp;FULL OUTER JOIN<br> &nbsp;Student application info<br>**************************************************************/</span><span class="c0"><br><br></span><span class="c3">/*** Include students who haven&#39;t applied anywhere ***/</span><span class="c0"><br></span><span class="c3">/*** and applications without matching students ***/</span><span class="c0"><br><br></span><span class="c2">select</span><span class="c0">&nbsp;sName, </span><span class="c2">sID</span><span class="c0">, cName, major<br></span><span class="c2">from</span><span class="c0">&nbsp;Student </span><span class="c2">full</span><span class="c0">&nbsp;</span><span class="c2">outer</span><span class="c0">&nbsp;</span><span class="c2">join</span><span class="c0">&nbsp;</span><span class="c2">Apply</span><span class="c0">&nbsp;</span><span class="c2">using</span><span class="c0">(</span><span class="c2">sID</span><span class="c0">);<br><br></span><span class="c3">/*** Can simulate with LEFT and RIGHT outerjoins ***/</span><span class="c0"><br></span><span class="c3">/*** Note UNION eliminates duplicates ***/</span><span class="c0"><br><br></span><span class="c2">select</span><span class="c0">&nbsp;sName, </span><span class="c2">sID</span><span class="c0">, cName, major<br></span><span class="c2">from</span><span class="c0">&nbsp;Student </span><span class="c2">left</span><span class="c0">&nbsp;</span><span class="c2">outer</span><span class="c0">&nbsp;</span><span class="c2">join</span><span class="c0">&nbsp;</span><span class="c2">Apply</span><span class="c0">&nbsp;</span><span class="c2">using</span><span class="c0">(</span><span class="c2">sID</span><span class="c0">)<br></span><span class="c2">union</span><span class="c0"><br></span><span class="c2">select</span><span class="c0">&nbsp;sName, </span><span class="c2">sID</span><span class="c0">, cName, major<br></span><span class="c2">from</span><span class="c0">&nbsp;Student </span><span class="c2">right</span><span class="c0">&nbsp;</span><span class="c2">outer</span><span class="c0">&nbsp;</span><span class="c2">join</span><span class="c0">&nbsp;</span><span class="c2">Apply</span><span class="c0">&nbsp;</span><span class="c2">using</span><span class="c0">(</span><span class="c2">sID</span><span class="c0">);<br><br></span><span class="c3">/*** Can simulate without any JOIN operators ***/</span><span class="c0"><br><br></span><span class="c2">select</span><span class="c0">&nbsp;sName, Student.sID, cName, major<br></span><span class="c2">from</span><span class="c0">&nbsp;Student, </span><span class="c2">Apply</span><span class="c0"><br></span><span class="c2">where</span><span class="c0">&nbsp;Student.sID = Apply.sID<br></span><span class="c2">union</span><span class="c0"><br></span><span class="c2">select</span><span class="c0">&nbsp;sName, </span><span class="c2">sID</span><span class="c0">, </span><span class="c35">NULL</span><span class="c0">, </span><span class="c35">NULL</span><span class="c0"><br></span><span class="c2">from</span><span class="c0">&nbsp;Student<br></span><span class="c2">where</span><span class="c0">&nbsp;</span><span class="c2">sID</span><span class="c0">&nbsp;</span><span class="c2">not</span><span class="c0">&nbsp;</span><span class="c2">in</span><span class="c0">&nbsp;(</span><span class="c2">select</span><span class="c0">&nbsp;</span><span class="c2">sID</span><span class="c0">&nbsp;</span><span class="c2">from</span><span class="c0">&nbsp;</span><span class="c2">Apply</span><span class="c0">)<br></span><span class="c2">union</span><span class="c0"><br></span><span class="c2">select</span><span class="c0">&nbsp;</span><span class="c35">NULL</span><span class="c0">, </span><span class="c2">sID</span><span class="c0">, cName, major<br></span><span class="c2">from</span><span class="c0">&nbsp;</span><span class="c2">Apply</span><span class="c0"><br></span><span class="c2">where</span><span class="c0">&nbsp;</span><span class="c2">sID</span><span class="c0">&nbsp;</span><span class="c2">not</span><span class="c0">&nbsp;</span><span class="c2">in</span><span class="c0">&nbsp;(</span><span class="c2">select</span><span class="c0">&nbsp;</span><span class="c2">sID</span><span class="c0">&nbsp;</span><span class="c2">from</span><span class="c0">&nbsp;Student);<br><br></span><span class="c3">/**************************************************************<br> &nbsp;THREE-WAY OUTER JOIN<br> &nbsp;Not associative<br>**************************************************************/</span><span class="c0"><br><br></span><span class="c2">create</span><span class="c0">&nbsp;</span><span class="c2">table</span><span class="c0">&nbsp;T1 (A int, B int);<br></span><span class="c2">create</span><span class="c0">&nbsp;</span><span class="c2">table</span><span class="c0">&nbsp;T2 (B int, C int);<br></span><span class="c2">create</span><span class="c0">&nbsp;</span><span class="c2">table</span><span class="c0">&nbsp;T3 (A int, C int);<br></span><span class="c2">insert</span><span class="c0">&nbsp;</span><span class="c2">into</span><span class="c0">&nbsp;T1 </span><span class="c2">values</span><span class="c0">&nbsp;(1,2);<br></span><span class="c2">insert</span><span class="c0">&nbsp;</span><span class="c2">into</span><span class="c0">&nbsp;T2 </span><span class="c2">values</span><span class="c0">&nbsp;(2,3);<br></span><span class="c2">insert</span><span class="c0">&nbsp;</span><span class="c2">into</span><span class="c0">&nbsp;T3 </span><span class="c2">values</span><span class="c0">&nbsp;(4,5);<br><br></span><span class="c2">select</span><span class="c0">&nbsp;A,B,C<br></span><span class="c2">from</span><span class="c0">&nbsp;(T1 </span><span class="c2">natural</span><span class="c0">&nbsp;</span><span class="c2">full</span><span class="c0">&nbsp;</span><span class="c2">outer</span><span class="c0">&nbsp;</span><span class="c2">join</span><span class="c0">&nbsp;T2) </span><span class="c2">natural</span><span class="c0">&nbsp;</span><span class="c2">full</span><span class="c0">&nbsp;</span><span class="c2">outer</span><span class="c0">&nbsp;</span><span class="c2">join</span><span class="c0">&nbsp;T3;<br><br></span><span class="c2">select</span><span class="c0">&nbsp;A,B,C<br></span><span class="c2">from</span><span class="c0">&nbsp;T1 </span><span class="c2">natural</span><span class="c0">&nbsp;</span><span class="c2">full</span><span class="c0">&nbsp;</span><span class="c2">outer</span><span class="c0">&nbsp;</span><span class="c2">join</span><span class="c0">&nbsp;(T2 </span><span class="c2">natural</span><span class="c0">&nbsp;</span><span class="c2">full</span><span class="c0">&nbsp;</span><span class="c2">outer</span><span class="c0">&nbsp;</span><span class="c2">join</span><span class="c0">&nbsp;T3);<br><br></span><span class="c2">drop</span><span class="c0">&nbsp;</span><span class="c2">table</span><span class="c0">&nbsp;T1;<br></span><span class="c2">drop</span><span class="c0">&nbsp;</span><span class="c2">table</span><span class="c0">&nbsp;T2;<br></span><span class="c2">drop</span><span class="c0">&nbsp;</span><span class="c2">table</span><span class="c0">&nbsp;T3;</span></p></td></tr></tbody></table><h2 class="c24" id="h.gknkkq23eu9k"><span class="c40 c36 c41">Aggregation</span></h2><a id="t.05dbfd791cc0cb3a2eb1016874539708087144d9"></a><a id="t.5"></a><table class="c32"><tbody><tr class="c33"><td class="c31" colspan="1" rowspan="1"><p class="c18"><span class="c3">/**************************************************************<br> &nbsp;AGGREGATION<br> &nbsp;Works for SQLite, MySQL<br> &nbsp;Postgres doesn&#39;t allow ambiguous Select columns in Group-by queries<br>**************************************************************/</span><span class="c0"><br><br></span><span class="c3">/**************************************************************<br> &nbsp;Average GPA of all students<br>**************************************************************/</span><span class="c0"><br><br></span><span class="c2">select</span><span class="c0">&nbsp;</span><span class="c2">avg</span><span class="c0">(GPA)<br></span><span class="c2">from</span><span class="c0">&nbsp;Student;<br><br></span><span class="c3">/**************************************************************<br> &nbsp;Lowest GPA of students applying to CS<br>**************************************************************/</span><span class="c0"><br><br></span><span class="c2">select</span><span class="c0">&nbsp;</span><span class="c2">min</span><span class="c0">(GPA)<br></span><span class="c2">from</span><span class="c0">&nbsp;Student, </span><span class="c2">Apply</span><span class="c0"><br></span><span class="c2">where</span><span class="c0">&nbsp;Student.sID = Apply.sID </span><span class="c2">and</span><span class="c0">&nbsp;major = </span><span class="c22">&#39;CS&#39;</span><span class="c0">;<br><br></span><span class="c3">/*** Average GPA of students applying to CS ***/</span><span class="c0"><br><br></span><span class="c2">select</span><span class="c0">&nbsp;</span><span class="c2">avg</span><span class="c0">(GPA)<br></span><span class="c2">from</span><span class="c0">&nbsp;Student, </span><span class="c2">Apply</span><span class="c0"><br></span><span class="c2">where</span><span class="c0">&nbsp;Student.sID = Apply.sID </span><span class="c2">and</span><span class="c0">&nbsp;major = </span><span class="c22">&#39;CS&#39;</span><span class="c0">;<br><br></span><span class="c3">/*** Fix incorrect counting of GPAs ***/</span><span class="c0"><br><br></span><span class="c2">select</span><span class="c0">&nbsp;</span><span class="c2">avg</span><span class="c0">(GPA)<br></span><span class="c2">from</span><span class="c0">&nbsp;Student<br></span><span class="c2">where</span><span class="c0">&nbsp;</span><span class="c2">sID</span><span class="c0">&nbsp;</span><span class="c2">in</span><span class="c0">&nbsp;(</span><span class="c2">select</span><span class="c0">&nbsp;</span><span class="c2">sID</span><span class="c0">&nbsp;</span><span class="c2">from</span><span class="c0">&nbsp;</span><span class="c2">Apply</span><span class="c0">&nbsp;</span><span class="c2">where</span><span class="c0">&nbsp;major = </span><span class="c22">&#39;CS&#39;</span><span class="c0">);<br><br></span><span class="c3">/**************************************************************<br> &nbsp;Number of colleges bigger than 15,000<br>**************************************************************/</span><span class="c0"><br><br></span><span class="c2">select</span><span class="c0">&nbsp;</span><span class="c2">count</span><span class="c0">(*)<br></span><span class="c2">from</span><span class="c0">&nbsp;College<br></span><span class="c2">where</span><span class="c0">&nbsp;enrollment &gt; 15000;<br><br></span><span class="c3">/**************************************************************<br> &nbsp;Number of students applying to Cornell<br>**************************************************************/</span><span class="c0"><br><br></span><span class="c2">select</span><span class="c0">&nbsp;</span><span class="c2">count</span><span class="c0">(*)<br></span><span class="c2">from</span><span class="c0">&nbsp;</span><span class="c2">Apply</span><span class="c0"><br></span><span class="c2">where</span><span class="c0">&nbsp;cName = </span><span class="c22">&#39;Cornell&#39;</span><span class="c0">;<br><br></span><span class="c3">/*** Show why incorrect result, fix using Count Distinct ***/</span><span class="c0"><br><br></span><span class="c2">select</span><span class="c0">&nbsp;*<br></span><span class="c2">from</span><span class="c0">&nbsp;</span><span class="c2">Apply</span><span class="c0"><br></span><span class="c2">where</span><span class="c0">&nbsp;cName = </span><span class="c22">&#39;Cornell&#39;</span><span class="c0">;<br><br></span><span class="c2">select</span><span class="c0">&nbsp;</span><span class="c2">Count</span><span class="c0">(</span><span class="c2">Distinct</span><span class="c0">&nbsp;</span><span class="c2">sID</span><span class="c0">)<br></span><span class="c2">from</span><span class="c0">&nbsp;</span><span class="c2">Apply</span><span class="c0"><br></span><span class="c2">where</span><span class="c0">&nbsp;cName = </span><span class="c22">&#39;Cornell&#39;</span><span class="c0">;<br><br></span><span class="c3">/**************************************************************<br> &nbsp;Students such that number of other students with same GPA is<br> &nbsp;equal to number of other students with same sizeHS<br>**************************************************************/</span><span class="c0"><br><br></span><span class="c2">select</span><span class="c0">&nbsp;*<br></span><span class="c2">from</span><span class="c0">&nbsp;Student S1<br></span><span class="c2">where</span><span class="c0">&nbsp;(</span><span class="c2">select</span><span class="c0">&nbsp;</span><span class="c2">count</span><span class="c0">(*) </span><span class="c2">from</span><span class="c0">&nbsp;Student S2<br> &nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c2">where</span><span class="c0">&nbsp;S2.sID &lt;&gt; S1.sID </span><span class="c2">and</span><span class="c0">&nbsp;S2.GPA = S1.GPA) =<br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(</span><span class="c2">select</span><span class="c0">&nbsp;</span><span class="c2">count</span><span class="c0">(*) </span><span class="c2">from</span><span class="c0">&nbsp;Student S2<br> &nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c2">where</span><span class="c0">&nbsp;S2.sID &lt;&gt; S1.sID </span><span class="c2">and</span><span class="c0">&nbsp;S2.sizeHS = S1.sizeHS);<br><br></span><span class="c3">/**************************************************************<br> &nbsp;Amount by which average GPA of students applying to CS<br> &nbsp;exceeds average of students not applying to CS<br>**************************************************************/</span><span class="c0"><br><br></span><span class="c2">select</span><span class="c0">&nbsp;CS.avgGPA - NonCS.avgGPA<br></span><span class="c2">from</span><span class="c0">&nbsp;(</span><span class="c2">select</span><span class="c0">&nbsp;</span><span class="c2">avg</span><span class="c0">(GPA) </span><span class="c2">as</span><span class="c0">&nbsp;avgGPA </span><span class="c2">from</span><span class="c0">&nbsp;Student<br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c2">where</span><span class="c0">&nbsp;</span><span class="c2">sID</span><span class="c0">&nbsp;</span><span class="c2">in</span><span class="c0">&nbsp;(<br> &nbsp; &nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c2">select</span><span class="c0">&nbsp;</span><span class="c2">sID</span><span class="c0">&nbsp;</span><span class="c2">from</span><span class="c0">&nbsp;</span><span class="c2">Apply</span><span class="c0">&nbsp;</span><span class="c2">where</span><span class="c0">&nbsp;major = </span><span class="c22">&#39;CS&#39;</span><span class="c0">)) </span><span class="c2">as</span><span class="c0">&nbsp;CS,<br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(</span><span class="c2">select</span><span class="c0">&nbsp;</span><span class="c2">avg</span><span class="c0">(GPA) </span><span class="c2">as</span><span class="c0">&nbsp;avgGPA </span><span class="c2">from</span><span class="c0">&nbsp;Student<br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c2">where</span><span class="c0">&nbsp;</span><span class="c2">sID</span><span class="c0">&nbsp;</span><span class="c2">not</span><span class="c0">&nbsp;</span><span class="c2">in</span><span class="c0">&nbsp;(<br> &nbsp; &nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c2">select</span><span class="c0">&nbsp;</span><span class="c2">sID</span><span class="c0">&nbsp;</span><span class="c2">from</span><span class="c0">&nbsp;</span><span class="c2">Apply</span><span class="c0">&nbsp;</span><span class="c2">where</span><span class="c0">&nbsp;major = </span><span class="c22">&#39;CS&#39;</span><span class="c0">)) </span><span class="c2">as</span><span class="c0">&nbsp;NonCS;<br><br></span><span class="c3">/*** Same using subqueries in Select ***/</span><span class="c0"><br><br></span><span class="c2">select</span><span class="c0">&nbsp;(</span><span class="c2">select</span><span class="c0">&nbsp;</span><span class="c2">avg</span><span class="c0">(GPA) </span><span class="c2">as</span><span class="c0">&nbsp;avgGPA </span><span class="c2">from</span><span class="c0">&nbsp;Student<br> &nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c2">where</span><span class="c0">&nbsp;</span><span class="c2">sID</span><span class="c0">&nbsp;</span><span class="c2">in</span><span class="c0">&nbsp;(<br> &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c2">select</span><span class="c0">&nbsp;</span><span class="c2">sID</span><span class="c0">&nbsp;</span><span class="c2">from</span><span class="c0">&nbsp;</span><span class="c2">Apply</span><span class="c0">&nbsp;</span><span class="c2">where</span><span class="c0">&nbsp;major = </span><span class="c22">&#39;CS&#39;</span><span class="c0">)) -<br> &nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(</span><span class="c2">select</span><span class="c0">&nbsp;</span><span class="c2">avg</span><span class="c0">(GPA) </span><span class="c2">as</span><span class="c0">&nbsp;avgGPA </span><span class="c2">from</span><span class="c0">&nbsp;Student<br> &nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c2">where</span><span class="c0">&nbsp;</span><span class="c2">sID</span><span class="c0">&nbsp;</span><span class="c2">not</span><span class="c0">&nbsp;</span><span class="c2">in</span><span class="c0">&nbsp;(<br> &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c2">select</span><span class="c0">&nbsp;</span><span class="c2">sID</span><span class="c0">&nbsp;</span><span class="c2">from</span><span class="c0">&nbsp;</span><span class="c2">Apply</span><span class="c0">&nbsp;</span><span class="c2">where</span><span class="c0">&nbsp;major = </span><span class="c22">&#39;CS&#39;</span><span class="c0">)) </span><span class="c2">as</span><span class="c0">&nbsp;d<br></span><span class="c2">from</span><span class="c0">&nbsp;Student;<br><br></span><span class="c3">/*** Remove duplicates ***/</span><span class="c0"><br><br></span><span class="c2">select</span><span class="c0">&nbsp;</span><span class="c2">distinct</span><span class="c0">&nbsp;(</span><span class="c2">select</span><span class="c0">&nbsp;</span><span class="c2">avg</span><span class="c0">(GPA) </span><span class="c2">as</span><span class="c0">&nbsp;avgGPA </span><span class="c2">from</span><span class="c0">&nbsp;Student<br> &nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c2">where</span><span class="c0">&nbsp;</span><span class="c2">sID</span><span class="c0">&nbsp;</span><span class="c2">in</span><span class="c0">&nbsp;(<br> &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c2">select</span><span class="c0">&nbsp;</span><span class="c2">sID</span><span class="c0">&nbsp;</span><span class="c2">from</span><span class="c0">&nbsp;</span><span class="c2">Apply</span><span class="c0">&nbsp;</span><span class="c2">where</span><span class="c0">&nbsp;major = </span><span class="c22">&#39;CS&#39;</span><span class="c0">)) -<br> &nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(</span><span class="c2">select</span><span class="c0">&nbsp;</span><span class="c2">avg</span><span class="c0">(GPA) </span><span class="c2">as</span><span class="c0">&nbsp;avgGPA </span><span class="c2">from</span><span class="c0">&nbsp;Student<br> &nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c2">where</span><span class="c0">&nbsp;</span><span class="c2">sID</span><span class="c0">&nbsp;</span><span class="c2">not</span><span class="c0">&nbsp;</span><span class="c2">in</span><span class="c0">&nbsp;(<br> &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c2">select</span><span class="c0">&nbsp;</span><span class="c2">sID</span><span class="c0">&nbsp;</span><span class="c2">from</span><span class="c0">&nbsp;</span><span class="c2">Apply</span><span class="c0">&nbsp;</span><span class="c2">where</span><span class="c0">&nbsp;major = </span><span class="c22">&#39;CS&#39;</span><span class="c0">)) </span><span class="c2">as</span><span class="c0">&nbsp;d<br></span><span class="c2">from</span><span class="c0">&nbsp;Student;<br><br></span><span class="c3">/**************************************************************<br> &nbsp;Number of applications to each college<br>**************************************************************/</span><span class="c0"><br><br></span><span class="c2">select</span><span class="c0">&nbsp;cName, </span><span class="c2">count</span><span class="c0">(*)<br></span><span class="c2">from</span><span class="c0">&nbsp;</span><span class="c2">Apply</span><span class="c0"><br></span><span class="c2">group</span><span class="c0">&nbsp;</span><span class="c2">by</span><span class="c0">&nbsp;cName;<br><br></span><span class="c3">/*** First do query to picture grouping ***/</span><span class="c0"><br><br></span><span class="c2">select</span><span class="c0">&nbsp;*<br></span><span class="c2">from</span><span class="c0">&nbsp;</span><span class="c2">Apply</span><span class="c0"><br></span><span class="c2">order</span><span class="c0">&nbsp;</span><span class="c2">by</span><span class="c0">&nbsp;cName;<br><br></span><span class="c3">/*** Now back to query we want ***/</span><span class="c0"><br><br></span><span class="c2">select</span><span class="c0">&nbsp;cName, </span><span class="c2">count</span><span class="c0">(*)<br></span><span class="c2">from</span><span class="c0">&nbsp;</span><span class="c2">Apply</span><span class="c0"><br></span><span class="c2">group</span><span class="c0">&nbsp;</span><span class="c2">by</span><span class="c0">&nbsp;cName;<br><br></span><span class="c3">/**************************************************************<br> &nbsp;College enrollments by state<br>**************************************************************/</span><span class="c0"><br><br></span><span class="c2">select</span><span class="c0">&nbsp;state, </span><span class="c2">sum</span><span class="c0">(enrollment)<br></span><span class="c2">from</span><span class="c0">&nbsp;College<br></span><span class="c2">group</span><span class="c0">&nbsp;</span><span class="c2">by</span><span class="c0">&nbsp;state;<br><br></span><span class="c3">/**************************************************************<br> &nbsp;Minimum + maximum GPAs of applicants to each college &amp; major<br>**************************************************************/</span><span class="c0"><br><br></span><span class="c2">select</span><span class="c0">&nbsp;cName, major, </span><span class="c2">min</span><span class="c0">(GPA), </span><span class="c2">max</span><span class="c0">(GPA)<br></span><span class="c2">from</span><span class="c0">&nbsp;Student, </span><span class="c2">Apply</span><span class="c0"><br></span><span class="c2">where</span><span class="c0">&nbsp;Student.sID = Apply.sID<br></span><span class="c2">group</span><span class="c0">&nbsp;</span><span class="c2">by</span><span class="c0">&nbsp;cName, major;<br><br></span><span class="c3">/*** First do query to picture grouping ***/</span><span class="c0"><br><br></span><span class="c2">select</span><span class="c0">&nbsp;cName, major, GPA<br></span><span class="c2">from</span><span class="c0">&nbsp;Student, </span><span class="c2">Apply</span><span class="c0"><br></span><span class="c2">where</span><span class="c0">&nbsp;Student.sID = Apply.sID<br></span><span class="c2">order</span><span class="c0">&nbsp;</span><span class="c2">by</span><span class="c0">&nbsp;cName, major;<br><br></span><span class="c3">/*** Now back to query we want ***/</span><span class="c0"><br><br></span><span class="c2">select</span><span class="c0">&nbsp;cName, major, </span><span class="c2">min</span><span class="c0">(GPA), </span><span class="c2">max</span><span class="c0">(GPA)<br></span><span class="c2">from</span><span class="c0">&nbsp;Student, </span><span class="c2">Apply</span><span class="c0"><br></span><span class="c2">where</span><span class="c0">&nbsp;Student.sID = Apply.sID<br></span><span class="c2">group</span><span class="c0">&nbsp;</span><span class="c2">by</span><span class="c0">&nbsp;cName, major;<br><br></span><span class="c3">/*** Widest spread ***/</span><span class="c0"><br><br></span><span class="c2">select</span><span class="c0">&nbsp;</span><span class="c2">max</span><span class="c0">(mx-mn)<br></span><span class="c2">from</span><span class="c0">&nbsp;(</span><span class="c2">select</span><span class="c0">&nbsp;cName, major, </span><span class="c2">min</span><span class="c0">(GPA) </span><span class="c2">as</span><span class="c0">&nbsp;mn, </span><span class="c2">max</span><span class="c0">(GPA) </span><span class="c2">as</span><span class="c0">&nbsp;mx<br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c2">from</span><span class="c0">&nbsp;Student, </span><span class="c2">Apply</span><span class="c0"><br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c2">where</span><span class="c0">&nbsp;Student.sID = Apply.sID<br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c2">group</span><span class="c0">&nbsp;</span><span class="c2">by</span><span class="c0">&nbsp;cName, major) M;<br><br></span><span class="c3">/**************************************************************<br> &nbsp;Number of colleges applied to by each student<br>**************************************************************/</span><span class="c0"><br><br></span><span class="c2">select</span><span class="c0">&nbsp;Student.sID, </span><span class="c2">count</span><span class="c0">(</span><span class="c2">distinct</span><span class="c0">&nbsp;cName)<br></span><span class="c2">from</span><span class="c0">&nbsp;Student, </span><span class="c2">Apply</span><span class="c0"><br></span><span class="c2">where</span><span class="c0">&nbsp;Student.sID = Apply.sID<br></span><span class="c2">group</span><span class="c0">&nbsp;</span><span class="c2">by</span><span class="c0">&nbsp;Student.sID;<br><br></span><span class="c3">/*** First do query to picture grouping ***/</span><span class="c0"><br><br></span><span class="c2">select</span><span class="c0">&nbsp;Student.sID, cName<br></span><span class="c2">from</span><span class="c0">&nbsp;Student, </span><span class="c2">Apply</span><span class="c0"><br></span><span class="c2">where</span><span class="c0">&nbsp;Student.sID = Apply.sID<br></span><span class="c2">order</span><span class="c0">&nbsp;</span><span class="c2">by</span><span class="c0">&nbsp;Student.sID;<br><br></span><span class="c3">/*** Now back to query we want ***/</span><span class="c0"><br><br></span><span class="c2">select</span><span class="c0">&nbsp;Student.sID, </span><span class="c2">count</span><span class="c0">(</span><span class="c2">distinct</span><span class="c0">&nbsp;cName)<br></span><span class="c2">from</span><span class="c0">&nbsp;Student, </span><span class="c2">Apply</span><span class="c0"><br></span><span class="c2">where</span><span class="c0">&nbsp;Student.sID = Apply.sID<br></span><span class="c2">group</span><span class="c0">&nbsp;</span><span class="c2">by</span><span class="c0">&nbsp;Student.sID;<br><br></span><span class="c3">/*** Add student name ***/</span><span class="c0"><br><br></span><span class="c2">select</span><span class="c0">&nbsp;Student.sID, sName, </span><span class="c2">count</span><span class="c0">(</span><span class="c2">distinct</span><span class="c0">&nbsp;cName)<br></span><span class="c2">from</span><span class="c0">&nbsp;Student, </span><span class="c2">Apply</span><span class="c0"><br></span><span class="c2">where</span><span class="c0">&nbsp;Student.sID = Apply.sID<br></span><span class="c2">group</span><span class="c0">&nbsp;</span><span class="c2">by</span><span class="c0">&nbsp;Student.sID;<br><br></span><span class="c3">/*** First do query to picture grouping ***/</span><span class="c0"><br><br></span><span class="c2">select</span><span class="c0">&nbsp;Student.sID, sName, cName<br></span><span class="c2">from</span><span class="c0">&nbsp;Student, </span><span class="c2">Apply</span><span class="c0"><br></span><span class="c2">where</span><span class="c0">&nbsp;Student.sID = Apply.sID<br></span><span class="c2">order</span><span class="c0">&nbsp;</span><span class="c2">by</span><span class="c0">&nbsp;Student.sID;<br><br></span><span class="c3">/*** Now back to query we want ***/</span><span class="c0"><br><br></span><span class="c2">select</span><span class="c0">&nbsp;Student.sID, sName, </span><span class="c2">count</span><span class="c0">(</span><span class="c2">distinct</span><span class="c0">&nbsp;cName)<br></span><span class="c2">from</span><span class="c0">&nbsp;Student, </span><span class="c2">Apply</span><span class="c0"><br></span><span class="c2">where</span><span class="c0">&nbsp;Student.sID = Apply.sID<br></span><span class="c2">group</span><span class="c0">&nbsp;</span><span class="c2">by</span><span class="c0">&nbsp;Student.sID;<br><br></span><span class="c3">/*** Add college (shouldn&#39;t work but does in some systems) ***/</span><span class="c0"><br><br></span><span class="c2">select</span><span class="c0">&nbsp;Student.sID, sName, </span><span class="c2">count</span><span class="c0">(</span><span class="c2">distinct</span><span class="c0">&nbsp;cName), cName<br></span><span class="c2">from</span><span class="c0">&nbsp;Student, </span><span class="c2">Apply</span><span class="c0"><br></span><span class="c2">where</span><span class="c0">&nbsp;Student.sID = Apply.sID<br></span><span class="c2">group</span><span class="c0">&nbsp;</span><span class="c2">by</span><span class="c0">&nbsp;Student.sID;<br><br></span><span class="c3">/*** Back to query to picture grouping ***/</span><span class="c0"><br><br></span><span class="c2">select</span><span class="c0">&nbsp;Student.sID, sName, cName<br></span><span class="c2">from</span><span class="c0">&nbsp;Student, </span><span class="c2">Apply</span><span class="c0"><br></span><span class="c2">where</span><span class="c0">&nbsp;Student.sID = Apply.sID<br></span><span class="c2">order</span><span class="c0">&nbsp;</span><span class="c2">by</span><span class="c0">&nbsp;Student.sID;<br><br></span><span class="c3">/**************************************************************<br> &nbsp;Number of colleges applied to by each student, including<br> &nbsp;0 for those who applied nowhere<br>**************************************************************/</span><span class="c0"><br><br></span><span class="c2">select</span><span class="c0">&nbsp;Student.sID, </span><span class="c2">count</span><span class="c0">(</span><span class="c2">distinct</span><span class="c0">&nbsp;cName)<br></span><span class="c2">from</span><span class="c0">&nbsp;Student, </span><span class="c2">Apply</span><span class="c0"><br></span><span class="c2">where</span><span class="c0">&nbsp;Student.sID = Apply.sID<br></span><span class="c2">group</span><span class="c0">&nbsp;</span><span class="c2">by</span><span class="c0">&nbsp;Student.sID;<br><br></span><span class="c3">/*** Now add 0 counts ***/</span><span class="c0"><br><br></span><span class="c2">select</span><span class="c0">&nbsp;Student.sID, </span><span class="c2">count</span><span class="c0">(</span><span class="c2">distinct</span><span class="c0">&nbsp;cName)<br></span><span class="c2">from</span><span class="c0">&nbsp;Student, </span><span class="c2">Apply</span><span class="c0"><br></span><span class="c2">where</span><span class="c0">&nbsp;Student.sID = Apply.sID<br></span><span class="c2">group</span><span class="c0">&nbsp;</span><span class="c2">by</span><span class="c0">&nbsp;Student.sID<br></span><span class="c2">union</span><span class="c0"><br></span><span class="c2">select</span><span class="c0">&nbsp;</span><span class="c2">sID</span><span class="c0">, 0<br></span><span class="c2">from</span><span class="c0">&nbsp;Student<br></span><span class="c2">where</span><span class="c0">&nbsp;</span><span class="c2">sID</span><span class="c0">&nbsp;</span><span class="c2">not</span><span class="c0">&nbsp;</span><span class="c2">in</span><span class="c0">&nbsp;(</span><span class="c2">select</span><span class="c0">&nbsp;</span><span class="c2">sID</span><span class="c0">&nbsp;</span><span class="c2">from</span><span class="c0">&nbsp;</span><span class="c2">Apply</span><span class="c0">);<br><br></span><span class="c3">/**************************************************************<br> &nbsp;Colleges with fewer than 5 applications<br>**************************************************************/</span><span class="c0"><br><br></span><span class="c2">select</span><span class="c0">&nbsp;cName<br></span><span class="c2">from</span><span class="c0">&nbsp;</span><span class="c2">Apply</span><span class="c0"><br></span><span class="c2">group</span><span class="c0">&nbsp;</span><span class="c2">by</span><span class="c0">&nbsp;cName<br></span><span class="c2">having</span><span class="c0">&nbsp;</span><span class="c2">count</span><span class="c0">(*) &lt; 5;<br><br></span><span class="c3">/*** Same query without Group-by or Having ***/</span><span class="c0"><br><br></span><span class="c2">select</span><span class="c0">&nbsp;cName<br></span><span class="c2">from</span><span class="c0">&nbsp;</span><span class="c2">Apply</span><span class="c0">&nbsp;A1<br></span><span class="c2">where</span><span class="c0">&nbsp;5 &gt; (</span><span class="c2">select</span><span class="c0">&nbsp;</span><span class="c2">count</span><span class="c0">(*) </span><span class="c2">from</span><span class="c0">&nbsp;</span><span class="c2">Apply</span><span class="c0">&nbsp;A2 </span><span class="c2">where</span><span class="c0">&nbsp;A2.cName = A1.cName);<br><br></span><span class="c3">/*** Remove duplicates ***/</span><span class="c0"><br><br></span><span class="c2">select</span><span class="c0">&nbsp;</span><span class="c2">distinct</span><span class="c0">&nbsp;cName<br></span><span class="c2">from</span><span class="c0">&nbsp;</span><span class="c2">Apply</span><span class="c0">&nbsp;A1<br></span><span class="c2">where</span><span class="c0">&nbsp;5 &gt; (</span><span class="c2">select</span><span class="c0">&nbsp;</span><span class="c2">count</span><span class="c0">(*) </span><span class="c2">from</span><span class="c0">&nbsp;</span><span class="c2">Apply</span><span class="c0">&nbsp;A2 </span><span class="c2">where</span><span class="c0">&nbsp;A2.cName = A1.cName);<br><br></span><span class="c3">/*** Back to original Group-by form, fewer than 5 applicants ***/</span><span class="c0"><br><br></span><span class="c2">select</span><span class="c0">&nbsp;cName<br></span><span class="c2">from</span><span class="c0">&nbsp;</span><span class="c2">Apply</span><span class="c0"><br></span><span class="c2">group</span><span class="c0">&nbsp;</span><span class="c2">by</span><span class="c0">&nbsp;cName<br></span><span class="c2">having</span><span class="c0">&nbsp;</span><span class="c2">count</span><span class="c0">(</span><span class="c2">distinct</span><span class="c0">&nbsp;</span><span class="c2">sID</span><span class="c0">) &lt; 5;<br><br></span><span class="c3">/**************************************************************<br> &nbsp;Majors whose applicant&#39;s maximum GPA is below the average<br>**************************************************************/</span><span class="c0"><br><br></span><span class="c2">select</span><span class="c0">&nbsp;major<br></span><span class="c2">from</span><span class="c0">&nbsp;Student, </span><span class="c2">Apply</span><span class="c0"><br></span><span class="c2">where</span><span class="c0">&nbsp;Student.sID = Apply.sID<br></span><span class="c2">group</span><span class="c0">&nbsp;</span><span class="c2">by</span><span class="c0">&nbsp;major<br></span><span class="c2">having</span><span class="c0">&nbsp;</span><span class="c2">max</span><span class="c0">(GPA) &lt; (</span><span class="c2">select</span><span class="c0">&nbsp;</span><span class="c2">avg</span><span class="c0">(GPA) </span><span class="c2">from</span><span class="c0">&nbsp;Student);</span></p></td></tr></tbody></table><h2 class="c24" id="h.6bi4xhb5fd49"><span class="c40 c36 c41">NULL values</span></h2><a id="t.2d9b93c86f25491f3050659bc961fc25d227a04d"></a><a id="t.6"></a><table class="c32"><tbody><tr class="c33"><td class="c31" colspan="1" rowspan="1"><p class="c18"><span class="c3">/**************************************************************<br> &nbsp;NULL VALUES<br> &nbsp;Works for SQLite, MySQL, Postgres<br>**************************************************************/</span><span class="c0"><br><br></span><span class="c2">insert</span><span class="c0">&nbsp;</span><span class="c2">into</span><span class="c0">&nbsp;Student </span><span class="c2">values</span><span class="c0">&nbsp;(432, </span><span class="c22">&#39;Kevin&#39;</span><span class="c0">, </span><span class="c35">null</span><span class="c0">, 1500);<br></span><span class="c2">insert</span><span class="c0">&nbsp;</span><span class="c2">into</span><span class="c0">&nbsp;Student </span><span class="c2">values</span><span class="c0">&nbsp;(321, </span><span class="c22">&#39;Lori&#39;</span><span class="c0">, </span><span class="c35">null</span><span class="c0">, 2500);<br><br></span><span class="c2">select</span><span class="c0">&nbsp;* </span><span class="c2">from</span><span class="c0">&nbsp;Student;<br><br></span><span class="c3">/**************************************************************<br> &nbsp;All students with high GPA<br>**************************************************************/</span><span class="c0"><br><br></span><span class="c2">select</span><span class="c0">&nbsp;</span><span class="c2">sID</span><span class="c0">, sName, GPA<br></span><span class="c2">from</span><span class="c0">&nbsp;Student<br></span><span class="c2">where</span><span class="c0">&nbsp;GPA &gt; 3.5;<br><br></span><span class="c3">/*** Now low GPA ***/</span><span class="c0"><br><br></span><span class="c2">select</span><span class="c0">&nbsp;</span><span class="c2">sID</span><span class="c0">, sName, GPA<br></span><span class="c2">from</span><span class="c0">&nbsp;Student<br></span><span class="c2">where</span><span class="c0">&nbsp;GPA &lt;= 3.5;<br><br></span><span class="c3">/*** Now either high or low GPA ***/</span><span class="c0"><br><br></span><span class="c2">select</span><span class="c0">&nbsp;</span><span class="c2">sID</span><span class="c0">, sName, GPA<br></span><span class="c2">from</span><span class="c0">&nbsp;Student<br></span><span class="c2">where</span><span class="c0">&nbsp;GPA &gt; 3.5 </span><span class="c2">or</span><span class="c0">&nbsp;GPA &lt;= 3.5;<br><br></span><span class="c3">/*** Now all students ***/</span><span class="c0"><br><br></span><span class="c2">select</span><span class="c0">&nbsp;</span><span class="c2">sID</span><span class="c0">, sName </span><span class="c2">from</span><span class="c0">&nbsp;Student;<br><br></span><span class="c3">/*** Now use &#39;is null&#39; ***/</span><span class="c0"><br><br></span><span class="c2">select</span><span class="c0">&nbsp;</span><span class="c2">sID</span><span class="c0">, sName, GPA<br></span><span class="c2">from</span><span class="c0">&nbsp;Student<br></span><span class="c2">where</span><span class="c0">&nbsp;GPA &gt; 3.5 </span><span class="c2">or</span><span class="c0">&nbsp;GPA &lt;= 3.5 </span><span class="c2">or</span><span class="c0">&nbsp;GPA </span><span class="c2">is</span><span class="c0">&nbsp;</span><span class="c35">null</span><span class="c0">;<br><br></span><span class="c3">/**************************************************************<br> &nbsp;All students with high GPA or small HS<br>**************************************************************/</span><span class="c0"><br><br></span><span class="c2">select</span><span class="c0">&nbsp;</span><span class="c2">sID</span><span class="c0">, sName, GPA, sizeHS<br></span><span class="c2">from</span><span class="c0">&nbsp;Student<br></span><span class="c2">where</span><span class="c0">&nbsp;GPA &gt; 3.5 </span><span class="c2">or</span><span class="c0">&nbsp;sizeHS &lt; 1600;<br><br></span><span class="c3">/*** Add large HS ***/</span><span class="c0"><br><br></span><span class="c2">select</span><span class="c0">&nbsp;</span><span class="c2">sID</span><span class="c0">, sName, GPA, sizeHS<br></span><span class="c2">from</span><span class="c0">&nbsp;Student<br></span><span class="c2">where</span><span class="c0">&nbsp;GPA &gt; 3.5 </span><span class="c2">or</span><span class="c0">&nbsp;sizeHS &lt; 1600 </span><span class="c2">or</span><span class="c0">&nbsp;sizeHS &gt;= 1600;<br><br></span><span class="c3">/**************************************************************<br> &nbsp;Number of students with non-null GPAs<br>**************************************************************/</span><span class="c0"><br><br></span><span class="c2">select</span><span class="c0">&nbsp;</span><span class="c2">count</span><span class="c0">(*)<br></span><span class="c2">from</span><span class="c0">&nbsp;Student<br></span><span class="c2">where</span><span class="c0">&nbsp;GPA </span><span class="c2">is</span><span class="c0">&nbsp;</span><span class="c2">not</span><span class="c0">&nbsp;</span><span class="c35">null</span><span class="c0">;<br><br></span><span class="c3">/*** Number of distinct GPA values among them ***/</span><span class="c0"><br><br></span><span class="c2">select</span><span class="c0">&nbsp;</span><span class="c2">count</span><span class="c0">(</span><span class="c2">distinct</span><span class="c0">&nbsp;GPA)<br></span><span class="c2">from</span><span class="c0">&nbsp;Student<br></span><span class="c2">where</span><span class="c0">&nbsp;GPA </span><span class="c2">is</span><span class="c0">&nbsp;</span><span class="c2">not</span><span class="c0">&nbsp;</span><span class="c35">null</span><span class="c0">;<br><br></span><span class="c3">/*** Drop non-null condition ***/</span><span class="c0"><br><br></span><span class="c2">select</span><span class="c0">&nbsp;</span><span class="c2">count</span><span class="c0">(</span><span class="c2">distinct</span><span class="c0">&nbsp;GPA)<br></span><span class="c2">from</span><span class="c0">&nbsp;Student;<br><br></span><span class="c3">/*** Drop count ***/</span><span class="c0"><br><br></span><span class="c2">select</span><span class="c0">&nbsp;</span><span class="c2">distinct</span><span class="c0">&nbsp;GPA<br></span><span class="c2">from</span><span class="c0">&nbsp;Student;</span></p></td></tr></tbody></table><h2 class="c24" id="h.wd1297enb0vd"><span class="c40 c36 c41">Data Modification Statements</span></h2><a id="t.941165100f022ecc14bb82f138fe9d4d4bf555be"></a><a id="t.7"></a><table class="c32"><tbody><tr class="c33"><td class="c31" colspan="1" rowspan="1"><p class="c18"><span class="c3">/**************************************************************<br> &nbsp;INSERT, DELETE, AND UPDATE STATEMENTS<br> &nbsp;Works for Postgres<br> &nbsp;SQLite doesn&#39;t support All<br> &nbsp;MySQL doesn&#39;t allow deletes from Apply with subquery on<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Apply (then College deletion behaves differently)<br>**************************************************************/</span><span class="c0"><br><br></span><span class="c3">/**************************************************************<br> &nbsp;Insert new college<br>**************************************************************/</span><span class="c0"><br><br></span><span class="c2">insert</span><span class="c0">&nbsp;</span><span class="c2">into</span><span class="c0">&nbsp;College </span><span class="c2">values</span><span class="c0">&nbsp;(</span><span class="c22">&#39;Carnegie Mellon&#39;</span><span class="c0">, </span><span class="c22">&#39;PA&#39;</span><span class="c0">, 11500);<br><br></span><span class="c3">/**************************************************************<br> &nbsp;Have all students who didn&#39;t apply anywhere apply to<br> &nbsp;CS at Carnegie Mellon<br>**************************************************************/</span><span class="c0"><br><br></span><span class="c3">/*** First see who will be inserted ***/</span><span class="c0"><br><br></span><span class="c2">select</span><span class="c0">&nbsp;*<br></span><span class="c2">from</span><span class="c0">&nbsp;Student<br></span><span class="c2">where</span><span class="c0">&nbsp;</span><span class="c2">sID</span><span class="c0">&nbsp;</span><span class="c2">not</span><span class="c0">&nbsp;</span><span class="c2">in</span><span class="c0">&nbsp;(</span><span class="c2">select</span><span class="c0">&nbsp;</span><span class="c2">sID</span><span class="c0">&nbsp;</span><span class="c2">from</span><span class="c0">&nbsp;</span><span class="c2">Apply</span><span class="c0">);<br><br></span><span class="c3">/*** Then insert them ***/</span><span class="c0"><br><br></span><span class="c2">insert</span><span class="c0">&nbsp;</span><span class="c2">into</span><span class="c0">&nbsp;</span><span class="c2">Apply</span><span class="c0"><br> &nbsp;</span><span class="c2">select</span><span class="c0">&nbsp;</span><span class="c2">sID</span><span class="c0">, </span><span class="c22">&#39;Carnegie Mellon&#39;</span><span class="c0">, </span><span class="c22">&#39;CS&#39;</span><span class="c0">, </span><span class="c35">null</span><span class="c0"><br> &nbsp;</span><span class="c2">from</span><span class="c0">&nbsp;Student<br> &nbsp;</span><span class="c2">where</span><span class="c0">&nbsp;</span><span class="c2">sID</span><span class="c0">&nbsp;</span><span class="c2">not</span><span class="c0">&nbsp;</span><span class="c2">in</span><span class="c0">&nbsp;(</span><span class="c2">select</span><span class="c0">&nbsp;</span><span class="c2">sID</span><span class="c0">&nbsp;</span><span class="c2">from</span><span class="c0">&nbsp;</span><span class="c2">Apply</span><span class="c0">);<br><br></span><span class="c3">/*** Admit to Carnegie Mellon EE all students who were turned down<br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;in EE elsewhere ***/</span><span class="c0"><br><br></span><span class="c3">/*** First see who will be inserted ***/</span><span class="c0"><br><br></span><span class="c2">select</span><span class="c0">&nbsp;*<br></span><span class="c2">from</span><span class="c0">&nbsp;Student<br></span><span class="c2">where</span><span class="c0">&nbsp;</span><span class="c2">sID</span><span class="c0">&nbsp;</span><span class="c2">in</span><span class="c0">&nbsp;(</span><span class="c2">select</span><span class="c0">&nbsp;</span><span class="c2">sID</span><span class="c0">&nbsp;</span><span class="c2">from</span><span class="c0">&nbsp;</span><span class="c2">Apply</span><span class="c0"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c2">where</span><span class="c0">&nbsp;major = </span><span class="c22">&#39;EE&#39;</span><span class="c0">&nbsp;</span><span class="c2">and</span><span class="c0">&nbsp;decision = </span><span class="c22">&#39;N&#39;</span><span class="c0">);<br><br></span><span class="c3">/*** Then insert them ***/</span><span class="c0"><br><br></span><span class="c2">insert</span><span class="c0">&nbsp;</span><span class="c2">into</span><span class="c0">&nbsp;</span><span class="c2">Apply</span><span class="c0"><br> &nbsp;</span><span class="c2">select</span><span class="c0">&nbsp;</span><span class="c2">sID</span><span class="c0">, </span><span class="c22">&#39;Carnegie Mellon&#39;</span><span class="c0">, </span><span class="c22">&#39;EE&#39;</span><span class="c0">, </span><span class="c22">&#39;Y&#39;</span><span class="c0"><br> &nbsp;</span><span class="c2">from</span><span class="c0">&nbsp;Student<br> &nbsp;</span><span class="c2">where</span><span class="c0">&nbsp;</span><span class="c2">sID</span><span class="c0">&nbsp;</span><span class="c2">in</span><span class="c0">&nbsp;(</span><span class="c2">select</span><span class="c0">&nbsp;</span><span class="c2">sID</span><span class="c0">&nbsp;</span><span class="c2">from</span><span class="c0">&nbsp;</span><span class="c2">Apply</span><span class="c0"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c2">where</span><span class="c0">&nbsp;major = </span><span class="c22">&#39;EE&#39;</span><span class="c0">&nbsp;</span><span class="c2">and</span><span class="c0">&nbsp;decision = </span><span class="c22">&#39;N&#39;</span><span class="c0">);<br><br></span><span class="c3">/**************************************************************<br> &nbsp;Delete all students who applied to more than two different<br> &nbsp;majors<br>**************************************************************/</span><span class="c0"><br><br></span><span class="c3">/*** First see who will be deleted ***/</span><span class="c0"><br><br></span><span class="c2">select</span><span class="c0">&nbsp;</span><span class="c2">sID</span><span class="c0">, </span><span class="c2">count</span><span class="c0">(</span><span class="c2">distinct</span><span class="c0">&nbsp;major)<br></span><span class="c2">from</span><span class="c0">&nbsp;</span><span class="c2">Apply</span><span class="c0"><br></span><span class="c2">group</span><span class="c0">&nbsp;</span><span class="c2">by</span><span class="c0">&nbsp;</span><span class="c2">sID</span><span class="c0"><br></span><span class="c2">having</span><span class="c0">&nbsp;</span><span class="c2">count</span><span class="c0">(</span><span class="c2">distinct</span><span class="c0">&nbsp;major) &gt; 2;<br><br></span><span class="c3">/*** Then delete them ***/</span><span class="c0"><br><br></span><span class="c2">delete</span><span class="c0">&nbsp;</span><span class="c2">from</span><span class="c0">&nbsp;Student<br></span><span class="c2">where</span><span class="c0">&nbsp;</span><span class="c2">sID</span><span class="c0">&nbsp;</span><span class="c2">in</span><span class="c0"><br> &nbsp;(</span><span class="c2">select</span><span class="c0">&nbsp;</span><span class="c2">sID</span><span class="c0"><br> &nbsp; </span><span class="c2">from</span><span class="c0">&nbsp;</span><span class="c2">Apply</span><span class="c0"><br> &nbsp; </span><span class="c2">group</span><span class="c0">&nbsp;</span><span class="c2">by</span><span class="c0">&nbsp;</span><span class="c2">sID</span><span class="c0"><br> &nbsp; </span><span class="c2">having</span><span class="c0">&nbsp;</span><span class="c2">count</span><span class="c0">(</span><span class="c2">distinct</span><span class="c0">&nbsp;major) &gt; 2);<br><br></span><span class="c3">/*** Delete same ones from Apply ***/</span><span class="c0"><br></span><span class="c3">/*** NOTE SOME SYSTEMS DISALLOW &nbsp;***/</span><span class="c0"><br><br></span><span class="c2">delete</span><span class="c0">&nbsp;</span><span class="c2">from</span><span class="c0">&nbsp;</span><span class="c2">Apply</span><span class="c0"><br></span><span class="c2">where</span><span class="c0">&nbsp;</span><span class="c2">sID</span><span class="c0">&nbsp;</span><span class="c2">in</span><span class="c0"><br> &nbsp;(</span><span class="c2">select</span><span class="c0">&nbsp;</span><span class="c2">sID</span><span class="c0"><br> &nbsp; </span><span class="c2">from</span><span class="c0">&nbsp;</span><span class="c2">Apply</span><span class="c0"><br> &nbsp; </span><span class="c2">group</span><span class="c0">&nbsp;</span><span class="c2">by</span><span class="c0">&nbsp;</span><span class="c2">sID</span><span class="c0"><br> &nbsp; </span><span class="c2">having</span><span class="c0">&nbsp;</span><span class="c2">count</span><span class="c0">(</span><span class="c2">distinct</span><span class="c0">&nbsp;major) &gt; 2);<br><br></span><span class="c3">/**************************************************************<br> &nbsp;Delete colleges with no CS applicants<br>**************************************************************/</span><span class="c0"><br><br></span><span class="c3">/*** First see who will be deleted ***/</span><span class="c0"><br><br></span><span class="c2">select</span><span class="c0">&nbsp;* </span><span class="c2">from</span><span class="c0">&nbsp;College<br></span><span class="c2">where</span><span class="c0">&nbsp;cName </span><span class="c2">not</span><span class="c0">&nbsp;</span><span class="c2">in</span><span class="c0">&nbsp;(</span><span class="c2">select</span><span class="c0">&nbsp;cName </span><span class="c2">from</span><span class="c0">&nbsp;</span><span class="c2">Apply</span><span class="c0">&nbsp;</span><span class="c2">where</span><span class="c0">&nbsp;major = </span><span class="c22">&#39;CS&#39;</span><span class="c0">);<br><br></span><span class="c3">/*** Then delete them ***/</span><span class="c0"><br><br></span><span class="c2">delete</span><span class="c0">&nbsp;</span><span class="c2">from</span><span class="c0">&nbsp;College<br></span><span class="c2">where</span><span class="c0">&nbsp;cName </span><span class="c2">not</span><span class="c0">&nbsp;</span><span class="c2">in</span><span class="c0">&nbsp;(</span><span class="c2">select</span><span class="c0">&nbsp;cName </span><span class="c2">from</span><span class="c0">&nbsp;</span><span class="c2">Apply</span><span class="c0">&nbsp;</span><span class="c2">where</span><span class="c0">&nbsp;major = </span><span class="c22">&#39;CS&#39;</span><span class="c0">);<br><br></span><span class="c3">/**************************************************************<br> &nbsp;Accept applicants to Carnegie Mellon with GPA &lt; 3.6 but turn<br> &nbsp;them into economics majors<br>**************************************************************/</span><span class="c0"><br><br></span><span class="c3">/*** First see who will be updated ***/</span><span class="c0"><br><br></span><span class="c2">select</span><span class="c0">&nbsp;* </span><span class="c2">from</span><span class="c0">&nbsp;</span><span class="c2">Apply</span><span class="c0"><br></span><span class="c2">where</span><span class="c0">&nbsp;cName = </span><span class="c22">&#39;Carnegie Mellon&#39;</span><span class="c0"><br> &nbsp;</span><span class="c2">and</span><span class="c0">&nbsp;</span><span class="c2">sID</span><span class="c0">&nbsp;</span><span class="c2">in</span><span class="c0">&nbsp;(</span><span class="c2">select</span><span class="c0">&nbsp;</span><span class="c2">sID</span><span class="c0">&nbsp;</span><span class="c2">from</span><span class="c0">&nbsp;Student </span><span class="c2">where</span><span class="c0">&nbsp;GPA &lt; 3.6);<br><br></span><span class="c3">/*** Then update them ***/</span><span class="c0"><br><br></span><span class="c2">update</span><span class="c0">&nbsp;</span><span class="c2">Apply</span><span class="c0"><br></span><span class="c2">set</span><span class="c0">&nbsp;decision = </span><span class="c22">&#39;Y&#39;</span><span class="c0">, major = </span><span class="c22">&#39;economics&#39;</span><span class="c0"><br></span><span class="c2">where</span><span class="c0">&nbsp;cName = </span><span class="c22">&#39;Carnegie Mellon&#39;</span><span class="c0"><br> &nbsp;</span><span class="c2">and</span><span class="c0">&nbsp;</span><span class="c2">sID</span><span class="c0">&nbsp;</span><span class="c2">in</span><span class="c0">&nbsp;(</span><span class="c2">select</span><span class="c0">&nbsp;</span><span class="c2">sID</span><span class="c0">&nbsp;</span><span class="c2">from</span><span class="c0">&nbsp;Student </span><span class="c2">where</span><span class="c0">&nbsp;GPA &lt; 3.6);<br><br></span><span class="c3">/**************************************************************<br> &nbsp;Turn the highest-GPA EE applicant into a CSE applicant<br>**************************************************************/</span><span class="c0"><br><br></span><span class="c3">/*** First see who will be updated ***/</span><span class="c0"><br><br></span><span class="c2">select</span><span class="c0">&nbsp;* </span><span class="c2">from</span><span class="c0">&nbsp;</span><span class="c2">Apply</span><span class="c0"><br></span><span class="c2">where</span><span class="c0">&nbsp;major = </span><span class="c22">&#39;EE&#39;</span><span class="c0"><br> &nbsp;</span><span class="c2">and</span><span class="c0">&nbsp;</span><span class="c2">sID</span><span class="c0">&nbsp;</span><span class="c2">in</span><span class="c0"><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(</span><span class="c2">select</span><span class="c0">&nbsp;</span><span class="c2">sID</span><span class="c0">&nbsp;</span><span class="c2">from</span><span class="c0">&nbsp;Student<br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c2">where</span><span class="c0">&nbsp;GPA &gt;= all<br> &nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(</span><span class="c2">select</span><span class="c0">&nbsp;GPA </span><span class="c2">from</span><span class="c0">&nbsp;Student<br> &nbsp; &nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c2">where</span><span class="c0">&nbsp;</span><span class="c2">sID</span><span class="c0">&nbsp;</span><span class="c2">in</span><span class="c0">&nbsp;(</span><span class="c2">select</span><span class="c0">&nbsp;</span><span class="c2">sID</span><span class="c0">&nbsp;</span><span class="c2">from</span><span class="c0">&nbsp;</span><span class="c2">Apply</span><span class="c0">&nbsp;</span><span class="c2">where</span><span class="c0">&nbsp;major = </span><span class="c22">&#39;EE&#39;</span><span class="c0">)));<br><br></span><span class="c3">/*** Then update them ***/</span><span class="c0"><br><br></span><span class="c2">update</span><span class="c0">&nbsp;</span><span class="c2">Apply</span><span class="c0"><br></span><span class="c2">set</span><span class="c0">&nbsp;major = </span><span class="c22">&#39;CSE&#39;</span><span class="c0"><br></span><span class="c2">where</span><span class="c0">&nbsp;major = </span><span class="c22">&#39;EE&#39;</span><span class="c0"><br> &nbsp;</span><span class="c2">and</span><span class="c0">&nbsp;</span><span class="c2">sID</span><span class="c0">&nbsp;</span><span class="c2">in</span><span class="c0"><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(</span><span class="c2">select</span><span class="c0">&nbsp;</span><span class="c2">sID</span><span class="c0">&nbsp;</span><span class="c2">from</span><span class="c0">&nbsp;Student<br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c2">where</span><span class="c0">&nbsp;GPA &gt;= all<br> &nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(</span><span class="c2">select</span><span class="c0">&nbsp;GPA </span><span class="c2">from</span><span class="c0">&nbsp;Student<br> &nbsp; &nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c2">where</span><span class="c0">&nbsp;</span><span class="c2">sID</span><span class="c0">&nbsp;</span><span class="c2">in</span><span class="c0">&nbsp;(</span><span class="c2">select</span><span class="c0">&nbsp;</span><span class="c2">sID</span><span class="c0">&nbsp;</span><span class="c2">from</span><span class="c0">&nbsp;</span><span class="c2">Apply</span><span class="c0">&nbsp;</span><span class="c2">where</span><span class="c0">&nbsp;major = </span><span class="c22">&#39;EE&#39;</span><span class="c0">)));<br><br></span><span class="c3">/**************************************************************<br> &nbsp;Give everyone the highest GPA and smallest HS<br>**************************************************************/</span><span class="c0"><br><br></span><span class="c2">update</span><span class="c0">&nbsp;Student<br></span><span class="c2">set</span><span class="c0">&nbsp;GPA = (</span><span class="c2">select</span><span class="c0">&nbsp;</span><span class="c2">max</span><span class="c0">(GPA) </span><span class="c2">from</span><span class="c0">&nbsp;Student),<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sizeHS = (</span><span class="c2">select</span><span class="c0">&nbsp;</span><span class="c2">min</span><span class="c0">(sizeHS) </span><span class="c2">from</span><span class="c0">&nbsp;Student);<br><br></span><span class="c3">/**************************************************************<br> &nbsp;Accept everyone<br>**************************************************************/</span><span class="c0"><br><br></span><span class="c2">update</span><span class="c0">&nbsp;</span><span class="c2">Apply</span><span class="c0"><br></span><span class="c2">set</span><span class="c0">&nbsp;decision = </span><span class="c22">&#39;Y&#39;</span><span class="c0">;</span></p></td></tr></tbody></table><h1 class="c72" id="h.fbqmi1gelk2u"><span class="c40 c36 c46">7.1 Relational Design Theory</span></h1><ul class="c8 lst-kix_a9wgeonm4abr-0 start"><li class="c10 li-bullet-0"><span class="c4">Now the reality is that </span></li></ul><ul class="c8 lst-kix_a9wgeonm4abr-1 start"><li class="c6 li-bullet-0"><span>people often use </span><span class="c1">higher level tools to design</span><span class="c4">&nbsp;relational databases and don&#39;t design the schemas directly themselves. </span></li><li class="c6 li-bullet-0"><span>But some designers do </span><span class="c1">go straight to relations</span><span class="c4">, </span></li></ul><ul class="c8 lst-kix_a9wgeonm4abr-0"><li class="c10 li-bullet-0"><span>and furthermore, it&#39;s </span><span class="c1">useful to understand why the relations that are produced by design tools are what they are</span><span class="c4">. </span></li><li class="c10 li-bullet-0"><span>Furthermore, from an academic point of view, it turns out there&#39;s a very nice </span><span class="c1">theory for relational </span><span class="c1">data base</span><span class="c1">&nbsp;design</span><span class="c4">. </span></li></ul><h2 class="c24" id="h.6ww70690hovl"><span class="c40 c36 c41">Design Anomalies</span></h2><ul class="c8 lst-kix_a9wgeonm4abr-0"><li class="c10 li-bullet-0"><span>So let&#39;s consider the process of designing the schema for our database about </span><span class="c20">students applying to colleges</span><span class="c4">. Specifically, for a given student, let&#39;s suppose we have</span></li></ul><ul class="c8 lst-kix_a9wgeonm4abr-1 start"><li class="c6 li-bullet-0"><span class="c4">their social security number and </span></li><li class="c6 li-bullet-0"><span class="c4">their name, </span></li><li class="c6 li-bullet-0"><span class="c4">the colleges that student is applying to, </span></li><li class="c6 li-bullet-0"><span class="c4">the high schools they attended and </span></li><li class="c6 li-bullet-0"><span class="c4">what city those high schools were in, and </span></li><li class="c6 li-bullet-0"><span class="c4">the student&#39;s hobbies. </span></li></ul><ul class="c8 lst-kix_a9wgeonm4abr-0"><li class="c10 li-bullet-0"><span class="c9 c1">[Design 1:]</span><span>&nbsp;So if that&#39;s what we want we can create a </span><span class="c9 c1">single relation</span><span class="c4">&nbsp;called apply, that has one attribute for each of those pieces of information. Now let&#39;s take a look at how that database would be populated. </span></li></ul><ul class="c8 lst-kix_a9wgeonm4abr-1 start"><li class="c6 li-bullet-0"><span>Let&#39;s suppose that we have a student, Anne, with Social Security number 123, she went to 2 different high schools in Palo Alto, she plays tennis and the trumpet, and she&#39;s applying to Stanford, Berkeley, and MIT. So let&#39;s look at some of the tuples that we would be having in the apply relation to represent this information about Anne. So we&#39;ll have 123, Anne, her name, she&#39;s applying to Stanford, she went to Palo Alto High School, and that&#39;s in Palo Alto, and one of her hobbies is tennis. And then we also have 123 and she applied to Berkeley and went to Palo Alto High School in Palo Alto </span><span>and tennis</span><span>&nbsp;there as well. Of course she also has a tuple representing the fact that she&#39;s applying to </span><span>Berkeley and and</span><span>&nbsp;we&#39;ll stick with Palo Alto High School, and she played the trumpet. And as you can see we&#39;ll have more tuples, we&#39;ll have various Stanford and Berkeleys, we&#39;ll have some for her other high schools called Gunn High School also in Palo Alto, and so on. So if we think about it we will </span><span class="c1">need a total of 12 tuples</span><span class="c4">&nbsp;to represent this information about Ann. </span></li><li class="c6 li-bullet-0"><span>Now do we think that&#39;s a good design? I&#39;m going to argue no, </span><span class="c13 c1">it&#39;s not a good design</span><span class="c4">. </span></li><li class="c6 li-bullet-0"><span>There are several types of </span><span class="c5 c1">anomalies</span><span class="c4">&nbsp;in that design: </span></li></ul><ul class="c8 lst-kix_a9wgeonm4abr-2 start"><li class="c16 li-bullet-0"><span>First of all, we capture </span><span class="c1">information multiple times [</span><span class="c5 c1">redundancy</span><span class="c1">]</span><span class="c4">&nbsp;in that design, and I&#39;ll give some examples of that. </span></li></ul><ul class="c8 lst-kix_a9wgeonm4abr-3 start"><li class="c19 c18 li-bullet-0"><span>For </span><span>example how</span><span class="c4">&nbsp;many times do we capture the fact that 123 the Social Security number is associated with a student named Ann? We capture that twelve times in our twelve tuples. </span></li><li class="c19 c18 li-bullet-0"><span class="c4">How many times do we capture that Anne went to Palo Alto High School? We&#39;re going to capture that six times. </span></li><li class="c19 c18 li-bullet-0"><span class="c4">And we&#39;re going to capture the fact that she plays tennis six times. </span></li><li class="c19 c18 li-bullet-0"><span class="c4">And we&#39;re going to capture the fact that she went to apply to MIT four times, </span></li><li class="c19 c18 li-bullet-0"><span class="c4">so for each piece of information, in fact, we&#39;re capturing it many, many times. So that doesn&#39;t seem like a good feature of the design. </span></li></ul><ul class="c8 lst-kix_a9wgeonm4abr-2"><li class="c16 li-bullet-0"><span>The second type is an </span><span class="c5 c1">update anomaly</span><span class="c4">, and that&#39;s really a direct effect of redundancy. What update anomalies say is that you can update facts in some places but not all all or differently in different places. </span></li></ul><ul class="c8 lst-kix_a9wgeonm4abr-3 start"><li class="c19 c18 li-bullet-0"><span>So let&#39;s take the fact for example that Ann plays the trumpet. I might decide to call that the coronet instead but I can go ahead and I can modify, say, three of the </span><span>incidences</span><span>&nbsp;where we captured the fact about her playing the trumpet and not the fourth one and then we end up with what&#39;s effectively an </span><span class="c1">inconsistent database</span><span class="c4">. </span></li></ul><ul class="c8 lst-kix_a9wgeonm4abr-2"><li class="c16 li-bullet-0"><span>And the third type of anomaly is called a </span><span class="c5 c1">deletion anomaly</span><span class="c4">, and there&#39;s a case where we could inadvertently completely do a complete deletion of somebody in the database. </span></li></ul><ul class="c8 lst-kix_a9wgeonm4abr-3 start"><li class="c19 c18 li-bullet-0"><span class="c4">Let&#39;s say for example that we decide that surfing is an unacceptable hobby for our college applicants, and we go ahead and we delete the tuples about surfing. If we have students who have surfing as their only hobby, then those students will be deleted completely. Now you may argue that&#39;s the right thing to do, but probably that isn&#39;t what was intended. </span></li></ul><ul class="c8 lst-kix_a9wgeonm4abr-0"><li class="c10 li-bullet-0"><span class="c9 c1">[Design 2:]</span><span>&nbsp;</span><span>So now let&#39;s take a look at a very different design for the same data. Here we have </span><span class="c9 c1">five different relations</span><span class="c4">, one with the information about students and their names, one where they&#39;ve applied to colleges, one where they went to high school, where their high schools are located and what hobbies the students have. </span></li></ul><ul class="c8 lst-kix_a9wgeonm4abr-1 start"><li class="c6 li-bullet-0"><span>In this case we have </span><span class="c13 c1">no anomalies</span><span class="c4">. </span></li></ul><ul class="c8 lst-kix_a9wgeonm4abr-2 start"><li class="c16 li-bullet-0"><span class="c4">If we go back and look at the three different types, they don&#39;t occur in this design. We don&#39;t have redundant information, we don&#39;t have the update anomaly or the deletion anomaly. </span></li></ul><ul class="c8 lst-kix_a9wgeonm4abr-1"><li class="c6 li-bullet-0"><span>Furthermore, we </span><span class="c1">can reconstruct all of the original data from our first design</span><span class="c4">, so we haven&#39;t lost any information by breaking it up this way. </span></li><li class="c6 li-bullet-0"><span>So in fact this looks like a much </span><span class="c13 c1">better design</span><span class="c4">. </span></li></ul><ul class="c8 lst-kix_a9wgeonm4abr-0"><li class="c10 li-bullet-0"><span class="c9 c1">[Design 2 + constraints:]</span><span>&nbsp;</span><span>Now let me mention a couple of </span><span class="c1">modifications to this design</span><span class="c4">&nbsp;that might occur. </span></li></ul><ul class="c8 lst-kix_a9wgeonm4abr-1 start"><li class="c6 li-bullet-0"><span>Let&#39;s suppose, for example, that the </span><span class="c20">high school name alone is not a key</span><span class="c4">. So when we break up the high school name and high school city, we no longer can identify the high school. </span></li></ul><ul class="c8 lst-kix_a9wgeonm4abr-2 start"><li class="c16 li-bullet-0"><span class="c4">In that case, the preferred design would be to move the high school up here so we&#39;ll have that together with the high school name and then we don&#39;t need this relation here. And actually that&#39;s a fine design. It does not introduce any anomalies, that&#39;s just based on the fact that we need the name of the high school together with the city to identify it.</span></li></ul><ul class="c8 lst-kix_a9wgeonm4abr-1"><li class="c6 li-bullet-0"><span>As another example, suppose </span><span class="c20">a student doesn&#39;t want all of their hobbies revealed to all of the colleges that they are applying to</span><span class="c4">. For example, maybe they don&#39;t want Stanford to know about their surfing. </span></li></ul><ul class="c8 lst-kix_a9wgeonm4abr-2 start"><li class="c16 li-bullet-0"><span class="c4">If that&#39;s the case then we can modify the design again, and in that case we would put the hobby up here with where they&#39;re applying to college. And so that would include the hobbies that they want to reveal to those particular colleges, and we&#39;ll take away this one. </span></li></ul><ul class="c8 lst-kix_a9wgeonm4abr-0"><li class="c10 li-bullet-0"><span>So it looked like we were taking our nice, small relations, and </span><span class="c1">moving back to a design that had bigger relations</span><span class="c4">. But in this case it was very well motivated. We needed these attributes together to identify the high school and we want it to have our hobbies specific to the colleges. </span></li><li class="c10 li-bullet-0"><span>So what that shows is that the </span><span class="c1">best </span><span class="c1">design for</span><span class="c1">&nbsp;an application for relational databases </span><span class="c1">depend</span><span class="c1">s not only on constructing the relations well, but also o</span><span class="c1">n what</span><span class="c40 c47 c1 c54">&nbsp;the data is representing in the real world.</span></li></ul><h2 class="c24" id="h.95tq2tixexz2"><span>Design by Decomposition</span></h2><ul class="c8 lst-kix_a9wgeonm4abr-0"><li class="c10 li-bullet-0"><span>So the basic of idea of what we&#39;re going to do is </span><span class="c5 c1">design by decomposition</span><span class="c4">, specifically, </span></li></ul><ul class="c8 lst-kix_a9wgeonm4abr-1 start"><li class="c6 li-bullet-0"><span>we&#39;re going to do what we did at the very beginning of this example, which is start by </span><span class="c1">creating mega-relations</span><span class="c4">&nbsp;that just contain attributes for everything that we want to represent in our database, </span></li><li class="c6 li-bullet-0"><span>then we&#39;re going to </span><span class="c1">decompose those mega relations</span><span class="c4">&nbsp;into smaller ones that are better, but still capture the same information. And most importantly we can do this decomposition automatically. </span></li></ul><ul class="c8 lst-kix_a9wgeonm4abr-0"><li class="c10 li-bullet-0"><span>So </span><span class="c1">how does automatic decomposition work</span><span class="c4">? </span></li></ul><ul class="c8 lst-kix_a9wgeonm4abr-1 start"><li class="c6 li-bullet-0"><span>In addition to the mega relations, we&#39;re going to </span><span class="c1">specify formally properties of the data</span><span class="c4">.</span></li><li class="c6 li-bullet-0"><span>The </span><span class="c1">system is going to use the properties to decompose</span><span class="c4">&nbsp;the relations, and </span></li><li class="c6 li-bullet-0"><span>then it&#39;s going to guarantee that the final set of relations </span><span>satisf</span><span>ies what&#39;s called a </span><span class="c5 c1">normal form</span><span class="c4">. </span></li></ul><ul class="c8 lst-kix_a9wgeonm4abr-0"><li class="c10 li-bullet-0"><span>And we&#39;ll be formalizing all of this. But the </span><span class="c1">basic idea behind normal forms</span><span class="c4">&nbsp;is </span></li></ul><ul class="c8 lst-kix_a9wgeonm4abr-1 start"><li class="c6 li-bullet-0"><span>that they </span><span class="c1">don&#39;t have any of those anomalies</span><span class="c4">&nbsp;that I showed and </span></li><li class="c6 li-bullet-0"><span>they </span><span class="c1">don&#39;t lose any information</span><span class="c4">. </span></li></ul><ul class="c8 lst-kix_a9wgeonm4abr-0"><li class="c10 li-bullet-0"><span>So specifically </span><span class="c1">for specification of properties</span><span>, we&#39;re going to begin by looking at something called </span><span class="c5 c1">functional dependencies</span><span>. And once we specify functional dependencies, the system will generate relations that are in what&#39;s called </span><span class="c5 c1">Boyce-Codd normal form</span><span class="c4">. </span></li></ul><ul class="c8 lst-kix_a9wgeonm4abr-1 start"><li class="c6 li-bullet-0"><span class="c4">And Boyce and Codd by the way were two early pioneers in relational databases in general. </span></li></ul><ul class="c8 lst-kix_a9wgeonm4abr-0"><li class="c10 li-bullet-0"><span>Then we&#39;re going to look at another type of specification called </span><span class="c5 c1">multivalued dependencies</span><span>&nbsp;which will add to functional dependencies and when we have both functional and multivalued dependencies, then we can have what&#39;s called </span><span class="c5 c1">fourth normal form</span><span class="c4">, and again, that would be relations that are generated by the system that satisfy the normal form. </span></li><li class="c10 li-bullet-0"><span class="c1">fourth</span><span class="c1">&nbsp;normal form is stricter </span><span class="c1">than Boyce-Codd</span><span class="c1">&nbsp;normal form</span><span class="c4">. </span></li></ul><ul class="c8 lst-kix_a9wgeonm4abr-1 start"><li class="c6 li-bullet-0"><span>Specifically if we make a big </span><span class="c1">Venn diagram</span><span>&nbsp;here of all the relational designs that satisfied Boyce-Codd Normal Form, which by the way is very often abbreviated </span><span class="c5 c1">BCNF</span><span>, then that contains all of the relations that satisfy fourth normal form, normally abbreviated </span><span class="c5 c1">4NF</span><span class="c4">. </span></li><li class="c6 li-bullet-0"><span class="c1">So every relation that&#39;s in fourth normal form is also in Boyce-Codd normal form, but not vice versa</span><span class="c4">. </span></li></ul><ul class="c8 lst-kix_a9wgeonm4abr-0"><li class="c10 li-bullet-0"><span>You might be wondering what happened </span><span>to </span><span class="c5 c1">first</span><span class="c5 c1">, second and third normal forms</span><span class="c4">. </span></li></ul><ul class="c8 lst-kix_a9wgeonm4abr-1 start"><li class="c6 li-bullet-0"><span>So </span><span class="c5 c1">first</span><span class="c5 c1">&nbsp;normal form</span><span class="c4">&nbsp;is pretty much just a specification that relations are real relations with atomic values in each cell. </span></li><li class="c6 li-bullet-0"><span class="c5 c1">Second normal form</span><span class="c4">&nbsp;is specifying something about the way relations are structured with respect to their keys. </span></li><li class="c6 li-bullet-0"><span class="c4">Neither of those is discussed very much anymore. </span></li><li class="c6 li-bullet-0"><span class="c5 c1">Third normal form</span><span>&nbsp;is a slight weakening </span><span>of Boyce-Codd</span><span>&nbsp;normal form and sometimes people do like to talk </span><span>about third</span><span>&nbsp;normal form. So you can think </span><span>of third</span><span class="c4">&nbsp;normal form as a little bit of an even bigger circle here. </span></li><li class="c6 li-bullet-0"><span>We&#39;re not going to </span><span>cover third</span><span>&nbsp;normal form in this video </span><span>because </span><span class="c1">Boyce-Codd</span><span class="c1">&nbsp;normal form is the most common normal form used if we have functional dependencies only, </span><span class="c1">and fourth</span><span class="c1">&nbsp;normal form if we have functional and multivalued dependencies</span><span class="c4">. </span></li></ul><h2 class="c24" id="h.ekgu9h9hex39"><span class="c40 c36 c41">Functional Dependencies, BCNF</span></h2><ul class="c8 lst-kix_a9wgeonm4abr-0"><li class="c10 li-bullet-0"><span>So what&#39;s going to happen next is I&#39;m going to give some </span><span class="c1">examples to motivate these four concepts</span><span class="c4">: </span></li></ul><ul class="c8 lst-kix_a9wgeonm4abr-1 start"><li class="c6 li-bullet-0"><span class="c4">functional dependencies, </span></li><li class="c6 li-bullet-0"><span class="c4">Boyce-Codd normal form, </span></li><li class="c6 li-bullet-0"><span class="c4">multivalued dependencies </span></li><li class="c6 li-bullet-0"><span class="c4">fourth normal form, </span></li><li class="c6 li-bullet-0"><span class="c4">and then later videos will go into each one in much greater depth. </span></li></ul><ul class="c8 lst-kix_a9wgeonm4abr-0"><li class="c10 li-bullet-0"><span>So let me just give the general idea of </span><span class="c5 c1">functional dependencies</span><span>&nbsp;and </span><span class="c5 c1">Boyce-Codd Normal Form</span><span class="c4">. </span></li><li class="c10 li-bullet-0"><span>And we&#39;ll use a very </span><span>simple for </span><span class="c20">example</span><span class="c4">, an abbreviated version of our apply relation that has students&#39; social security numbers, the student&#39;s name and their colleges that the student is applying to. </span></li></ul><ul class="c8 lst-kix_a9wgeonm4abr-1 start"><li class="c6 li-bullet-0"><span>Even this small relation actually has </span><span class="c1">redundancy</span><span>&nbsp;and </span><span class="c1">update</span><span>&nbsp;and </span><span class="c1">deletion anomalies</span><span class="c4">. </span></li></ul><ul class="c8 lst-kix_a9wgeonm4abr-2 start"><li class="c16 li-bullet-0"><span>Specifically, let&#39;s say that our student, 123 Ann, applies to 7 colleges. Then there will be 7 tuples and there will be 7 instances where we know that a student with the social security number 123 is named Ann. Specifically, we&#39;re going to store for every student the name and social security number pair </span><span class="c1">once for each college (&rarr;redundancy)</span><span class="c4">&nbsp;that they apply to. </span></li></ul><ul class="c8 lst-kix_a9wgeonm4abr-0"><li class="c10 li-bullet-0"><span>So now let me explain what a </span><span class="c5 c1">functional dependency</span><span>&nbsp;is and then we&#39;ll see how functional dependencies are </span><span class="c1">used to recognize when we have a bad design</span><span class="c4">&nbsp;like this one, and to see how we can fix it. </span></li><li class="c10 li-bullet-0"><span>A </span><span class="c5 c1">functional dependency</span><span>, in this case </span><span class="c20">from social security number to name</span><span>&nbsp;(</span><span>and we&#39;re saying social security number functionally determines the student </span><span>name) </span><span class="c1">says</span><span class="c40 c47 c54 c1">: </span><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 394.50px; height: 222.15px;"><img alt="" src="images/image8.png" style="width: 394.50px; height: 222.15px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></li></ul><ul class="c8 lst-kix_a9wgeonm4abr-1 start"><li class="c6 li-bullet-0"><span class="c1">1. that the same social security number always has the same name. </span><span>In other words, every time we see 123, we&#39;re going to see Ann.</span><span class="c4">&nbsp;Now it doesn&#39;t necessarily go in the other direction. It might not be that whenever we see Ann, it&#39;s 123, but whenever we see 123, it is Ann. </span></li><li class="c6 li-bullet-0"><span class="c1">2.</span><span>&nbsp;And so what we&#39;d like to do is </span><span class="c1">store that relationship just one time</span><span>. One time </span><span>say</span><span class="c4">&nbsp;that for 123, the name is Ann. </span></li></ul><ul class="c8 lst-kix_a9wgeonm4abr-0"><li class="c10 li-bullet-0"><span>Now </span><span class="c1">what Boyce Codd Normal Form says</span><span class="c4">&nbsp;is that </span></li></ul><ul class="c8 lst-kix_a9wgeonm4abr-1 start"><li class="c6 li-bullet-0"><span class="c1">whenever we have one of these </span><span class="c29 c1">functional dependencies</span><span class="c1">, then the left hand side of that functional dependency must be a </span><span class="c1 c29">key</span><span class="c4">. </span></li></ul><ul class="c8 lst-kix_a9wgeonm4abr-2 start"><li class="c16 li-bullet-0"><span class="c4">And think about what that&#39;s saying. Remember a key says that we have just one tuple with each value for that attribute. </span></li><li class="c16 li-bullet-0"><span>So if we </span><span>have social</span><span class="c4">&nbsp;security number to name as a functional dependency and we satisfy Boyce-Codd Normal Form, then we&#39;re going to say that social security number has to be a key in our relation, and we&#39;ll only have one tuple for each social security number. </span></li></ul><ul class="c8 lst-kix_a9wgeonm4abr-0"><li class="c10 li-bullet-0"><span>Specifically, we can go back to our original </span><span>relation</span><span>. We have this functional dependency social security number here is not a key, right? So then we know that this is </span><span class="c29 c1">not</span><span>&nbsp;in Boyce-Codd Normal Form. So we&#39;re going to use functional dependencies to help us decompose our </span><span>relation</span><span>&nbsp;so that the decomposed relations </span><span class="c29 c1">are</span><span class="c4">&nbsp;in Boyce-Codd Normal Form. </span></li><li class="c10 li-bullet-0"><span>And here&#39;s </span><span class="c1">what would happen in this example</span><span>:</span><span class="c4">&nbsp;</span></li></ul><ul class="c8 lst-kix_a9wgeonm4abr-1 start"><li class="c6 li-bullet-0"><span>Our </span><span class="c1">functional dependency would tell us to pull out the social security number and student name into its own relation</span><span class="c4">&nbsp;where the social security number is a key and then we have just one time for each social security number that student&rsquo;s name, and then separately we&#39;ll have the information about the students and which colleges they applied to. </span></li></ul><ul class="c8 lst-kix_a9wgeonm4abr-0"><li class="c10 li-bullet-0"><span class="c4">Again, we&#39;ll completely formalize this whole idea, the definition of functional dependencies, their properties, the normal form, and how we do the decomposition in a later video.</span></li></ul><h2 class="c24" id="h.ci9uvf2sg7k1"><span class="c40 c36 c41">Multivalued Dependencies, 4NF</span></h2><ul class="c8 lst-kix_a9wgeonm4abr-0"><li class="c10 li-bullet-0"><span>Now, let&#39;s similarly motivate the concept of </span><span class="c5 c1">multivalued dependencies</span><span>, and </span><span class="c5 c1">fourth normal form</span><span class="c4">. It is actually a little bit more complicated, but it follows the same rough outline. </span></li><li class="c10 li-bullet-0"><span>Now let&#39;s look at a different portion of the information about applying and let&#39;s suppose, for now, that we&#39;re just concerned about </span><span class="c20">students, what colleges they&#39;re applying to, and what high schools they went to</span><span class="c4">. [also Apply(SSN, cName, HS)]</span></li><li class="c10 li-bullet-0"><span>We still have </span><span class="c1">redundancy</span><span>&nbsp;and </span><span class="c1">update</span><span>&nbsp;and </span><span class="c1">deletion anomalies</span><span class="c4">. </span></li></ul><ul class="c8 lst-kix_a9wgeonm4abr-1 start"><li class="c6 li-bullet-0"><span class="c4">For example, a student who applies to Stanford is going to have that fact captured once for every high school that they went to. A student who went to Palo Alto high School will have that fact captured once for every college they apply to. </span></li></ul><ul class="c8 lst-kix_a9wgeonm4abr-0"><li class="c10 li-bullet-0"><span>In addition, we get a kind of </span><span class="c1">multiplicative effect</span><span class="c4">&nbsp;here. </span></li></ul><ul class="c8 lst-kix_a9wgeonm4abr-1 start"><li class="c6 li-bullet-0"><span>Because let&#39;s say a student applies to C colleges and they went to H high schools; I know students don&#39;t go to a lot of high schools but let&#39;s suppose that this is one that </span><span>had</span><span>&nbsp;moved a lot. In that case, we&#39;re going to have </span><span class="c1">C times H </span><span>tuples</span><span>. What we&#39;d really like to have is something more on the order of </span><span class="c1">C plus H</span><span class="c4">, because then we&#39;d be capturing each piece of information just once. </span></li></ul><ul class="c8 lst-kix_a9wgeonm4abr-0"><li class="c10 li-bullet-0"><span>Now the interesting thing is that the badness of this particular design is </span><span class="c1">not addressed by Boyce-Codd Normal Form</span><span>, in fact this relation </span><span class="c29 c1">is</span><span class="c1">&nbsp;in Boyce-Codd Normal Form</span><span>, because it </span><span class="c1">has no functional dependencies</span><span>. It&#39;s not the case that every instance of a social security number is associated with a single college name or a single high school. As we will see later, </span><span class="c13 c1">if there are no functional dependencies, then the relation is automatically in Boyce-Codd Normal Form</span><span>, </span><span class="c1">but it&#39;s not in fourth normal form</span><span class="c4">. </span></li><li class="c10 li-bullet-0"><span>So </span><span class="c1">fourth</span><span class="c1">&nbsp;normal form</span><span>&nbsp;is associated with what are called </span><span class="c5 c1">multivalued dependencies</span><span class="c4">. </span></li><li class="c10 li-bullet-0"><span>When we </span><span class="c1">specify a multivalued dependency</span><span>&nbsp;as we&#39;ve done here with the </span><span class="c5 c1">double arrow</span><span>, what this is saying is that if we take a particular social security number in the relation, we will have </span><span class="c1">every combination</span><span>&nbsp;of college names that are associated with that social security number </span><span class="c1">with every</span><span class="c4">&nbsp;high school that&#39;s associated with that social security number. </span><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 331.50px; height: 186.68px;"><img alt="" src="images/image26.png" style="width: 331.50px; height: 186.68px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></li><li class="c10 li-bullet-0"><span>We&#39;ll actually see that </span><span class="c13 c1">when we have this [SSN </span><span class="c13">&#8608; </span><span class="c13 c1">cName] multivalued dependency, we automatically have this one [SSN </span><span class="c13">&#8608;</span><span class="c13 c1">&nbsp;HS], too</span><span class="c4">. </span></li><li class="c10 li-bullet-0"><span>I know it seems a bit complicated, and we will formalize it completely, but for now just think about the English statement that </span><span class="c1">multivalued dependency is saying that</span><span>&nbsp;we are going to have </span><span class="c1">every combination</span><span>&nbsp;of those two attributes and values in those attributes for a given social security number. </span><span class="c1">In other words</span><span class="c4">, those values are really independent of each other. </span></li><li class="c10 li-bullet-0"><span>So if we have that situation, then what we should really do is store each college name and each high school for each social security number one time, and that&#39;s </span><span class="c1">what fourth normal form will do</span><span class="c4">&nbsp;for us. </span></li><li class="c10 li-bullet-0"><span class="c5 c1">Fourth normal form</span><span>, similarly to Boyce-Codd normal form, </span><span class="c13 c1">says</span><span>&nbsp;if we have a dependency, then </span><span class="c13 c1">the left hand side must be a key</span><span class="c4">. </span></li></ul><ul class="c8 lst-kix_a9wgeonm4abr-1 start"><li class="c6 li-bullet-0"><span class="c4">In this case, it&#39;s a multivalued dependency we&#39;re looking at, so it&#39;s really saying something different but the basic idea is the same which is that </span></li><li class="c6 li-bullet-0"><span class="c1">we want only one tuple that has each value that appears on the left hand side of a multivalued dependency</span><span class="c4">&nbsp;</span></li></ul><ul class="c8 lst-kix_a9wgeonm4abr-0"><li class="c10 li-bullet-0"><span>So let&#39;s see </span><span class="c1">what would happen in this example</span><span class="c4">, if we use our multivalued dependencies to decompose the relation, based on the idea of fourth Normal Form. </span></li></ul><ul class="c8 lst-kix_a9wgeonm4abr-1 start"><li class="c6 li-bullet-0"><span>Well it is the intuitive thing that happens. We separate the information about the college names that a student applies to from the information about the high schools themselves, and then we&#39;ll see that we only store each fact once and we do get the behavior of having </span><span class="c1">C plus H tuples instead of having C times H tuples</span><span class="c4">. </span></li></ul><ul class="c8 lst-kix_a9wgeonm4abr-0"><li class="c10 li-bullet-0"><span class="c4">Like with functional dependencies and Boyce-Codd Normal Form we&#39;ll be completely formalizing all of this reasoning and the definitions in later videos.</span></li></ul><h2 class="c24" id="h.4otpjlhnblav"><span class="c40 c36 c41">Summary</span></h2><ul class="c8 lst-kix_dlxp9ba8pb9h-0 start"><li class="c10 li-bullet-0"><span>To summarize, we&#39;re going to do relational </span><span class="c1">design by decomposition</span><span class="c4">. </span><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 361.00px; height: 203.47px;"><img alt="" src="images/image10.png" style="width: 361.00px; height: 203.47px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></li><li class="c10 li-bullet-0"><span>We&#39;re going to start by specifying </span><span class="c1">mega relations</span><span>&nbsp;that contain all the information that we want to capture, as well as specifying </span><span class="c1">properties of the data</span><span class="c4">&nbsp;usually reflecting the real world in some fashion. </span></li><li class="c10 li-bullet-0"><span>The system can automatically </span><span class="c1">decompose</span><span>&nbsp;the mega-relations into smaller relations </span><span class="c1">based on the properties</span><span>&nbsp;we specify, and guarantee that the </span><span class="c1">final set of relations have</span><span>&nbsp;certain good properties captured in a </span><span class="c1">normal form</span><span class="c4">. </span></li></ul><ul class="c8 lst-kix_dlxp9ba8pb9h-1 start"><li class="c6 li-bullet-0"><span>They will have </span><span class="c1">no anomalies</span><span>, and they&#39;ll be guaranteed </span><span class="c1">not to lose information</span><span class="c4">. </span></li></ul><ul class="c8 lst-kix_dlxp9ba8pb9h-0"><li class="c10 li-bullet-0"><span>We&#39;ll start by specifying properties as </span><span class="c1">functional dependencies</span><span>&nbsp;and from there the system will guarantee </span><span class="c1">Boyce-Codd Normal Form</span><span class="c4">&nbsp;</span></li><li class="c10 li-bullet-0"><span>and then we&#39;ll add to that properties specified as </span><span class="c1">multivalued dependencies</span><span>, and from there the system will guarantee </span><span class="c1">fourth normal form</span><span class="c4">, which is even stronger than Boyce-Codd Normal Form and is generally thought to be good relational design.</span></li></ul><h1 class="c42" id="h.7yt0rnfo463r"><span class="c40 c36 c46">7.2 Functional Dependencies</span></h1><ul class="c8 lst-kix_8qqlcreb4gi9-0 start"><li class="c10 li-bullet-0"><span class="c4">watch</span></li></ul><h1 class="c42" id="h.a67iko5ydvj1"><span class="c40 c36 c46">7.3 BCNF</span></h1><ul class="c8 lst-kix_hatxt72hx34n-0 start"><li class="c10 li-bullet-0"><span class="c4">watch</span></li></ul><h2 class="c24" id="h.2et11ehxrvxz"><span class="c40 c36 c41">zu Quiz Q1</span></h2><p class="c18 c52"><span>For the relation Apply(SSN,cName,state,date,major), suppose </span><span class="c20">college names are unique</span><span>&nbsp;and </span><span class="c13 c1">students may apply to each college only once</span><span class="c4">, so we have two FDs: cName state and SSN,cName date,major. Is Apply in BCNF?</span></p><ul class="c8 lst-kix_1i6gptmikftw-0 start"><li class="c45 c39 c68 li-bullet-0"><span class="c1">Answer:</span><span class="c4">&nbsp;No</span></li><li class="c45 c39 c68 li-bullet-0"><span class="c1">Explanation: </span><span>{SSN,cName} is a key [weil s. </span><span class="c13 c1">gelb</span><span>&nbsp;in Frage</span><span class="c4">] so only cName&rarr;state is a BCNF violation. Based on this violation we decompose into A1(cName,state), A2(SSN,cName,date,major) [s. n&auml;chstes Video]. Now both FDs have keys on their left-hand-side so we&#39;re done.</span></li><li class="c45 c39 c68 li-bullet-0"><span>[&ldquo;</span><span class="c20">college names are unique</span><span>&rdquo; hei&szlig;t </span><span class="c1">nicht</span><span>, dass es nur ein Tupel pro cName geben muss ! cName kann also </span><span class="c1">in Apply</span><span>&nbsp;</span><span class="c4">kein key sein.] </span></li></ul><h2 class="c43" id="h.5nsw55l2qgm8"><span class="c40 c36 c41">Part 3</span></h2><ul class="c8 lst-kix_rh6tmhhl63to-0 start"><li class="c10 li-bullet-0"><span>The only way we would decompose with &quot;B&quot; as the shared attribute were </span><span>if we have</span><span>&nbsp;a functional dependency from </span><span class="c1">B to A</span><span>&nbsp;or </span><span class="c1">B to C</span><span class="c4">. And we don&#39;t. </span></li></ul><ul class="c8 lst-kix_rh6tmhhl63to-1 start"><li class="c6 li-bullet-0"><span>In both cases, there&#39;s two values of B that are the same where here the A values are not the same and here the C values are not the same. So </span><span class="c1">neither of these functional dependencies hold</span><span>&nbsp;</span><span class="c20">[weil sowohl bei B&rarr;A als auch bei B&rarr;C beide B values gleich, aber die rechten Seiten A bzw. C </span><span class="c29 c20">nicht</span><span class="c20">&nbsp;gleich sind, sodass laut Definition B&rarr;A und B&rarr;C keine FDs sein k&ouml;nnen]</span><span class="c4">&nbsp;and BCNF would not perform this decomposition.</span></li></ul><h1 class="c42" id="h.pblo2xlwoike"><span class="c40 c36 c46">7.4 Multivalued Dependencies, 4NF</span></h1><h1 class="c42" id="h.vbu7cfifvef1"><span class="c40 c36 c46">8.1 XPath</span></h1><h2 class="c24" id="h.wbbwowhz1uju"><span class="c40 c36 c41">XPath vs XSLT vs XQuery</span></h2><ul class="c8 lst-kix_2okxd4441ckb-0 start"><li class="c10 li-bullet-0"><span>Now let&#39;s turn to the subject of </span><span class="c1">querying XML</span><span class="c4">. </span></li><li class="c10 li-bullet-0"><span>First of all, let me say right up front that </span><span class="c1">querying XML is not nearly as mature as querying relational databases</span><span>. And there is a couple of </span><span class="c1">reasons</span><span class="c4">&nbsp;for that: </span></li></ul><ul class="c8 lst-kix_2okxd4441ckb-1 start"><li class="c6 li-bullet-0"><span>First of all it&#39;s just much, </span><span class="c1">much newer</span><span class="c4">. </span></li><li class="c6 li-bullet-0"><span>Second of all it&#39;s not quite as clean, there&#39;s </span><span class="c1">no underlying algebra for XML</span><span class="c4">&nbsp;that&#39;s similar to the relational algebra for querying relational databases. </span></li></ul><ul class="c8 lst-kix_2okxd4441ckb-0"><li class="c10 li-bullet-0"><span>Let&#39;s talk about the </span><span class="c1">sequence of development of query languages for XML</span><span class="c4">&nbsp;up until the present time. </span></li></ul><ul class="c8 lst-kix_2okxd4441ckb-1 start"><li class="c6 li-bullet-0"><span>The first language to be developed was </span><span class="c1">XPath</span><span class="c4">. </span></li></ul><ul class="c8 lst-kix_2okxd4441ckb-2 start"><li class="c16 li-bullet-0"><span>XPath consists of </span><span class="c5 c1">path expressions</span><span>&nbsp;and </span><span class="c5 c1">conditions</span><span class="c4">&nbsp;and that&#39;s what we&#39;ll be covering in this video once we finish the introductory material. </span></li></ul><ul class="c8 lst-kix_2okxd4441ckb-1"><li class="c6 li-bullet-0"><span>The next thing to be developed was </span><span class="c1">XSLT</span><span class="c4">. </span></li></ul><ul class="c8 lst-kix_2okxd4441ckb-2 start"><li class="c16 li-bullet-0"><span>XSLT </span><span class="c1">has XPath as a component</span><span class="c4">&nbsp;but </span></li><li class="c16 li-bullet-0"><span>it </span><span class="c1">also has </span><span class="c5 c1">transformations</span><span class="c4">, and that&#39;s what the T stands for, and </span></li><li class="c16 li-bullet-0"><span>it also </span><span class="c1">has constructs for output formatting</span><span class="c4">. </span></li><li class="c16 li-bullet-0"><span>XSLT is often </span><span class="c1">used to translate XML into HTML</span><span class="c4">&nbsp;for rendering. </span></li></ul><ul class="c8 lst-kix_2okxd4441ckb-1"><li class="c6 li-bullet-0"><span>And finally, the latest language and the most expressive language is </span><span class="c1">XQuery</span><span class="c4">. </span></li></ul><ul class="c8 lst-kix_2okxd4441ckb-2 start"><li class="c16 li-bullet-0"><span>So that also </span><span class="c1">has XPath as a component</span><span>, plus what I would call a </span><span class="c1">full featured query language</span><span>. So it&#39;s </span><span class="c1">most similar to SQL</span><span class="c4">&nbsp;in a way, as we&#39;ll be seeing. </span></li></ul><ul class="c8 lst-kix_2okxd4441ckb-0"><li class="c10 li-bullet-0"><span class="c4">The order that we&#39;re going to cover them in is first XPath and then actually second XQuery and finally XSLT. </span></li><li class="c10 li-bullet-0"><span>There are a couple of </span><span class="c13 c1">other languages</span><span>, </span><span class="c5 c1">XLink</span><span>&nbsp;and </span><span class="c5 c1">XPointer</span><span class="c4">. </span></li></ul><ul class="c8 lst-kix_2okxd4441ckb-1 start"><li class="c6 li-bullet-0"><span>Those languages are </span><span class="c1">for specifying links and pointers</span><span class="c4">. </span></li><li class="c6 li-bullet-0"><span>They also </span><span class="c1">use the XPath language as a component</span><span class="c4">. </span></li><li class="c6 li-bullet-0"><span class="c4">We won&#39;t be covering those in this video. </span></li></ul><ul class="c8 lst-kix_2okxd4441ckb-0"><li class="c10 li-bullet-0"><span class="c4">Now we&#39;ll be covering XPath, XQuery, and XSLT in moderate detail. We&#39;re not going to cover every single construct of the languages, but we will be covering enough to write a wide variety of queries using those languages. </span></li></ul><h2 class="c24" id="h.3e4pzfpascm3"><span class="c40 c36 c41">XML as a tree</span></h2><ul class="c8 lst-kix_2okxd4441ckb-0"><li class="c10 li-bullet-0"><span>To understand </span><span class="c1">how XPath works</span><span>, it&#39;s good to </span><span class="c1">think of the XML as a tree</span><span>:</span><span class="c4">&nbsp;</span></li></ul><ul class="c8 lst-kix_2okxd4441ckb-1 start"><li class="c6 li-bullet-0"><span class="c4">So I&#39;d like you to bear with me for a moment while I write a little bit of a tree that would be the tree encoding of the book store data that we&#39;ve been working with. </span></li><li class="c6 li-bullet-0"><span>So we would write as our root the </span><span>book store</span><span>&nbsp;element, and then we&#39;ll have sub-elements that would contain the books that are the sub elements of our bookstore. We might have another book. We might have over here a magazine and within the books then we had, as you might remember some attributes and some sub elements. We had for example the ISBN number I&#39;ll write as an attribute here. We had a price and we also had of course the title of the book and we had the author, excuse me, over here, I&#39;m obviously not going to be filling in the subelement structure here we are just going to look at one book as an example. The ISBN number - we </span><span>now</span><span>&nbsp;</span><span>are</span><span class="c4">&nbsp;at the leaf of the tree, so we could have a string value [ie. the ISBN] here to denote the leaf. &nbsp;Maybe 100 for the price [leaf], for the title [leaf]: &quot;A First Course in Database Systems&quot;, then our authors had further sub-elements. We had maybe two authors&#39; sub elements here, I&#39;m abbreviating a bit, below here, a first name and a last name, again abbreviating so that might have been Jeff Ullman, and so on. </span><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 316.50px; height: 178.23px;"><img alt="" src="images/image21.png" style="width: 316.50px; height: 178.23px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></li></ul><ul class="c8 lst-kix_2okxd4441ckb-0"><li class="c10 li-bullet-0"><span>I think you get the idea of how we render our </span><span class="c1">XML as a tree</span><span class="c4">. </span></li><li class="c10 li-bullet-0"><span>And the reason we&#39;re doing that is so that we can </span><span class="c1">think of the expressions we have in XPath as navigations down the tree</span><span class="c4">. </span></li></ul><ul class="c8 lst-kix_2okxd4441ckb-1 start"><li class="c6 li-bullet-0"><span>Specifically, </span><span class="c1">what XML consists of is path expressions that describe </span><span class="c20 c1">navigation down and sometimes across and up a tree</span><span class="c4">. </span></li><li class="c6 li-bullet-0"><span>And then we also have </span><span class="c5 c1">conditions</span><span>&nbsp;that we evaluate </span><span class="c1">to pick out the components of the XML that we&#39;re interested in</span><span class="c4">. </span></li></ul><h2 class="c24" id="h.yk12a41dg2n4"><span class="c40 c36 c41">XPath: Basic Constructs</span></h2><ul class="c8 lst-kix_2okxd4441ckb-0"><li class="c10 li-bullet-0"><span>So let me just go through a few of the </span><span class="c1">basic constructs</span><span class="c4">&nbsp;that we have in XPath. </span></li></ul><ul class="c8 lst-kix_2okxd4441ckb-1 start"><li class="c6 li-bullet-0"><span>So the first construct is simply a </span><span class="c5 c1">slash</span><span class="c4">, and the slash is for </span></li></ul><ul class="c8 lst-kix_2okxd4441ckb-2 start"><li class="c16 li-bullet-0"><span class="c4">designating the root element. So we&#39;ll put the slash at the beginning of an XPath query to say we want to start at the root. </span></li><li class="c16 li-bullet-0"><span class="c4">A slash is also used as a separator. So we&#39;re going to write paths that are going to navigate down the tree and we&#39;re going to put a &#39;/&#39; between the elements of the path. </span></li></ul><ul class="c8 lst-kix_2okxd4441ckb-1"><li class="c6 li-bullet-0"><span>The next construct is simply writing the </span><span class="c5 c1">name of an element</span><span class="c4">. </span></li></ul><ul class="c8 lst-kix_2okxd4441ckb-2 start"><li class="c16 li-bullet-0"><span>We </span><span>might for</span><span>&nbsp;</span><span>example write</span><span>&nbsp;&#39;book&#39;. When we write &#39;book&#39; in an XPath expression, we&#39;re saying that we want to </span><span>navigate say</span><span class="c4">&nbsp;we&#39;re up here at the bookstore down to the &lsquo;book&rsquo; sub-element as part of our path expression. </span></li></ul><ul class="c8 lst-kix_2okxd4441ckb-1"><li class="c6 li-bullet-0"><span>We can also write the special element symbol </span><span class="c5 c1">* (star)</span><span class="c4">&nbsp;and * matches anything. </span></li></ul><ul class="c8 lst-kix_2okxd4441ckb-2 start"><li class="c16 li-bullet-0"><span>So if we write </span><span class="c5 c1">/* (slash star)</span><span class="c4">&nbsp;then we&#39;ll match any sub-element of our current element. </span></li><li class="c16 li-bullet-0"><span>When we execute XPath, there&#39;s sort of </span><span class="c13 c1">a notion</span><span>&nbsp;as we&#39;re writing the path expressions </span><span class="c13 c1">of being at a particular place</span><span class="c4">. </span></li></ul><ul class="c8 lst-kix_2okxd4441ckb-3 start"><li class="c19 c18 li-bullet-0"><span class="c4">So we might have navigated from bookstore to book and then we would navigate say further down to title or if we put a * then we navigate to any sub-element. </span></li></ul><ul class="c8 lst-kix_2okxd4441ckb-1"><li class="c6 li-bullet-0"><span>If we want to match an attribute, we write </span><span class="c5 c1">@</span><span class="c4">&nbsp;and then the attribute name. </span></li></ul><ul class="c8 lst-kix_2okxd4441ckb-2 start"><li class="c16 li-bullet-0"><span class="c4">So for example, if we&#39;re at the book and we want to match down to the ISBN number, we&#39;ll write ISBN in our query, our path expression. </span></li></ul><ul class="c8 lst-kix_2okxd4441ckb-1"><li class="c6 li-bullet-0"><span>We saw the single slash for navigating one step down. There&#39;s also a </span><span class="c5 c1">double slash</span><span class="c4">&nbsp;construct. The double slash matches any descendant of our current element. </span></li></ul><ul class="c8 lst-kix_2okxd4441ckb-2 start"><li class="c16 li-bullet-0"><span>So, for example, if we&#39;re here at the book and we </span><span>write double</span><span class="c4">&nbsp;slash, we&#39;ll match the title, the authors, the off, the first name and the last name, every descendant, and actually we&#39;ll also match ourselves. So this symbol here means any descendant, including the element where we currently are. </span></li></ul><ul class="c8 lst-kix_2okxd4441ckb-0"><li class="c10 li-bullet-0"><span>What about </span><span class="c1">conditions</span><span>? If we want to evaluate a condition at the current point in the path, we </span><span class="c1">put it in a </span><span class="c5 c1">square bracket</span><span class="c4">&nbsp;and we write the condition here. </span></li></ul><ul class="c8 lst-kix_2okxd4441ckb-1 start"><li class="c6 li-bullet-0"><span class="c4">So, for example, if we wanted our price to be less than 50, that would be a condition we could put in square brackets if we were (actually, better be the attribute) at this point in the navigation. </span></li><li class="c6 li-bullet-0"><span class="c5 c1">Warning: </span><span>Now we shouldn&#39;t confuse putting a condition in a square bracket with </span><span class="c1">putting a </span><span class="c5 c1">number in a square bracket</span><span>. If we put a number in a square bracket, N, for example, if I write three, that is </span><span class="c29 c1">not a condition</span><span class="c4">&nbsp;but rather it matches the Nth sub element of the current element. </span></li></ul><ul class="c8 lst-kix_2okxd4441ckb-2 start"><li class="c16 li-bullet-0"><span class="c4">For example, if we were here at authors and we put off square bracket two, then we would match the second off sub element of the authors. </span></li></ul><ul class="c8 lst-kix_2okxd4441ckb-0"><li class="c10 li-bullet-0"><span class="c4">There are many, many other constructs. This just gives the basic flavor of the constructs for creating path expressions and evaluating conditions. </span></li><li class="c10 li-bullet-0"><span>XPath also has lots of </span><span class="c5 c1">built in functions</span><span class="c4">. I&#39;ll just mention two of them as somewhat random examples: </span></li></ul><ul class="c8 lst-kix_2okxd4441ckb-1 start"><li class="c6 li-bullet-0"><span>There&#39;s a function that you can use in XPath called </span><span class="c5 c1">contains</span><span class="c4">. If you write contains and then you write two expressions, each of which has a string value - this is actually a predicate - will return true, if the first string contains the second string. </span></li><li class="c6 li-bullet-0"><span>As a second example of a function, there&#39;s a function called </span><span class="c5 c1">name</span><span>. If we </span><span>write name</span><span class="c4">&nbsp;in a path, that returns the tag of the current element in the path. </span></li></ul><ul class="c8 lst-kix_2okxd4441ckb-0"><li class="c10 li-bullet-0"><span>The last concept that I want to talk about is what&#39;s known as </span><span class="c5 c1">navigation axes</span><span>, and there&#39;s </span><span class="c1">13 axes</span><span>&nbsp;in XPath. And what an axis is, it&#39;s sort of a </span><span>key word</span><span class="c4">&nbsp;that allows us to navigate around the XML tree. </span></li></ul><ul class="c8 lst-kix_2okxd4441ckb-1 start"><li class="c6 li-bullet-0"><span>So, for example, one axis is called </span><span class="c5 c1">parent::</span><span>. You might have noticed that when we talked about the basic constructs, most of them were about going down a tree. If you want to </span><span class="c1">navigate </span><span class="c29 c1">up</span><span class="c1">&nbsp;the tree</span><span class="c4">, then you can use the parent access that tells you to go up to the parent. </span></li><li class="c6 li-bullet-0"><span>There&#39;s an access called </span><span class="c5 c1">following-sibling::</span><span>. The following sibling </span><span>says, match actually</span><span class="c4">&nbsp;all of the following siblings of the current element. So if we have a tree and we&#39;re sitting at this point in the tree, then the following-sibling axis will match all of the siblings that are after the current one in the tree. </span></li><li class="c6 li-bullet-0"><span>There&#39;s an axis called </span><span class="c5 c1">descendant::.</span><span>&nbsp;[This] </span><span>matches</span><span class="c4">&nbsp;all the descendants of the current element. </span></li></ul><ul class="c8 lst-kix_2okxd4441ckb-2 start"><li class="c16 li-bullet-0"><span>Now it&#39;s not quite the same as //, because as a reminder, slash, slash also matches the current element as well as the descendants. Actually as it happens, there is a navigation axis called </span><span class="c5 c1">descendant-or-self::</span><span>&nbsp;</span><span class="c4">that is equivalent to slash, slash. </span></li></ul><ul class="c8 lst-kix_2okxd4441ckb-1"><li class="c6 li-bullet-0"><span>And by the way, there&#39;s also one called </span><span class="c5 c1">self::</span><span class="c4">&nbsp;that will match the current element. </span></li></ul><ul class="c8 lst-kix_2okxd4441ckb-2 start"><li class="c16 li-bullet-0"><span>And that may not seem to be useful, but </span><span>we&rsquo;ll</span><span>&nbsp;see uses for that, for example, </span><span class="c1">in conjunction with the </span><span class="c5 c1">name</span><span class="c1">&nbsp;function</span><span class="c4">&nbsp;that we talked about up here, that would give us the tag of the current element. </span></li></ul><ul class="c8 lst-kix_2okxd4441ckb-0"><li class="c10 li-bullet-0"><span class="c4">Just a few details to wrap up. </span></li><li class="c10 li-bullet-0"><span class="c1">XPath queries</span><span>&nbsp;technically </span><span class="c1">operate on and return a sequence of elements</span><span class="c4">. That&#39;s their formal semantics. </span></li><li class="c10 li-bullet-0"><span class="c1">There is a specification</span><span>&nbsp;for how </span><span class="c1">XML documents</span><span>&nbsp;and XML streams </span><span class="c1">map to</span><span>&nbsp;</span><span class="c1">sequences of elements</span><span class="c4">&nbsp;and you&#39;ll see that it&#39;s quite natural. </span></li><li class="c10 li-bullet-0"><span>When we run an XPath query, sometimes the </span><span class="c1">result can be expressed as XML, but not always</span><span class="c4">. But as we&#39;ll see again, that&#39;s fairly natural as well. </span></li></ul><h1 class="c42" id="h.w739922k4d7q"><span class="c40 c36 c46">8.2 Demo</span></h1><h1 class="c42" id="h.pjjedtjzms22"><span class="c40 c36 c46">8.3 XQuery</span></h1><h2 class="c24" id="h.6n9b9udvzok8"><span class="c40 c36 c41">Compositionality</span></h2><ul class="c8 lst-kix_yz3qcgmzqyos-0 start"><li class="c10 li-bullet-0"><span>XQuery is an </span><span class="c5 c1">expression language</span><span>, also known as a </span><span class="c5 c1">compositional language</span><span class="c4">. And we&#39;ve seen that already with relational algebra. What that means is, when we run an expression of the language on a type of data the answer to that expression or query is the same type of data. </span></li></ul><ul class="c8 lst-kix_yz3qcgmzqyos-1 start"><li class="c6 li-bullet-0"><span>So let me just draw the picture here. We have some data. We run an expression or query over that data and </span><span>we get</span><span class="c4">&nbsp;a result back and that result is also going to be in the same type of data. That means we can run another query or expression over the same type of data that was the result of the previous one. And again, we get a result of the same type of data. Now that also means that we can sort of put these together. And when we put them together, that will give us additional expressions or queries that are valid in the language. </span></li><li class="c6 li-bullet-0"><span>When we talked about compositionality </span><span class="c1">in the relational model</span><span>, the types of data we were using were </span><span class="c1">relations</span><span>. We would have maybe some relations here, we run a query over those relations the result itself is a relation and we can run further queries over that relation that&#39;s the answer. And then when we looked at </span><span class="c1">relational algebra</span><span>, we </span><span>saw a composing</span><span class="c4">&nbsp;the expressions of relational algebra into more complicated expressions and everything worked together [&rarr;compositional language]. </span></li><li class="c6 li-bullet-0"><span class="c1">In XML</span><span>, it&#39;s similar, except the expressions operate on and return what are known as </span><span class="c5 c1">sequences of elements</span><span>. As we mentioned for XPath, the sequences of elements can be generated from an XML document.They can also be generated from an XML stream and the interpretation is quite natural. Now let me mention that one of the basic types of expressions in XQuery is XPath. So </span><span class="c1">every XPath expression is in fact an XQuery expression</span><span>&nbsp;or a valid query in XQuery. Then we can use XPath and other constructs of XQuery to put </span><span>together into more</span><span class="c4">&nbsp;complicated queries [&rarr;compositional language]. </span></li></ul><h2 class="c24" id="h.74wjpyndnpmq"><span class="c40 c36 c41">XQuery: Basic Constructs</span></h2><ul class="c8 lst-kix_yz3qcgmzqyos-0"><li class="c10 li-bullet-0"><span>Now, one of the most commonly used expressions in XQuery is what&#39;s known as the </span><span class="c5 c1">FLWOR expression</span><span>, and it looks closest to SQL of any of the constructs in XQuery. Let me explain how it works. We have </span><span class="c1">up to five clauses</span><span>&nbsp;in that FLWOR expression and that&#39;s where the </span><span>FLWOR</span><span class="c4">&nbsp;comes from. </span></li></ul><ul class="c8 lst-kix_yz3qcgmzqyos-1 start"><li class="c6 li-bullet-0"><span>The first, the </span><span class="c5 c1">FOR clause</span><span class="c4">, sets up what are known as iterator variables. So the idea here is that in the for clause, this expression is evaluated and it will produce potentially a set result. And then the variable will be backed Count to each element of the set one at a time and then the rest of the expression will be evaluated for each element. So in other words if this produces a set of end results. Then we will effectively evaluate the rest of the queries N times. We will see that much more clearly when we do the demonstration. </span></li><li class="c6 li-bullet-0"><span>The </span><span class="c5 c1">LET clause</span><span class="c4">&nbsp;is more of a typical assignment. So it&#39;s only run once, each time the rest of the query is run. And so this expression is evaluated and even if it&#39;s a set, it&#39;s assigned once to this variable. So it&#39;s not iterating now, it&#39;s just doing an assignment. Again, it&#39;ll become quite clear when we do the demonstration. </span></li><li class="c6 li-bullet-0"><span>The </span><span class="c5 c1">WHERE clause</span><span class="c4">&nbsp;specifies a condition and it&#39;s a filter very similar to the filters that we&#39;ve seen in SQL. </span></li><li class="c6 li-bullet-0"><span>The </span><span class="c5 c1">ORDER BY</span><span class="c4">&nbsp;is also sort of similar to SQL. It sorts the results so that you can get the result in a particular order. </span></li><li class="c6 li-bullet-0"><span>And finally the </span><span class="c5 c1">RETURN clause</span><span class="c4">&nbsp;says what we want to actually get in the result of our query. </span></li></ul><ul class="c8 lst-kix_yz3qcgmzqyos-0"><li class="c10 li-bullet-0"><span class="c4">And just as a reminder, when we start the query with the for, if we are effectively executing the query N times then each one of those N executions may result in one of the elements in the result. </span></li><li class="c10 li-bullet-0"><span>The FLWOR expression has up to five clauses, but actually </span><span class="c1">all of the clauses except the return clause are optional</span><span class="c4">. The return is the only one that&#39;s required to have a well-formed query and to get a result. </span></li><li class="c10 li-bullet-0"><span>I also want to mention that the </span><span class="c1">for and let clause can be repeated multiple times</span><span>&nbsp;if we want to set up multiple variables or multiple assignments and </span><span class="c1">they can be interleaved with each other</span><span class="c4">. They don&#39;t need to be in a particular order. </span></li><li class="c10 li-bullet-0"><span>Our next query, it&#39;s possible to </span><span class="c1">mix query evaluation with simply writing down the XML data that we want in the result</span><span class="c4">. </span></li></ul><ul class="c8 lst-kix_yz3qcgmzqyos-1 start"><li class="c6 li-bullet-0"><span>And here&#39;s an example. In this case, we&#39;re writing the opening and closing tags that we want to be in the result of our query. And then inside </span><span class="c5 c1">curly braces</span><span>, we write the query itself. And what these </span><span class="c1">curly braces</span><span>&nbsp;effectively </span><span>say are </span><span class="c1">&ldquo;evaluate</span><span class="c1">&nbsp;me&rdquo;</span><span>. The curly braces are an </span><span class="c1">indicator to the XQuery processor</span><span>&nbsp;that what&#39;s inside them needs to be run as a query, is </span><span class="c1">replaced</span><span class="c4">&nbsp;with the XML that&#39;s the query result, and the final output is our opening and closing tags with the XML query result inside. </span></li></ul><h1 class="c42" id="h.xzgzv2l3g5zi"><span class="c40 c36 c46">8.4 Demo</span></h1><h1 class="c42" id="h.9a0ppgd6i2bb"><span class="c40 c36 c46">10.1 Indexes</span></h1><ul class="c8 lst-kix_k83hes5pcp4s-0 start"><li class="c10 li-bullet-0"><span>The reason indexes are so important is that they are the </span><span class="c1">primary way of getting improved performance</span><span class="c4">&nbsp;out of a database. </span></li><li class="c10 li-bullet-0"><span>Indexes </span><span class="c1">are a persistent data structure</span><span class="c4">. </span></li><li class="c10 li-bullet-0"><span class="c4">They&#39;re stored together with the database itself. </span></li><li class="c10 li-bullet-0"><span class="c4">Now, there are many very interesting implementation issues in indexes, but in this video and in this course in general, we&#39;re focusing on the perspective of the user and application. So, we&#39;ll talk about how applications will use indexes to speed up performance. </span></li><li class="c10 li-bullet-0"><span class="c4">So, let&#39;s suppose we have a very simple table T that has three columns, but we&#39;re going to focus on columns A and columns B. And we can see that Column A is a string valued column with animal names, and Column B is an integer column. </span></li><li class="c10 li-bullet-0"><span>Now, we&#39;re gonna be asking </span><span class="c13 c1">queries that involve conditions over these two columns</span><span>:</span><span class="c4">&nbsp;</span></li></ul><ul class="c8 lst-kix_k83hes5pcp4s-1 start"><li class="c6 li-bullet-0"><span class="c1">In order to speed up those queries</span><span>, if we&#39;re concerned about </span><span class="c13 c1">evaluating conditions on column A</span><span>, then we can </span><span class="c1">build an index on that column</span><span>. So we call that an index on column T.A. What that index allows us to do - and &quot;us&quot; in this case is actually the </span><span class="c5 c1">query processor</span><span class="c4">&nbsp;- is ask questions, for example, </span></li></ul><ul class="c8 lst-kix_k83hes5pcp4s-2 start"><li class="c16 li-bullet-0"><span>let&#39;s ask </span><span class="c20">what tuples have &quot;cow&quot; in the value of T.A</span><span class="c4">. If we ask that question of our index, that index will quickly tell us that tuple 3 and tuple 7 have a value &quot;cow&quot;, without scanning the entire table. </span></li><li class="c16 li-bullet-0"><span>We could also ask the index </span><span class="c20">what tuples have, say the value &quot;cat&quot;</span><span>. And if we ask the index that question, it will tell us </span><span>tuple</span><span>&nbsp;1 and </span><span>tuple</span><span class="c4">&nbsp;5 and tuple 6 have the value &quot;cat.&quot; </span></li></ul><ul class="c8 lst-kix_k83hes5pcp4s-1"><li class="c6 li-bullet-0"><span>If we&#39;re interested in </span><span class="c13 c1">evaluating conditions in column B</span><span>&nbsp;then we can also </span><span class="c1">build an index on column B</span><span class="c4">. For example </span></li></ul><ul class="c8 lst-kix_k83hes5pcp4s-2 start"><li class="c16 li-bullet-0"><span>now we could ask questions like, </span><span class="c20">when is T.B equal to the value two?</span><span class="c4">&nbsp;We asked the index and the index will tell us that tuple 1 and tuple 5 have the value two. </span></li><li class="c16 li-bullet-0"><span>We could also ask, for example, </span><span class="c20">when the value in T.B is less than six?</span><span class="c4">&nbsp;And the index in that case would tell us that tuple 1 is less than six, two...wow, most of them: three, five, and seven. </span></li><li class="c16 li-bullet-0"><span>We could ask an even more complicated question.</span><span class="c20">&nbsp;We could ask when the value for T.B is, say, greater than four and less than or equal to eight</span><span class="c4">. Again, we ask the index, and in this case the index would tell us that it is tuple two and tuple seven in that case. </span></li></ul><ul class="c8 lst-kix_k83hes5pcp4s-1"><li class="c6 li-bullet-0"><span>Lastly, suppose we&#39;re interested in having </span><span class="c13 c1">conditions that are on both columns A and B</span><span>. Then we can </span><span class="c1">build an index that is on both columns together</span><span class="c4">. </span></li></ul><ul class="c8 lst-kix_k83hes5pcp4s-2 start"><li class="c16 li-bullet-0"><span>Now we could ask questions, for </span><span>example, like</span><span>, </span><span class="c20">when is T.A equal to cat and T.B, say, greater than five?</span><span class="c4">&nbsp;Do we have any of those? Well, we have just one of them there. That&#39;s tuple six. </span></li><li class="c16 li-bullet-0"><span>We could also have </span><span class="c1">inequalities</span><span>, by the way, on the first column. So we might ask, </span><span class="c20">when is T.A less than, say the value D, and T.B equal to say the value 1,</span><span class="c4">&nbsp;and in that case we&#39;ll get the tuple 3 as a result. </span></li></ul><ul class="c8 lst-kix_k83hes5pcp4s-0"><li class="c10 li-bullet-0"><span>So I think this gives an idea with a simple table of how indexes are </span><span class="c1">used to go directly to the tuples that satisfy conditions rather than scanning the entire table</span><span class="c4">. So that&#39;s the main utility of an index. </span></li><li class="c10 li-bullet-0"><span>Again, the tables can be absolutely gigantic in databases and the difference between scanning an entire table to </span><span>find that tuples</span><span class="c4">&nbsp;that match a condition and locating the tuples, more or less immediately using an index, can be orders of magnitude in performance difference. </span></li><li class="c10 li-bullet-0"><span>So really it&#39;s quite important to take a look at the database and </span><span class="c1">build indexes on those attributes that are going to be used frequently in conditions, especially conditions that are very selective</span><span class="c4">. </span></li><li class="c10 li-bullet-0"><span>Now I mentioned that we&#39;re not covering the implementation of indexes in this video, but it is important to understand the </span><span class="c1">basic data structures that are used</span><span>. Specifically there are </span><span class="c1">two</span><span class="c4">&nbsp;different structures: </span></li></ul><ul class="c8 lst-kix_k83hes5pcp4s-1 start"><li class="c6 li-bullet-0"><span>One of them is </span><span class="c5 c1">balanced trees</span><span>&nbsp;and substantiation of that is typically what&#39;s called a </span><span class="c5 c1">B tree</span><span>&nbsp;or a </span><span class="c5 c1">B+ tree</span><span class="c4">. </span></li><li class="c6 li-bullet-0"><span>And the other is </span><span class="c5 c1">hash tables</span><span class="c4">. </span></li></ul><ul class="c8 lst-kix_k83hes5pcp4s-2 start"><li class="c16 li-bullet-0"><span>Now </span><span class="c5 c1">balanced </span><span class="c5 c1">trees</span><span class="c5 c1">&nbsp;indexes</span><span>&nbsp;can be used to help with conditions of the form &quot;attribute equals value.&quot; They can also be used for &quot;attribute </span><span class="c1">less than</span><span>&nbsp;value,&quot; for &quot;attribute </span><span class="c1">between</span><span class="c4">&nbsp;two values&quot; and so on, as we have shown earlier. </span></li><li class="c16 li-bullet-0"><span class="c5 c1">Hash tables</span><span>, on the other hand, </span><span class="c1">can only be used for equality conditions</span><span class="c4">. So only attribute equal value. </span></li></ul><ul class="c8 lst-kix_k83hes5pcp4s-1"><li class="c6 li-bullet-0"><span class="c4">And if you&#39;re familiar with these structures then you&#39;ll know why there&#39;s the limit on hash tables. So balanced tree indexes are certainly more flexible. </span></li><li class="c6 li-bullet-0"><span>Now there is one small downside. For those of you who are familiar with the structures and with the </span><span class="c13 c1">running time</span><span class="c4">, </span></li></ul><ul class="c8 lst-kix_k83hes5pcp4s-2 start"><li class="c16 li-bullet-0"><span>the </span><span class="c1">operations on the balance trees tend to be </span><span class="c29 c1">logarithmic</span><span class="c1">&nbsp;in their running time</span><span class="c4">, </span></li><li class="c16 li-bullet-0"><span>while well designed </span><span class="c1">hash tables can have more or less </span><span class="c29 c1">constant</span><span class="c1">&nbsp;running time</span><span class="c4">. </span></li><li class="c16 li-bullet-0"><span class="c4">Even in large databases, logarithmic is okay, although when only equality conditions are being used, then a hash table index might be preferred. </span></li></ul><ul class="c8 lst-kix_k83hes5pcp4s-0"><li class="c10 li-bullet-0"><span>Now, let&#39;s take a look at </span><span class="c20">a few SQL queries</span><span class="c4">&nbsp;and see how indexes might allow the query execution engine to speed up processing. We&#39;ll use our usual student and college database. </span></li></ul><ul class="c8 lst-kix_k83hes5pcp4s-1 start"><li class="c6 li-bullet-0"><span>The first one is a very simple query, it&#39;s looking for </span><span class="c20">the student with a particular student ID</span><span class="c4">. So if we have an index on the student ID then again the index will allow the query execution engine to go pretty much straight to that tuple, whereas without an index the entire student table would have to be scanned. </span></li></ul><hr><p class="c14"><span class="c4"></span></p><p class="c18 c52"><span>Now let me mention that </span><span class="c13 c1">many database systems do automatically build indexes on </span><span class="c5 c13 c1">primary keys</span><span>. So it&#39;s likely that in an application the student ID would be declared as a primary key and there would be an index automatically. But it&#39;s a good thing to check if this type of query is common. </span><span class="c13 c1">And some systems even also build indexes automatically on attributes that are declared as </span><span class="c5 c13 c1">UNIQUE</span><span class="c4">. </span></p><ul class="c8 lst-kix_qedi3ti5dma2-0 start"><li class="c10 li-bullet-0"><span>As a reminder from the constraint video, every table can have </span><span class="c1">one primary key</span><span>, and then </span><span class="c1">any number of additional keys labeled as unique</span><span class="c4">. </span></li></ul><hr><p class="c14"><span class="c4"></span></p><ul class="c8 lst-kix_qedi3ti5dma2-1 start"><li class="c6 li-bullet-0"><span>Now let&#39;s take a look at a slightly more complicated example. Here we&#39;re looking for </span><span class="c20">students whose name is Mary and whose GPA is greater than 3.9, and there may be a few of those students</span><span class="c4">. </span></li></ul><ul class="c8 lst-kix_qedi3ti5dma2-2 start"><li class="c16 li-bullet-0"><span>So one possibility is that </span><span class="c20">we have an index on the student name</span><span class="c4">&nbsp;and if that is the case, then the query processing can find quickly the tuples whose student name is Mary, and then check each one of those to see if the GPA is greater than 3.9. </span></li><li class="c16 li-bullet-0"><span>Alternatively </span><span class="c20">we might have an index on the GPA.</span><span class="c4">&nbsp;In that case, the system will use the index to find the students whose GPA is greater than 3.9 and then look to see if their name is Mary. </span></li><li class="c16 li-bullet-0"><span>Finally, it is possible </span><span class="c20">we can have an index on the two attributes together so we can have S name and GPA together</span><span class="c4">&nbsp;and then this index can be used to simultaneously find students that have the name Mary and the GPA greater than 3.9. </span></li><li class="c16 li-bullet-0"><span class="c4">Now, I should mention that </span></li></ul><ul class="c8 lst-kix_qedi3ti5dma2-3 start"><li class="c19 c18 li-bullet-0"><span>because this is an inequality condition, it is important that the </span><span class="c1">GPA is a tree based index</span><span class="c4">&nbsp;in order to support that evaluation of this condition </span></li><li class="c19 c18 li-bullet-0"><span>whereas the </span><span class="c1">student name</span><span>&nbsp;is an equality condition so that could be a </span><span class="c1">hash based index or a tree based index</span><span class="c4">. </span></li></ul><ul class="c8 lst-kix_qedi3ti5dma2-1"><li class="c6 li-bullet-0"><span>Now let&#39;s look at a query that involves a join. </span><span>We&#39;re </span><span class="c20">joining</span><span class="c20">&nbsp;the </span><span class="c20">student</span><span class="c20">&nbsp;and apply tables in order to find the names of the colleges that each student has applied to. And we&#39;re returning the student name and the college name</span><span class="c4">. </span></li></ul><ul class="c8 lst-kix_qedi3ti5dma2-2 start"><li class="c16 li-bullet-0"><span>So let&#39;s suppose for starters that </span><span class="c20">we had an index on the student ID attribute of the apply relation</span><span class="c4">. If that&#39;s the case then the query execution engine can scan the student relation and, for each student, use that SID and quickly find the matching SIDs in the apply relation. </span></li><li class="c16 li-bullet-0"><span>Alternatively, let&#39;s suppose </span><span class="c20">we had an index on the SID attribute of the student relation</span><span class="c4">. In that case, the system could scan the apply relation, and, for each student ID and each apply tuple, find the matching student IDs in the student tuple using the index that we have there. </span></li><li class="c16 li-bullet-0"><span>In some cases it&#39;s actually possible to </span><span class="c20">use the two indexes together</span><span class="c4">&nbsp;and make the query run even faster. </span></li></ul><ul class="c8 lst-kix_qedi3ti5dma2-3 start"><li class="c19 c18 li-bullet-0"><span>I&#39;m not going to go into detail, but indexes often allow relations to be accessed in sorted order of the indexed attributes. So, </span><span class="c20">suppose we can get the student relation in sorted order and the apply relation in sorted order</span><span class="c4">. Then we can kind of do a merge-like operation of the two indexes to get the matching student and apply records, those whose SIDs are equal. </span></li></ul><ul class="c8 lst-kix_qedi3ti5dma2-2"><li class="c16 li-bullet-0"><span class="c20">If we had additional conditions</span><span>&nbsp;in the query there might be </span><span class="c20">even more choices</span><span>&nbsp;of how to use indexes, and that gets into the entire area of what is known as </span><span class="c5 c1">query planning</span><span>&nbsp;and</span><span class="c5 c1">&nbsp;query optimization</span><span>. And this is actually one of the most exciting and interesting areas of the </span><span class="c5 c1">implementation of database systems</span><span>&nbsp;and is </span><span class="c1">what allows us to have a declarative query language</span><span class="c4">&nbsp;that&#39;s implemented efficiently.</span></li></ul><h2 class="c24" id="h.t80sdptr8l3f"><span class="c40 c36 c41">Downsides of using Indexes</span></h2><ul class="c8 lst-kix_qedi3ti5dma2-0"><li class="c10 li-bullet-0"><span class="c4">So, there must be some downsides, and of course, there are. </span></li><li class="c10 li-bullet-0"><span class="c4">Let me list three of them from sort of least severe to most severe: </span></li></ul><ul class="c8 lst-kix_qedi3ti5dma2-1 start"><li class="c6 li-bullet-0"><span>So, the first one is that </span><span class="c1">indexes do take up extra space</span><span>. As I mentioned, they are persistent data structures that </span><span>resides</span><span>&nbsp;with the data. I consider this sort of a marginal downside, especially with the cost of disk these </span><span>days, it&#39;s</span><span class="c4">&nbsp;really not that big of a deal to use additional space, even to potentially double the size of your database. </span></li><li class="c6 li-bullet-0"><span>The second downside is the </span><span class="c1">overhead involved in index creation</span><span class="c4">. So, when a database is loaded, if we&#39;re going to have indexes, those indexes need to be created over the data. Or if we add indexes later on, they need to be created. Index creation can actually be a fairly time consuming operation, so I&#39;m going to make this as a medium downside. On the other hand, once the index is created, all the queries run faster, so it&#39;s usually worthwhile to do it. </span></li><li class="c6 li-bullet-0"><span>The last one is the most significant one and that&#39;s the issue of </span><span class="c1">index maintenance</span><span>. So the index is a data structure that sits to the side of the database and helps answer conditions. When the values in the database change, then the index has to be modified to reflect those changes. So if the database is modified frequently, each of those modifications is going to be significantly slower than if we didn&#39;t have indexes. So in fact, in a database that&#39;s modified a whole bunch and not queried all that often, the cost of index maintenance can actually offset the benefits of having the index. So it really is a </span><span class="c13 c1">cost-benefit trade off</span><span class="c4">&nbsp;to decide when to build indexes. </span></li></ul><ul class="c8 lst-kix_qedi3ti5dma2-0"><li class="c10 li-bullet-0"><span class="c4">So given that we have this cost-benefit trade off. How do we figure out which indexes to create when we have a database an applications on that database. The benefit of an index depends first of all on </span></li></ul><ul class="c8 lst-kix_qedi3ti5dma2-1 start"><li class="c6 li-bullet-0"><span class="c1">how big the table is</span><span class="c4">&nbsp;since the index helps us find specific portions of the table quickly. </span></li><li class="c6 li-bullet-0"><span>It depends on </span><span class="c1">the data distributions</span><span class="c4">&nbsp;again because the index helps us find specific data values quickly. </span></li><li class="c6 li-bullet-0"><span>And finally </span><span class="c1">how often we&#39;re going to query the database vs how often we&#39;re going to update it</span><span class="c4">. As I mentioned, every time the database is updated indexes need to be maintained and that&#39;s costly. Every time we query the indexes may help us answer our queries more quickly. </span></li></ul><ul class="c8 lst-kix_qedi3ti5dma2-0"><li class="c10 li-bullet-0"><span>Fortunately, over the last decade or so, many database system vendors have introduced what&#39;s called a </span><span class="c5 c1">physical design advisor</span><span>. In this case, </span><span class="c5 c1">physical design</span><span class="c4">&nbsp;means determining which indexes to build on a database. </span></li></ul><ul class="c8 lst-kix_qedi3ti5dma2-1 start"><li class="c6 li-bullet-0"><span>The </span><span class="c5 c1">input</span><span>&nbsp;to the design advisor is the </span><span class="c1">database</span><span>&nbsp;itself and the </span><span class="c1">workload</span><span class="c4">. </span></li><li class="c6 li-bullet-0"><span>The </span><span class="c5 c1">workload</span><span>&nbsp;consists of the </span><span class="c1">sets of queries and updates</span><span>&nbsp;that are expected to be performed on the database as well as </span><span class="c1">their frequency</span><span class="c4">. </span></li><li class="c6 li-bullet-0"><span>Now actually the design advisor doesn&#39;t usually look at the entire database, but rather </span><span class="c1">looks at statistics on the database</span><span class="c4">&nbsp;that describe how large the tables are and their data distributions. </span></li><li class="c6 li-bullet-0"><span>The </span><span class="c5 c1">output</span><span>&nbsp;of the design advisor is a </span><span class="c1">recommended set of indexes to build</span><span class="c4">&nbsp;that will speed up the overall workload. </span></li></ul><ul class="c8 lst-kix_qedi3ti5dma2-0"><li class="c10 li-bullet-0"><span>Interestingly, physical design advisors rely very heavily on a component of database systems that already existed, actually one of the most important components of database systems, which is the </span><span class="c5 c1">query optimizer</span><span class="c4">. </span></li></ul><ul class="c8 lst-kix_qedi3ti5dma2-1 start"><li class="c6 li-bullet-0"><span class="c4">That&#39;s the component that takes a query and figures out how to execute it: Specifically, it&#39;ll take </span></li></ul><ul class="c8 lst-kix_qedi3ti5dma2-2 start"><li class="c16 li-bullet-0"><span class="c1">statistics on the database</span><span class="c4">, </span></li><li class="c16 li-bullet-0"><span class="c1">the query</span><span>&nbsp;to be executed </span><span class="c1">or the update command</span><span class="c4">, and </span></li><li class="c16 li-bullet-0"><span class="c1">the set of indexes that currently exist</span><span class="c4">, </span></li></ul><ul class="c8 lst-kix_qedi3ti5dma2-1"><li class="c6 li-bullet-0"><span class="c4">and it will </span></li></ul><ul class="c8 lst-kix_qedi3ti5dma2-2 start"><li class="c16 li-bullet-0"><span class="c1">explore the various ways of actually executing the query</span><span class="c4">&nbsp;- which indexes will be used, which order things will be done in. </span></li><li class="c16 li-bullet-0"><span>It </span><span class="c1">estimates the cost of each</span><span class="c4">&nbsp;one, and </span></li><li class="c16 li-bullet-0"><span>it </span><span class="c1">spits out the estimated best execution plan with the estimated cost</span><span class="c4">. </span></li></ul><ul class="c8 lst-kix_qedi3ti5dma2-0"><li class="c10 li-bullet-0"><span>So now let&#39;s look at how this component can be used to </span><span class="c1">build a design advisor</span><span>. Let&#39;s just draw the design advisor around the whole thing here, and the input to the design advisor, again, are the statistics and the workload, and the output is supposed to be the indexes. So what the design adviser actually does </span><span>is it </span><span class="c1">experiments</span><span class="c1">&nbsp;with different set-ups of indexes</span><span>. For each set-up of indexes, it takes the workload, it issues the queries, and updates to the query optimizer. It </span><span class="c29 c1">doesn&#39;t</span><span class="c1">&nbsp;actually run them against the database and see&#39;s what cost the query optimizer produces</span><span class="c4">. It tries this with different configurations of indexes and then in the end determines those indexes that bring down the cost the most. In other words, it will give you back those indexes where the benefits of having the index outweigh the drawbacks of having that index in terms of the workload and using the costs that were estimated by the query optimizer. </span><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 380.50px; height: 209.21px;"><img alt="" src="images/image4.png" style="width: 380.50px; height: 209.21px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></li><li class="c10 li-bullet-0"><span>If you&#39;re </span><span class="c1">using a system that doesn&#39;t have a design adviser</span><span class="c4">, then you&#39;ll have to kind of go through this process yourself. You&#39;ll have to take a look at the queries and updates that you expect, how often you expect them to happen, and which indexes will benefit those queries, and hopefully won&#39;t incur too much overhead when there are updates. </span></li><li class="c10 li-bullet-0"><span>Just quickly, here&#39;s the </span><span class="c1">SQL standard for creating indexes</span><span>:</span><span class="c4">&nbsp;</span></li></ul><ul class="c8 lst-kix_qedi3ti5dma2-1 start"><li class="c6 li-bullet-0"><span>All indexes are given </span><span class="c1">names</span><span class="c4">. </span></li><li class="c6 li-bullet-0"><span>We can </span><span class="c5 c1">CREATE</span><span class="c1">&nbsp;an index</span><span>&nbsp;on a single attribute. We can create an index on several attributes together. [</span><span class="c20">Create</span><span>&nbsp;</span><span class="c20">Unique</span><span class="c4">&nbsp;Index IndexName on T(A1,A2,...,An)]</span></li><li class="c6 li-bullet-0"><span>We can also say that we want our index to </span><span class="c1">enforce a uniqueness constraint</span><span>&nbsp;so when we add the word </span><span class="c5 c1">UNIQUE</span><span class="c4">&nbsp;it sort of adds constraint enforcement. </span></li></ul><ul class="c8 lst-kix_qedi3ti5dma2-2 start"><li class="c16 li-bullet-0"><span class="c4">It says, we&#39;re going to check that all values for &quot;A&quot; are unique using our index and will generate an error if there are two tuples that have the same value for A, </span></li></ul><ul class="c8 lst-kix_qedi3ti5dma2-1"><li class="c6 li-bullet-0"><span>and finally we have a command [</span><span class="c5 c1">DROP</span><span>] for </span><span class="c1">dropping indexes</span><span>. [</span><span class="c20">Drop</span><span class="c4">&nbsp;Index IndexName]</span></li></ul><ul class="c8 lst-kix_qedi3ti5dma2-0"><li class="c10 li-bullet-0"><span>In summary, indexes are really important. They&#39;re the primary way to get improved performance on a database. By building the right indexes over a database for its workflow we can get orders of magnitude performance improvement. Although we do have to be careful, because there are trade-offs in building indexes, especially for databases that are modified frequently. They are a persistent data structure that are stored together with the database, and there are many interesting implementation issues, but in this video and course we&#39;re focusing specifically on the user and application perspective, determining which indexes to build and how they will gain performance improvement for us.</span></li></ul><h1 class="c42" id="h.hnxs4sluiz11"><span class="c40 c36 c46">12 Transactions</span></h1><ul class="c8 lst-kix_e596asp7nqdg-0 start"><li class="c10 li-bullet-0"><span>The concept of transactions is actually </span><span class="c1">motivated by two completely independent concerns</span><span class="c4">: </span></li></ul><ul class="c8 lst-kix_e596asp7nqdg-1 start"><li class="c6 li-bullet-0"><span>One has to do with </span><span class="c1">concurrent access to the database by multiple clients</span><span class="c4">&nbsp;and </span></li><li class="c6 li-bullet-0"><span>the</span><span>&nbsp;other has to do with having a system that is </span><span class="c1">resilient to system failures</span><span class="c4">.</span></li></ul><h2 class="c24" id="h.22aljps59yq9"><span class="c40 c36 c41">Concurrency</span></h2><ul class="c8 lst-kix_e596asp7nqdg-0"><li class="c10 li-bullet-0"><span>So we&#39;re going to talk about each of these in detail in turn. Let&#39;s take a look at the </span><span class="c1">software structure of how database systems are used</span><span class="c4">. </span></li></ul><ul class="c8 lst-kix_e596asp7nqdg-1 start"><li class="c6 li-bullet-0"><span>We have the </span><span class="c1">data</span><span class="c4">&nbsp;itself usually stored on disc. </span></li><li class="c6 li-bullet-0"><span>And then we have the database management system, or </span><span class="c1">DBMS</span><span class="c4">, that controls interactions with the data. </span></li><li class="c6 li-bullet-0"><span>Often there&#39;s</span><span class="c1">&nbsp;additional software above the DBMS</span><span>, maybe an </span><span class="c20">application server or web server</span><span class="c4">. </span></li><li class="c6 li-bullet-0"><span>And then interacting with that might be a </span><span class="c1">human user</span><span>&nbsp;or </span><span class="c1">additional software</span><span class="c4">, </span></li><li class="c6 li-bullet-0"><span>and the types of </span><span class="c1">operations that these users or the software will be issuing</span><span class="c4">&nbsp;to the database are the things we&#39;ve looked at such as </span></li></ul><ul class="c8 lst-kix_e596asp7nqdg-2 start"><li class="c16 li-bullet-0"><span class="c4">select command in SQL or update commands, </span></li><li class="c16 li-bullet-0"><span class="c4">creating tables, </span></li><li class="c16 li-bullet-0"><span class="c4">creating and dropping indexes, </span></li><li class="c16 li-bullet-0"><span class="c4">maybe a help command, </span></li><li class="c16 li-bullet-0"><span class="c4">a delete command. </span></li></ul><ul class="c8 lst-kix_e596asp7nqdg-0"><li class="c10 li-bullet-0"><span>So each of the clients or the software applications will be issuing these types of commands for the database, and most importantly, they will be </span><span class="c1">issuing them concurrently</span><span class="c4">&nbsp;and we might have, you know, a database with one user, ten, hundreds or even thousands of users at the same time. </span></li><li class="c10 li-bullet-0"><span>Let&#39;s look at the kind of </span><span class="c1">difficulties</span><span>&nbsp;that we can get into when multiple clients are interacting with a database at the same time. We&#39;ll be focusing mostly on SQL statements of modifications and some queries that are being issued by clients. And we&#39;ll look at some </span><span class="c1">different levels where inconsistency can occur</span><span class="c4">. </span></li><li class="c10 li-bullet-0"><span>We&#39;re going to focus our first example just on </span><span class="c13 c1">a single attribute</span><span class="c4">&nbsp;and how it can have problems when multiple clients are working on the same attribute. </span></li></ul><ul class="c8 lst-kix_e596asp7nqdg-1 start"><li class="c6 li-bullet-0"><span>So let&#39;s say we have two clients, one is issuing a statement that&#39;s increasing Stanford&#39;s enrollment by 1000. The second client, around the same </span><span>time is</span><span class="c4">&nbsp;issuing a statement that&#39;s increasing Stanford&#39;s enrollment by 1500. So we have in the database our college table here. And somewhere in this college table we actually have Stanford&#39;s enrollment. </span></li><li class="c6 li-bullet-0"><span>Now the way database systems work is when we are modifying a value in the database, effectively, the system first </span><span class="c5 c1">gets</span><span>&nbsp;the value, then it </span><span class="c5 c1">modifies</span><span>&nbsp;the value, and then it </span><span class="c5 c1">puts</span><span class="c4">&nbsp;the modified value back in the database. </span></li><li class="c6 li-bullet-0"><span>So here&#39;s the value that we&#39;re working on. So, client S1 will fetch the value, add one thousand to it, and put it back. Client S2 will do something similar, but adding 1,500 instead. </span><span class="c20">Let&#39;s suppose Stanford starts out with an enrollment of 15,000 and these two statements are executed concurrently</span><span class="c4">. What are the final values that we might have? </span></li></ul><ul class="c8 lst-kix_e596asp7nqdg-2 start"><li class="c16 li-bullet-0"><span class="c4">Well, if one of them runs before the other completely, then it will add 2,500 and we will get 17,500. </span></li><li class="c16 li-bullet-0"><span>On the other hand if they really can interleave their get, </span><span>modifies</span><span class="c4">, and puts, then it is possible that we&#39;ll instead only add a 1,000, because the 1,500 gets lost, </span></li><li class="c16 li-bullet-0"><span class="c4">or we could only add 1,500. </span></li><li class="c16 li-bullet-0"><span>So there are </span><span class="c1">three possible final values</span><span class="c4">&nbsp;if there&#39;s interleaving of the operations that modify the value. </span></li><li class="c16 li-bullet-0"><span class="c4">Of course we are going to see that there are mechanisms in the database to avoid this, but I want to motivate the reason that we have to have those mechanisms. </span></li></ul><ul class="c8 lst-kix_e596asp7nqdg-0"><li class="c10 li-bullet-0"><span>Now let&#39;s look at an example where the inconsistency actually occurs </span><span class="c13 c1">at the tuple level</span><span class="c4">. Again, we&#39;re going to have two clients that are both issuing statements to the database that will have some conflicting behavior. </span></li></ul><ul class="c8 lst-kix_e596asp7nqdg-1 start"><li class="c6 li-bullet-0"><span>In this case they&#39;re both modifying the apply record for the student with ID 123. The first client is trying to change that </span><span>apply</span><span class="c4">&nbsp;record to have a major that&#39;s CS. Well the second is modifying a different attribute of the same record, saying that the decision should be yes. </span></li><li class="c6 li-bullet-0"><span class="c4">Now let&#39;s take a look at it again, so we&#39;ll have our table here. And now, in this case, we&#39;re looking at an entire tuple. Let&#39;s say that this is student 123 and so we have say, the major in here and the decision in here. </span></li><li class="c6 li-bullet-0"><span class="c4">Now I&#39;ve mentioned already that the databases tend to use a sort of get, modify, put, and we talked about that at the attribute level previously, but in fact the reality is that it does occur at the tuple level, in fact sometimes it occurs at the entire page or disc lock level. So let&#39;s suppose that it occurs at least at the tuple level. So, again, we can see the same problem, then, when we have the two clients. Each will be performing a get, modify, put. If they do it interleaved, then it&#39;s possible that </span></li></ul><ul class="c8 lst-kix_e596asp7nqdg-2 start"><li class="c16 li-bullet-0"><span>we will </span><span class="c1">see both changes</span><span class="c4">. We&#39;ll correctly get the major reset and the decision reset </span></li><li class="c16 li-bullet-0"><span>but it&#39;s also possible we&#39;d </span><span class="c1">only see one</span><span>&nbsp;of the two changes and it </span><span class="c1">could be either one</span><span class="c4">. </span></li></ul><ul class="c8 lst-kix_e596asp7nqdg-1"><li class="c6 li-bullet-0"><span>So again, we need some mechanism to e</span><span>nsure</span><span class="c4">&nbsp;that we have consistent updates to the database that would give us what we expect. </span></li><li class="c6 li-bullet-0"><span class="c4">In this case, we would probably expect both changes to be persistent in the database. </span></li></ul><ul class="c8 lst-kix_e596asp7nqdg-0"><li class="c10 li-bullet-0"><span>Now, let&#39;s go one step further and look </span><span class="c13 c1">at table level</span><span class="c4">&nbsp;inconsistency. Again we have our two clients, and they&#39;re submitting statements to the database around the same time. </span></li></ul><ul class="c8 lst-kix_e596asp7nqdg-1 start"><li class="c6 li-bullet-0"><span class="c4">One of them is modifying the applied table and it&#39;s setting the decision for applications TS for every student who&#39;s GPA is greater than 3.9. The other statement, occurring at about the same time, is modifying the student table; we&#39;ve decided to increase the GPA of every student who comes from a large high school. </span></li><li class="c6 li-bullet-0"><span>So here we have the apply table. We have the student table. We have the first client S1 working on the apply table, but the </span><span class="c1">conditions in which apply tuples are updated </span><span class="c13 c1">depend on</span><span class="c1">&nbsp;probing the student table</span><span>. Meanwhile we have client S2 that&#39;s modifying the student table. So what happens in the apply table can depend on whether it occurs </span><span class="c1">before</span><span>&nbsp;or </span><span class="c1">after</span><span>&nbsp;or </span><span class="c1">during</span><span class="c4">&nbsp;the modifications of the student table. </span></li></ul><ul class="c8 lst-kix_e596asp7nqdg-2 start"><li class="c16 li-bullet-0"><span class="c4">So you know, students would certainly prefer if their GPA is increased before the apply records are automatically accepted based on the GPA. </span></li></ul><ul class="c8 lst-kix_e596asp7nqdg-1"><li class="c6 li-bullet-0"><span class="c4">So again, a notion of consistency here would be that we understand that either all the GPA&#39;s are modified first and then the acceptances are made or vice versa and we&#39;ll again see mechanisms that will help us enforce that. </span></li></ul><ul class="c8 lst-kix_e596asp7nqdg-0"><li class="c10 li-bullet-0"><span>As a final example we&#39;ll consider clients that are interacting </span><span class="c13 c1">with multiple tables</span><span>&nbsp;again. But in this case we also have </span><span class="c13 c1">multiple statements</span><span>&nbsp;that are playing into the situation. Specifically we&#39;ll see an example, where </span><span class="c1">we will want a one statement to not occur concurrently even between the statements from another client</span><span class="c4">. </span></li></ul><ul class="c8 lst-kix_e596asp7nqdg-1 start"><li class="c6 li-bullet-0"><span>So let me just show you </span><span>the</span><span>&nbsp;example. So here again we have two clients. I&#39;ll label them C1 and C2 now, since </span><span class="c20">the first one has two statements</span><span class="c4">. </span></li><li class="c6 li-bullet-0"><span>So what the </span><span class="c1">first client</span><span class="c4">&nbsp;is doing is moving records from the apply table to an archive table. Specifically, it looks in the apply table for records where the decision is no and it inserts those into an archive. And then in a second statement, and this is really the only way to do it, it deletes those tuples from the apply relation. </span></li><li class="c6 li-bullet-0"><span>The </span><span class="c1">second client</span><span class="c4">&nbsp;just happens to want to count the number of tuples in the apply table and in the archive table. </span></li><li class="c6 li-bullet-0"><span class="c4">So again we have the two tables we&#39;re concerned with, the apply table and the archive table. </span></li><li class="c6 li-bullet-0"><span>And what the first client is doing is, it&#39;s moving some tuples from apply to archive, and then in a second statement deleting those tuples from apply. Our second client-- I&#39;ll put this one in red--is counting from the </span><span>apply</span><span class="c4">&nbsp;and then counting from the archive. </span></li><li class="c6 li-bullet-0"><span>Now if we want the second client to see sort of a consistent state of the database, where we don&#39;t have records that are duplicated between apply and archive, then </span><span class="c1">we will really want that second client to go either completely before, or completely after, the first client</span><span class="c4">. </span></li></ul><ul class="c8 lst-kix_e596asp7nqdg-0"><li class="c10 li-bullet-0"><span>So after that long sequence of examples, I hope you get the feeling of what we&#39;re looking for in concurrency. We have multiple clients interacting with the database at the same time, and if they have true interleaving of the commands that they&#39;re executing on the database - often update commands but some select commands as well - then we may get inconsistent or unexpected behavior. So </span><span class="c1">what we&#39;d like to have overall</span><span class="c4">&nbsp;is the ability for clients to execute statements against the database and not have to worry about what other clients are doing at the same time. Specifically, a little more generally, we like the class to be able to execute a sequence of SQL statements, so that the client can at least act like those statements are running in isolation. </span></li><li class="c10 li-bullet-0"><span class="c4">Now there&#39;s one obvious solution to do this, right? </span></li></ul><ul class="c8 lst-kix_e596asp7nqdg-1 start"><li class="c6 li-bullet-0"><span>Why don&#39;t we just execute them in isolation? This database system can take its client requests and just do them one at a time </span><span class="c1">with no concurrency</span><span class="c4">. </span></li><li class="c6 li-bullet-0"><span>On the other hand we really do </span><span class="c1">want to enable concurrency whenever we can</span><span class="c4">. </span></li></ul><ul class="c8 lst-kix_e596asp7nqdg-0"><li class="c10 li-bullet-0"><span>Database systems are geared towards providing the highest possible performance, we talked about that way in the introduction into the course. And they typically do operate in an </span><span class="c1">environment where concurrency is possible</span><span>:</span><span class="c4">&nbsp;</span></li></ul><ul class="c8 lst-kix_e596asp7nqdg-1 start"><li class="c6 li-bullet-0"><span>They may be working on a </span><span class="c20 c1">multiprocessor system</span><span class="c4">. </span></li><li class="c6 li-bullet-0"><span>They may be using even a </span><span class="c20 c1">multi-threaded system</span><span class="c4">. </span></li><li class="c6 li-bullet-0"><span>And database systems, also as they access the database, tend to do a whole bunch of I/O so a </span><span class="c20 c1">system that provides asynchronous I/O</span><span class="c4">&nbsp;can also run multiple things concurrently. It can do one thing while it&#39;s waiting for data to be fetched by another. </span></li><li class="c6 li-bullet-0"><span>So assuming that system supports concurrency, then </span><span class="c13 c1">we would like the database software to support it</span><span class="c4">&nbsp;as well. </span></li></ul><ul class="c8 lst-kix_e596asp7nqdg-0"><li class="c10 li-bullet-0"><span>As a very simple example, let&#39;s suppose we have </span><span class="c20">five clients that are operating on the database and each one of them is operating on a completely different part of the database</span><span>, and we certainly </span><span class="c1">wouldn&#39;t want to force them to execute sequentially when they could execute in parallel</span><span class="c4">&nbsp;without causing any inconsistency problems. </span></li></ul><h2 class="c24" id="h.9437q3vl5j14"><span class="c40 c36 c41">Resilience</span></h2><ul class="c8 lst-kix_e596asp7nqdg-0"><li class="c10 li-bullet-0"><span class="c4">Let&#39;s switch gears entirely now and talk about system failures. Again, we have our database system working with the data on disc, and </span></li><li class="c10 li-bullet-0"><span>1. let&#39;s suppose we just happen to be </span><span class="c13 c1">in the process of bulk loading our database</span><span>. Maybe bringing in a large amount of data from an external source, say a set of files, and </span><span class="c1">right in the middle of that bulk load we have a system crash or a system failure</span><span class="c4">. It could be a software failure, could be a hardware failure, could be as simple as the power going out. </span></li><li class="c10 li-bullet-0"><span>So, if the database is, at that point, half loaded, so let&#39;s say half of this data has made its way to disc and the other half hasn&#39;t, </span><span class="c1">what happens when the system comes back up</span><span class="c4">? That leaves us in a rather unpleasant inconsistent state. </span></li><li class="c10 li-bullet-0"><span>2. Or maybe we&#39;re just </span><span class="c13 c1">executing some commands on an existing database</span><span>, remember our example earlier, where we were moving tuples from an apply relation to an archive. So we have our relations here. We&#39;re in the process of moving some data and then once it&#39;s moved, we&#39;re going to delete the data that we moved, and then all of a sudden once again we have a </span><span class="c1">crash or a failure of some type right in the middle of that move</span><span class="c4">. So what do we do now? When the system comes up, how do we know what was moved and what wasn&#39;t? </span></li><li class="c10 li-bullet-0"><span>3. As a last example, let&#39;s just suppose we were </span><span class="c13 c1">performing a whole bunch of updates on the database</span><span>. And as a reminder the way database systems perform updates is they bring some data from the disc into the memory. They modify it in memory and then eventually they write it back to disc. So let&#39;s suppose </span><span class="c1">in the middle of that process again we have a system crash</span><span class="c4">. That would again leave the database in an inconsistent state. </span></li><li class="c10 li-bullet-0"><span>So our </span><span class="c13 c1">overall goal for dealing with system failures</span><span>&nbsp;is that when we want to do something on the database that needs to be done in an all or nothing fashion, we&#39;d like to tell the system that we want to guarantee </span><span class="c13 c1">all or nothing execution</span><span>&nbsp;for that particular set of operations on the database </span><span class="c13 c1">regardless of failures</span><span class="c4">&nbsp;that might occur during the execution. </span></li></ul><h2 class="c24" id="h.p1ht1513uoa1"><span class="c40 c36 c41">Solution mechanism: Transactions</span></h2><ul class="c8 lst-kix_e596asp7nqdg-0"><li class="c10 li-bullet-0"><span>So we&#39;ve talked about problems with concurrency, we&#39;ve talked about problems with system failures, and interestingly the exact </span><span class="c1">same mechanism can be used to deal with both of those issues</span><span>, and that mechanism is not surprisingly </span><span class="c5 c1">transactions</span><span class="c4">. </span></li><li class="c10 li-bullet-0"><span>So overall, a </span><span class="c5 c1">transaction</span><span>&nbsp;is </span><span class="c1">a sequence of one or more operations that are treated as a unit</span><span class="c4">. </span></li></ul><ul class="c8 lst-kix_e596asp7nqdg-1 start"><li class="c6 li-bullet-0"><span>Specifically, </span><span class="c1">each transaction appears to run in isolation</span><span class="c4">, and furthermore, </span></li><li class="c6 li-bullet-0"><span>if the system fails, </span><span class="c1">each transaction is either executed in its entirety or not all</span><span class="c4">. </span></li><li class="c6 li-bullet-0"><span>In terms of the SQL standard, </span><span class="c1">a transaction begins</span><span>&nbsp;automatically, when a SQL statement is issued by a client to the database. When the commit command is issued that&#39;s a special key word, </span><span class="c1">the current transaction ends</span><span>&nbsp;and a </span><span class="c1">new one begins</span><span class="c4">. The current transaction also ends when its session with the database terminates. </span></li><li class="c6 li-bullet-0"><span>And finally there is a mode called </span><span class="c5 c1">autocommit</span><span class="c4">&nbsp;and in this mode each statement, each SQL statement, is executed as a transaction on its own. </span></li></ul><ul class="c8 lst-kix_e596asp7nqdg-0"><li class="c10 li-bullet-0"><span>So </span><span class="c1">for each client</span><span>, we can actually </span><span class="c1">think about a time-line</span><span>&nbsp;and the client will be executing along, it might say commit and that will commit anything that happened prior to this point. Then it might do some operations, maybe a select, an update, a delete, and then it says commit again, and when it says </span><span class="c1">commit</span><span>&nbsp;at this point that </span><span class="c1">turns</span><span>&nbsp;this </span><span class="c1">amount of work</span><span>&nbsp;into </span><span class="c1">a single transaction that&#39;s treated as a unit</span><span>. Maybe it&#39;ll update, maybe it&#39;ll create an index, and again maybe commit at this point in time and that, right here, will turn this into a transaction. And so we can see </span><span class="c1">for each client</span><span>, this is Client 1, their </span><span class="c1">execution on the database is seen as a sequence of transactions</span><span class="c4">, each of which has the properties that we describe. And then we may have a second client, that&#39;s also operating on the database, and then it will also have its set of transactions. </span><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 401.50px; height: 218.76px;"><img alt="" src="images/image2.png" style="width: 401.50px; height: 218.76px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></li></ul><h2 class="c24" id="h.y050r1q0sa4s"><span class="c40 c36 c41">ACID properties</span></h2><ul class="c8 lst-kix_e596asp7nqdg-0"><li class="c10 li-bullet-0"><span>Every database connoisseur knows that transaction support, what are known as the </span><span class="c5 c1">ACID properties</span><span>. Although not everybody always remembers that A stands for atomicity; C stands for consistency; I stands for isolation; and D </span><span>stands for</span><span class="c4">&nbsp;durability. </span></li></ul><h3 class="c34" id="h.ronqkx12bfez"><span class="c38 c36">Isolation property</span></h3><ul class="c8 lst-kix_e596asp7nqdg-0"><li class="c10 li-bullet-0"><span>So here&#39;s the deal with </span><span class="c5 c1">isolation</span><span>. We&#39;ll have a whole bunch of clients operating on our database, and </span><span class="c1">we&#39;d kind of like each client to imagine that they&#39;re operating on their own</span><span>. So as we discussed in the previous video, each client issues to the database system a sequence of transactions. So this first client might be issuing first transaction T1, then T2, T3, and so on. Over here we have T9, T10, T11 and as a reminder, </span><span class="c1">each transaction itself can be a sequence of statements</span><span class="c4">. So, this might be statement one, statement two, statement three and so on, and then those statements will be treated as a unit. </span></li><li class="c10 li-bullet-0"><span>So the isolation property is </span><span class="c1">implemented by</span><span>&nbsp;a very specific formal notion called </span><span class="c5 c1">serializability</span><span class="c4">. </span></li></ul><ul class="c8 lst-kix_e596asp7nqdg-1 start"><li class="c6 li-bullet-0"><span>What serializability says is that the </span><span class="c1">operations within transactions may be interleaved across clients, but the execution of those operations must be equivalent to </span><span class="c29 c59 c1">some</span><span class="c1">&nbsp;sequential serial order of all the transactions</span><span class="c4">. </span></li></ul><ul class="c8 lst-kix_e596asp7nqdg-2 start"><li class="c16 li-bullet-0"><span>So for our </span><span class="c20">example</span><span>&nbsp;over here, the system itself may execute all of the statements within each transaction and over here concurrently, but it has to guarantee that the behavior against the database is </span><span class="c1">equivalent to some sequence</span><span class="c4">&nbsp;in order again. So perhaps the equivalent sequential order will be as if the system first did transaction T1, maybe then T2, T9 and T10, maybe back to T3 and So on. And again the system has to guarantee that the state of the database, at this point in time, even if its interleaved the statements within any of these transactions looks as if these transactions executed in order.</span></li></ul><ul class="c8 lst-kix_e596asp7nqdg-0"><li class="c10 li-bullet-0"><span>Now, you might wonder </span><span class="c1">how the database system could possibly guarantee this level of consistency while still interleaving operation</span><span>. It uses </span><span class="c5 c1">protocols</span><span>&nbsp;that are based on </span><span class="c5 c1">locking</span><span class="c4">&nbsp;portions of the database [vgl. &ldquo;Rollbacks&rdquo; sp&auml;ter]. Now we&#39;re not going to describe the implementation, because implementation aspects are not the focus of this course. What you need to know from a user&#39;s application perspective is really the properties that are being guaranteed. </span></li><li class="c10 li-bullet-0"><span>Now with the formal notion of serializability in mind let&#39;s go back and look at the </span><span class="c20">examples from the previous video</span><span class="c4">&nbsp;that motivated the problems we could get into with concurrent access. </span></li></ul><ul class="c8 lst-kix_e596asp7nqdg-1 start"><li class="c6 li-bullet-0"><span>The first one was the example where </span><span class="c20">two separate clients were updating Stanford&#39;s enrollment</span><span>. Let&#39;s just call one of them T1. It&#39;s now a transaction. And the other T2. So when we run these against the system and serializability is guaranteed, then we will have a behavior that is at least equivalent to either T1 followed by T2, or T2 followed by T1. So, in this case, when we start with our enrollment of 15,000, </span><span class="c1">either execution will correctly have a final enrollment of 17,500</span><span class="c4">&nbsp;solving our concurrency problems. </span></li><li class="c6 li-bullet-0"><span>Here&#39;s our second example. </span><span class="c20">In this case the first client was modifying the major of student 123 in the apply table and the second was modifying the decision</span><span>. And we saw that if we allowed these to run in an interleaved fashion, it would be possible that only one of the two changes would be made. Again, with serializability we&#39;re going to get behavior that guarantees it is equivalent to either T1 and then T2, or T2 and then T1. And </span><span class="c1">in both cases, both changes will be reflected in the database which is what we would like</span><span class="c4">. </span></li><li class="c6 li-bullet-0"><span>The next example was the one </span><span class="c20">where we were looking at the Apply and the Student table, and we were modifying the Apply table based on the GPA in the Student table, and simultaneously modifying that GPA</span><span>. So again if these are issued as two transactions, we&#39;ll have either T1 followed by T2 or T2 followed by T1. Or at least we will have behavior that is equivalent to that. Now this case is a bit interesting because either of these does result in a consistent state of the database. In the first case, we&#39;ll update all the decision records </span><span class="c1">before the GPAs are modified</span><span>&nbsp;for anyone, and in the second case, will update the apply records </span><span class="c1">after the GPAs have been modified</span><span>. The interesting thing here is that </span><span class="c13 c1">the order does matter in this case</span><span>. Now, the database </span><span>system</span><span>&nbsp;only guarantees serializability. They guarantee that the behavior will be equivalent to </span><span class="c13 c1">some</span><span class="c1">&nbsp;sequential order</span><span>&nbsp;but they don&#39;t guarantee the exact sequential order if the transactions are being issued at the same time. So </span><span class="c1">if it&#39;s important to get, say, T1 before T2, that would actually have to be coded</span><span class="c4">&nbsp;as part of the application. </span></li><li class="c6 li-bullet-0"><span>And our last example was the case </span><span class="c20">where we had the Apply table, the Archive table, and we were moving records from one table to another in one of our clients, and the other client was counting the tuples</span><span>. And again, so T1 and T2, they&#39;re issued as transactions. The system guarantees that we&#39;ll either move all the tuples first and then count them, or will count the tuples and then move them. Now, again, here&#39;s a case where </span><span class="c13 c1">the order makes a difference</span><span class="c4">, but if we care specifically about the order, that would have to be coded as part of the application. </span></li></ul><ul class="c8 lst-kix_e596asp7nqdg-0"><li class="c10 li-bullet-0"><span class="c4">OK, so we&#39;ve finished our first of the four ACID properties. The other three will actually be quite a bit quicker to talk about. </span></li></ul><h3 class="c34" id="h.xiyjstshxjp2"><span class="c38 c36">Durability property</span></h3><ul class="c8 lst-kix_e596asp7nqdg-0"><li class="c10 li-bullet-0"><span>Let&#39;s talk now about </span><span class="c5 c1">durability</span><span class="c4">. And we only need to look at one client to understand what&#39;s going on. So let&#39;s say that we have our client, and the client is issuing a sequence of transactions to the database. And each transaction again is a sequence of statements. And finally at the end of the transaction there is a commit. </span></li><li class="c10 li-bullet-0"><span>So what </span><span class="c5 c1">durability</span><span>&nbsp;guarantees for us is that </span><span class="c1">if there is a system crash after a transaction commits, then all effects of that transaction will remain in the database</span><span class="c4">. So, specifically, if at a later point in time after this occurs, there&#39;s a failure for whatever reason, the client can rest assured that the effects of this transaction are in the database, and when the system comes back up, they will still be in there. </span></li><li class="c10 li-bullet-0"><span>So you may be wondering </span><span class="c1">how it&#39;s possible</span><span>&nbsp;to make this guarantee since database systems move data between disc and memory and a </span><span class="c1">crash could occur at any time</span><span>.</span><span class="c4">&nbsp;</span></li></ul><ul class="c8 lst-kix_e596asp7nqdg-1 start"><li class="c6 li-bullet-0"><span>There are actually fairly complicated </span><span class="c5 c1">protocols</span><span>&nbsp;that are used and they&#39;re based on the concept of </span><span class="c5 c1">logging</span><span class="c4">. But once again we&#39;re not gonna talk about the implementation details. What&#39;s important from the user or application perspective is the properties that are guaranteed. </span></li></ul><h3 class="c34" id="h.sn6k5l6hxs27"><span class="c38 c36">Atomicity property</span></h3><ul class="c8 lst-kix_e596asp7nqdg-0"><li class="c10 li-bullet-0"><span>Now let&#39;s talk about </span><span class="c5 c1">atomicity</span><span class="c4">. Again we&#39;ll only look at one client who is issuing a sequence of transactions to the database. And let&#39;s look at transaction T2 which itself is a sequence of statements followed by a commit. </span></li><li class="c10 li-bullet-0"><span>The case that atomicity deals with is the case where there&#39;s actually a </span><span class="c1">crash or a failure </span><span class="c13 c1">during</span><span class="c1">&nbsp;the execution of the transaction, before it&#39;s been committed</span><span>. What the atomicity property tells us is that </span><span class="c1">even in the presence of system crashes, every transaction is always executed </span><span class="c13 c1">either all or nothing</span><span class="c1">&nbsp;on the database</span><span class="c4">. So in other words, if we have each of our transactions running, it&#39;s not possible in a system crash to, say, have executed on the database a couple of statements but not the rest of the transaction. </span></li><li class="c10 li-bullet-0"><span>Now once again, you might be wondering </span><span class="c1">how this is implemented</span><span>. It also uses a </span><span class="c5 c1">logging</span><span>&nbsp;mechanism and specifically when the system recovers from a crash, </span><span class="c1">there is a process by which partial effects of transactions that were underway at the time of the crash, are undone</span><span class="c4">. </span></li></ul><ul class="c8 lst-kix_e596asp7nqdg-1 start"><li class="c6 li-bullet-0"><span>Now </span><span class="c13 c1">applications do need to be somewhat aware of this process</span><span>. So when an application submits a transaction to the database, it&#39;s possible that it will get back an error because there was in fact a crash during the execution of the transaction, and then the system is restarted. In that case the </span><span class="c1">application does have the guarantee that none of the effects of the transaction were reflected in the database, but it will need to restart the transaction</span><span class="c4">.</span></li></ul><h4 class="c67 c52" id="h.4w6qhomz1uxg"><span class="c71 c36">Rollbacks (=Aborts)</span></h4><ul class="c8 lst-kix_e596asp7nqdg-0"><li class="c10 li-bullet-0"><span>Now let&#39;s come back to the fact that the system will undo partial effects of a transaction to guarantee the atomicity property, that each transaction is executed in an all or nothing fashion. So, this </span><span class="c1">concept of undoing partial effects</span><span>&nbsp;of the transaction is known as </span><span class="c5 c1">transaction rollback</span><span>&nbsp;or </span><span class="c5 c1">transaction abort</span><span class="c4">. </span></li><li class="c10 li-bullet-0"><span class="c4">And the reason I&#39;m mentioning it here is that although </span></li></ul><ul class="c8 lst-kix_e596asp7nqdg-1 start"><li class="c6 li-bullet-0"><span>1.</span><span class="c1">&nbsp;it is the implementation mechanism for atomicity</span><span class="c4">, </span></li><li class="c6 li-bullet-0"><span>2. </span><span class="c1">it&#39;s also an operation that&#39;s exposed by the database if an application would like to use it</span><span class="c4">. </span></li></ul><ul class="c8 lst-kix_e596asp7nqdg-2 start"><li class="c16 li-bullet-0"><span>Specifically, a transaction rollback can be </span><span class="c1">initiated by the </span><span class="c1 c13">system</span><span>, in the case of an error, or a crash recovery. But it also can be </span><span class="c13 c1">client</span><span class="c1">&nbsp;initiated</span><span class="c4">. </span></li></ul><ul class="c8 lst-kix_e596asp7nqdg-3 start"><li class="c19 c18 li-bullet-0"><span>And let me give a little </span><span class="c20">example where a client might write code that takes advantage of the [rollback] operation</span><span>. So here is some toy application code: </span><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 382.50px; height: 201.42px;"><img alt="" src="images/image12.png" style="width: 382.50px; height: 201.42px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></li><li class="c19 c18 li-bullet-0"><span class="c4">In this code, the client begins a transaction, it asks the database user for some input. It performs some SQL commands. Maybe some modifications to the database based on the input from the user. It confirms that the user likes the results of those modifications. </span></li><li class="c19 c18 li-bullet-0"><span>And </span><span class="c1">if the user says okay</span><span class="c4">, then the transaction is committed, and we get an atomic execution of this behavior. </span></li><li class="c19 c18 li-bullet-0"><span>But </span><span class="c1">if the user doesn&#39;t say okay</span><span class="c4">, then the transaction is rolled back and, automatically, these SQL commands that were executed are undone, and that frees the application from writing the code that undoes those commands explicitly. </span></li></ul><ul class="c8 lst-kix_e596asp7nqdg-2"><li class="c16 li-bullet-0"><span>So it can actually be quite a useful feature for clients to use. But clients do need to be very careful, because this rollback command </span><span class="c13 c1">only undoes effects on the data itself in the database</span><span class="c4">. </span></li></ul><ul class="c8 lst-kix_e596asp7nqdg-3 start"><li class="c19 c18 li-bullet-0"><span>So if perhaps in this code, the system was also </span><span class="c1">modifying some variables</span><span>&nbsp;or even worse, say </span><span class="c1">delivering cash out of an ATM machine</span><span>, the rollback command is not going to undo those! </span><span class="c1">It&#39;s not gonna modify variables and it&#39;s certainly not going to pull that cash back into the ATM</span><span class="c4">! </span></li></ul><ul class="c8 lst-kix_e596asp7nqdg-2"><li class="c16 li-bullet-0"><span>So, there actually is another issue with this particular client interaction that I am going to put a &quot;</span><span>frownie</span><span>&quot; face here. It was a nice, simple example of how rollback can be helpful. But one thing that happens in this example is that we begin a transaction and then we wait for the user to do something. And we actually wait for the user back here. So experienced database application developers will tell you to </span><span class="c13 c1">never hold open a transaction and then wait for arbitrary amounts of time</span><span>. The reason is that transactions do use this </span><span class="c5 c1">locking mechanism</span><span>&nbsp;I alluded to earlier, so when a transaction is running, it may be </span><span class="c1">blocking other clients from portions of the database</span><span>. If the user happened to go out for a cup of coffee or is going to come back in a week, we certainly don&#39;t want to leave the database locked up for an entire week. So, again and a general rule of thumb is that </span><span class="c13 c1">transactions should be constructed in a fashion that we know they are going to run to completion fairly quickly</span><span class="c4">. </span></li></ul><h3 class="c34" id="h.qobuqx8be7rc"><span class="c38 c36">Consistency property</span></h3><ul class="c8 lst-kix_e596asp7nqdg-0"><li class="c10 li-bullet-0"><span>Finally, let&#39;s talk about </span><span class="c5 c1">consistency</span><span>. The consistency property talks about </span><span class="c1">how transactions interact with the integrity constraints that may hold on a database</span><span class="c4">. </span></li><li class="c10 li-bullet-0"><span>As a reminder an </span><span class="c5 c1">integrity constraint</span><span>&nbsp;is a </span><span class="c1">specification of which database states are legal</span><span class="c4">. </span></li><li class="c10 li-bullet-0"><span>Transactions are actually very helpful in the </span><span class="c1">management of constraints</span><span class="c4">.</span></li></ul><ul class="c8 lst-kix_e596asp7nqdg-1 start"><li class="c6 li-bullet-0"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 410.50px; height: 202.52px;"><img alt="" src="images/image22.png" style="width: 410.50px; height: 202.52px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></li><li class="c6 li-bullet-0"><span>Specifically, when we have multiple clients interacting with the database in an interleaved fashion, we can have a setup where </span><span>each client can assume</span><span>&nbsp;that </span><span class="c1">when it begins</span><span>&nbsp;</span><span>it operates on a database that satisfies all integrity constraints</span><span class="c4">. </span></li><li class="c6 li-bullet-0"><span>Each client must guarantee that all constraints hold </span><span class="c1">when the [client&rsquo;s] transaction ends</span><span class="c4">&nbsp;and that&#39;s typically guaranteed by the constraint enforcement subsystem. </span></li><li class="c6 li-bullet-0"><span>Now with that guarantee, since we </span><span>have </span><span class="c1">serialized</span><span>&nbsp;ability of transactions </span><span class="c13 c1">that guarantees that constraints always hold</span><span class="c4">. </span></li></ul><ul class="c8 lst-kix_e596asp7nqdg-2 start"><li class="c16 li-bullet-0"><span>[Ausf&uuml;hrliche Erkl&auml;rung:] Specifically the behavior of the database is some sequential order of the transactions. We know and we can assume </span><span class="c1">at the start</span><span>&nbsp;of the transaction the constraints hold. And then we guarantee they hold </span><span class="c1">at the end</span><span class="c4">. And since the behavior is equivalent to a sequential order then the next transaction can assume the constraints hold and so on. </span></li></ul><ul class="c8 lst-kix_e596asp7nqdg-0"><li class="c10 li-bullet-0"><span class="c4">In conclusion, transactions are a very powerful concept. They give a solution for both concurrency control and system failure management and databases. They provide formally understood properties of atomicity, consistency, isolation and durability. In the next video we are going to focus more on the isolation property. We&#39;re going to see that in some cases we may want to relax the notion of isolation while still providing properties that are sufficient for applications in certain circumstances.</span></li></ul><h2 class="c24" id="h.rcrnqwugzgja"><span class="c40 c36 c41">Isolation Levels</span></h2><ul class="c8 lst-kix_xa2tyq6ankh8-0 start"><li class="c10 li-bullet-0"><span>In this final video about transactions, we&#39;ll focus on the concept of </span><span class="c5 c1">isolation levels</span><span class="c4">. </span></li><li class="c10 li-bullet-0"><span>[Problem:]</span><span class="c1">&nbsp;Serializability</span><span>&nbsp;gives us understandable behavior and consistency but it does have some </span><span class="c1">overhead</span><span>&nbsp;involved in the </span><span class="c5 c1">locking protocols</span><span>&nbsp;that are used and it </span><span class="c1">does reduce concurrency</span><span class="c4">. </span></li><li class="c10 li-bullet-0"><span>[Solution:] As a result of the overhead and reduced concurrency, systems do offer </span><span class="c1">weaker </span><span class="c5 c1">isolation levels</span><span class="c4">. </span></li><li class="c10 li-bullet-0"><span>In the SQL standard, there are </span><span class="c1">three levels</span><span class="c4">: </span></li></ul><ul class="c8 lst-kix_xa2tyq6ankh8-1 start"><li class="c6 li-bullet-0"><span class="c4">read uncommitted, </span></li><li class="c6 li-bullet-0"><span class="c4">read committed, and </span></li><li class="c6 li-bullet-0"><span class="c4">repeatable read.</span></li><li class="c6 li-bullet-0"><span class="c4">[serializable] </span></li></ul><ul class="c8 lst-kix_xa2tyq6ankh8-0"><li class="c10 li-bullet-0"><span>And these isolation levels have </span><span class="c1">lower overhead</span><span>&nbsp;and allow </span><span class="c1">higher concurrency</span><span>&nbsp;but of course at a cost which is </span><span class="c1">lower consistency</span><span class="c4">&nbsp;guarantees. </span></li><li class="c10 li-bullet-0"><span>I&#39;ve listed the three alternative isolation levels </span><span class="c1">from the weaker to the stronger</span><span class="c4">&nbsp;and to complete the picture at the bottom we have a fourth one which is &ldquo;serializable&rdquo;, which is what we&#39;ve been talking about already. </span></li><li class="c10 li-bullet-0"><span class="c4">Before we proceed to learn about the different isolation, let me mention a couple of things: </span></li></ul><ul class="c8 lst-kix_xa2tyq6ankh8-1 start"><li class="c6 li-bullet-0"><span>First of all, </span><span class="c13 c1">the Isolation level is </span><span class="c13 c1">per a transaction</span><span class="c4">. So each client could set different isolation levels for each of its transactions, if it wishes. </span></li><li class="c6 li-bullet-0"><span>Second of all, </span><span class="c13 c1">isolation levels are in the eye of the beholder</span><span class="c4">, and let me show you what I mean by that: </span></li></ul><ul class="c8 lst-kix_xa2tyq6ankh8-2 start"><li class="c16 li-bullet-0"><span class="c4">So each client submits a transaction to the database and might set the isolation level for that transaction. That isolation level only affects that transaction itself. It does not affect the behavior of any other transactions that are running concurrently. So, for example, our client on the left might set its transaction to be a repeatable read, while our client on the right will set it&#39;s transaction to read uncommitted and those properties will be guaranteed for each of those transactions and won&#39;t affect the other. </span></li></ul><ul class="c8 lst-kix_xa2tyq6ankh8-1"><li class="c6 li-bullet-0"><span>By the way, the isolation levels really are specific to </span><span class="c1">reads</span><span>&nbsp;[deshalb die Bezeichnungen &ldquo;</span><span class="c29 c1">Read</span><span>&nbsp;x&rdquo; bzw. &ldquo;Repeatable </span><span class="c29 c1">Read</span><span>&rdquo;]</span><span class="c4">. They specify what values might be seen in the transaction, as we&#39;ll see when we get into the details. </span></li></ul><h3 class="c34" id="h.fohle8nrtcgv"><span class="c38 c36">Dirty Reads</span></h3><ul class="c8 lst-kix_xa2tyq6ankh8-0"><li class="c10 li-bullet-0"><span>So let&#39;s start by defining a concept called </span><span class="c5 c1">dirty reads</span><span>. </span><span class="c1">A data item in the database is dirty if it&#39;s been written by a transaction that has not yet been committed</span><span class="c4">. </span></li><li class="c10 li-bullet-0"><span>So for </span><span class="c20">example</span><span>, here are two transactions, I&#39;ll call them T1 and T2, (and by the way throughout the rest of this video I&#39;m going to put transactions in boxes, and you can assume implicitly that there is a commit at the end of each box. I&#39;m not going to write it each time.) So our first transaction is updating Stanford&#39;s enrollment, adding 1000 to it, and our second transaction is reading the average enrollment in the college table. We&#39;re using our usual database of students applying to colleges. So after this enrollment, Stanford&#39;s enrollment has 1,000 added to it, but </span><span class="c1">before the transaction commits at that point in time the value is what&#39;s known as dirty</span><span class="c4">. </span></li></ul><ul class="c8 lst-kix_xa2tyq6ankh8-1 start"><li class="c6 li-bullet-0"><span>[Why?] If our second transaction here reads this value then it might be reading a value that never actually exists in the database. And why is that, because before this transaction commits there could be a system failure and </span><span class="c1">the transaction could be rolled back</span><span class="c4">&nbsp;as we described before and all of it&#39;s changes undone. Meanwhile, however, the second transaction may have read that value before it was undone. </span></li></ul><ul class="c8 lst-kix_xa2tyq6ankh8-0"><li class="c10 li-bullet-0"><span>Here&#39;s another </span><span class="c20">example</span><span>. Now we have three transactions T1, T2, T3. Our first transaction is modifying the GPA of student&#39;s who&#39;s high school size is sufficiently large. Our second transaction is finding the GPA of student number 123. And our third transaction is modifying the high school size of student 234. So</span><span class="c1">&nbsp;if this GPA here in transaction T2 is read before the commit of transaction T1, then that would be a dirty value for the GPA</span><span class="c4">. </span><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 412.38px; height: 155.50px;"><img alt="" src="images/image25.png" style="width: 412.38px; height: 155.50px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></li></ul><ul class="c8 lst-kix_xa2tyq6ankh8-1 start"><li class="c6 li-bullet-0"><span class="c4">[Why?] Again, because if this first transaction doesn&#39;t commit, then that value will be rolled back. </span></li></ul><ul class="c8 lst-kix_xa2tyq6ankh8-0"><li class="c10 li-bullet-0"><span>There&#39;s a second case where we might have dirty data read in this trio of transactions and that&#39;s this &ldquo;sizeHS&rdquo; here [in T1]. Because notice that here [in T3] we&#39;re modifying a high school size. So, </span><span class="c1">if this size of high school is read before the commit point of the third transaction, that would also be a dirty data item</span><span class="c4">. </span></li><li class="c10 li-bullet-0"><span>One clarification about dirty reads, is that </span><span class="c13 c1">there is no such thing as a dirty read within the same transaction</span><span>. In T3 for example, after we&#39;ve modified the size high school, we might read the size high school later in the same transaction and that&#39;s not considered a dirty read. So </span><span class="c13 c1">a read is only dirty when it reads an uncommitted value that was modified by a different transaction</span><span class="c4">. </span></li></ul><h3 class="c34" id="h.zds9n5zg5iju"><span class="c38 c36">Level: Read Uncommitted</span></h3><ul class="c8 lst-kix_xa2tyq6ankh8-0"><li class="c10 li-bullet-0"><span>So here&#39;s our first isolation level, and it&#39;s our weakest one. It&#39;s called </span><span class="c1 c5">Read Uncommitted</span><span>, and what it says is that </span><span class="c1">a transaction that has this isolation level may perform dirty reads</span><span class="c4">. It may read values that have been modified by a different transaction and not yet committed. </span></li><li class="c10 li-bullet-0"><span>So let&#39;s take a look at an </span><span class="c20">example</span><span>. It&#39;s our </span><span class="c20">same example</span><span class="c4">. We&#39;ve dropped the third transaction, so our first transaction is modifying GPAs in the student table and our second transaction is reading the average of those GPAs. </span></li><li class="c10 li-bullet-0"><span>So </span><span class="c1">if these transactions are serializable</span><span class="c4">, then the behavior is guaranteed to be equivalent to either T1 followed by T2 or T2 followed by T1. So either the second transaction will see all the GPAs before they were updated, or it will see all the GPAs after they were updated. As a reminder we don&#39;t know which order these will occur in. Only that the behavior will be equivalent to one of those orders. </span></li><li class="c10 li-bullet-0"><span class="c20">Now let&#39;s suppose we add to our second transaction a specification that it has isolation level read uncommitted</span><span class="c4">. And by the way, this very long sentence [Set Transaction Isolation Level Read Uncommitted;] is how we specify the isolation level in the SQL standard. </span></li><li class="c10 li-bullet-0"><span>Now </span><span class="c13 c1">when we don&#39;t specify an isolation level, as we haven&#39;t here, the default is serializable</span><span class="c4">. Although in most of our examples, it won&#39;t actually matter what the first transaction&#39;s isolation level is, as we&#39;ll see. We&#39;re going to be focusing on the data that&#39;s read in the second transaction and typically written in the first transaction. </span></li><li class="c10 li-bullet-0"><span>Okay, so let&#39;s see what&#39;s going on here. Again this is T1 and T2 and our first transaction is updating the GPAs. And now we&#39;ve said in our second that it&#39;s okay for this average to read dirty values, in other words, to see uncommitted GPA modifications. In that case, as the average is computed, it could be computed right in the middle of the set of modifications being performed by T1. In that case, we certainly </span><span class="c1">don&#39;t have serializable behavior</span><span class="c4">. </span></li></ul><ul class="c8 lst-kix_xa2tyq6ankh8-1 start"><li class="c6 li-bullet-0"><span>We </span><span class="c1">don&#39;t have T1 followed by T2</span><span>, since T2 is reading some values that are in the middle of T1, and similarly </span><span class="c1">we don&#39;t have T2 followed by T1</span><span class="c4">. </span></li></ul><ul class="c8 lst-kix_xa2tyq6ankh8-0"><li class="c10 li-bullet-0"><span>It might be that for our particular application, we just don&#39;t care that much about having exact consistency. </span><span class="c1">It may be that we don&#39;t mind</span><span>&nbsp;if our average is computed with some old values and some new values, we might not even mind if we compute in our average an increased GPA that ends up being undone when a transaction </span><span>rolls back</span><span class="c4">. So if we&#39;re just looking for a rough approximate GPA we can use this isolation level, and we&#39;ll have </span></li></ul><ul class="c8 lst-kix_xa2tyq6ankh8-1 start"><li class="c6 li-bullet-0"><span class="c1">increased concurrency</span><span class="c4">, </span></li><li class="c6 li-bullet-0"><span class="c1">decreased overhead</span><span class="c4">&nbsp;and </span></li><li class="c6 li-bullet-0"><span class="c1">better performance</span><span class="c4">&nbsp;overall with the understanding that </span></li><li class="c6 li-bullet-0"><span>it will have </span><span class="c1">reduced consistency</span><span class="c4">&nbsp;guarantees.</span></li></ul><h3 class="c34" id="h.k05qvrto1b7t"><span class="c38 c36">Level: Read Committed</span></h3><ul class="c8 lst-kix_xa2tyq6ankh8-0"><li class="c10 li-bullet-0"><span>Let&#39;s go one step up to the next isolation level which is called &quot;</span><span class="c5 c1">read committed</span><span>&quot;. As you can probably guess this one </span><span class="c1">specifies that transactions may </span><span class="c29 c1">not</span><span class="c1">&nbsp;perform dirty reads</span><span class="c4">. They may only read data values whose updates by other transactions have been committed to the database. </span></li><li class="c10 li-bullet-0"><span>Now this isolation level is stronger but it </span><span class="c1">still doesn&#39;t guarantee global serializability</span><span class="c4">. </span></li><li class="c10 li-bullet-0"><span>Let&#39;s take a look through an </span><span class="c20">example</span><span class="c4">. Our first transaction, T1, is the same one, modifying the GPA for students from large high schools. Our second transaction is the one where we are going to reset the isolation level. In this case to read committed. And it is going to perform two statements. One of them is going to read the average GPA from the student table, and the other is going to read the maximum GPA from the student table. </span></li><li class="c10 li-bullet-0"><span>So let&#39;s look at </span><span class="c1">one behavior that&#39;s consistent with the isolation level, but we will see is not serializable</span><span class="c4">. </span></li></ul><ul class="c8 lst-kix_xa2tyq6ankh8-1 start"><li class="c6 li-bullet-0"><span>Let&#39;s suppose that this average GPA is read </span><span class="c1">before</span><span>&nbsp;transaction T1, but the max GPA is computed </span><span class="c1">after</span><span class="c4">&nbsp;transaction T1. So the average will not take into account the increases but the max will take into account the increases. </span></li><li class="c6 li-bullet-0"><span>So, let&#39;s </span><span class="c1">see if this is equivalent to any serial order</span><span class="c4">: </span></li></ul><ul class="c8 lst-kix_xa2tyq6ankh8-2 start"><li class="c16 li-bullet-0"><span>Is it equivalent to </span><span class="c1">T1 followed by T2</span><span class="c4">? Well it&#39;s certainly not because T2&#39;s first statement is reading the state of the table before T1 and not the state of the table afterwards, although T2&#39;s second statement is reading the state of the table afterwards. </span></li><li class="c16 li-bullet-0"><span>Similarly it&#39;s not equivalent to </span><span class="c1">T2 followed by T1</span><span class="c4">&nbsp;because T2 is reading in its second statement the state of the database after T1. </span></li><li class="c16 li-bullet-0"><span class="c1">So there&#39;s no equivalent serial order</span><span class="c4">. </span></li></ul><ul class="c8 lst-kix_xa2tyq6ankh8-0"><li class="c10 li-bullet-0"><span>But again, </span><span class="c1">perhaps that&#39;s not needed</span><span class="c4">&nbsp;for the particular application. And by using Read Committed we do get somewhat more performance than we would have if we were serializable.</span></li></ul><h3 class="c34" id="h.tijd64th004j"><span class="c38 c36">Level: Repeatable Read</span></h3><ul class="c8 lst-kix_kjowfq3cv3xf-0 start"><li class="c10 li-bullet-0"><span>Our next isolation level is called </span><span class="c5 c1">Repeatable Read</span><span>. And it&#39;s our strongest one before we get to Serializable. In Repeatable Read, </span><span class="c1">a transaction may not perform dirty reads just like in read committed. And furthermore, there is an additional constraint that if an item is read multiple times, it can&#39;t change value.</span><span class="c4">&nbsp;</span></li><li class="c10 li-bullet-0"><span class="c4">You might remember in our previous example, we read the GPA multiple times, and it did change value. So if we were using Repeatable Read for the consistency level there, then the behavior that I described couldn&#39;t occur. </span></li><li class="c10 li-bullet-0"><span>So, even with this stronger condition, we </span><span class="c1">still don&#39;t have a guarantee of global serializability</span><span>, and we&#39;ll again see that through an </span><span class="c20">example</span><span>:</span><span class="c4">&nbsp;</span></li><li class="c10 li-bullet-0"><span class="c4">So we have our two transactions T1, T2, </span></li></ul><ul class="c8 lst-kix_kjowfq3cv3xf-1 start"><li class="c6 li-bullet-0"><span>our </span><span class="c1">first transaction</span><span class="c4">&nbsp;is still modifying the GPA (I took away the condition about the high school size, just to keep things simple) and our second statement in our first transaction is modifying the high school size of the student with ID 123. So we first modified GPA&#39;s and then a high school size. </span></li><li class="c6 li-bullet-0"><span>In our </span><span class="c1">second transaction</span><span class="c4">, and that&#39;s the one we&#39;re setting as Repeatable read, we are going to read the average GPA, as we usually do, and this time we are going to read the average of the high school sizes. </span></li><li class="c6 li-bullet-0"><span class="c4">Incidentally, our first transaction is serializable, as they always are by default. </span></li></ul><ul class="c8 lst-kix_kjowfq3cv3xf-0"><li class="c10 li-bullet-0"><span>Let&#39;s look at a </span><span class="c1">behavior where the first statement reading the average GPA is executed before transaction T1, or sees the values before T1</span><span class="c4">, while our second statement, the high school size, sees the values after transaction T1. </span></li></ul><ul class="c8 lst-kix_kjowfq3cv3xf-1 start"><li class="c6 li-bullet-0"><span class="c4">So let&#39;s check our conditions [for Repeatable Read]. </span></li></ul><ul class="c8 lst-kix_kjowfq3cv3xf-2 start"><li class="c16 li-bullet-0"><span class="c4">We are not performing dirty reads, because the first read here is of the committed value before T1 and the second read is the committed value after T1 </span></li><li class="c16 li-bullet-0"><span class="c4">and furthermore, any items that are read multiple times have not had their value changed because we are actually not reading any values multiple times. </span></li><li class="c16 li-bullet-0"><span class="c4">So the execution of the first statement here, before T1 and the second one after is legal in the repeatable read isolation level. </span></li></ul><ul class="c8 lst-kix_kjowfq3cv3xf-1"><li class="c6 li-bullet-0"><span class="c4">Yet we&#39;re still not serializable. </span></li></ul><ul class="c8 lst-kix_kjowfq3cv3xf-2 start"><li class="c16 li-bullet-0"><span class="c4">We&#39;re not equivalent to T1 before T2 because again the first statement of T2 is going before T1 or seeing the state before T1 and </span></li><li class="c16 li-bullet-0"><span class="c4">we&#39;re not equivalent to T2 followed by T1 because the second statement of T2 is seeing the state after T1. </span></li></ul><h4 class="c52 c67" id="h.qsh7ngir5v26"><span class="c36 c71">Phantom Tuples</span></h4><ul class="c8 lst-kix_kjowfq3cv3xf-0"><li class="c10 li-bullet-0"><span>Now there is another situation with repeatable </span><span>read</span><span>&nbsp;that&#39;s quite important to understand. We said that a transaction can&#39;t perform dirty reads, and it can&#39;t. We also said that when an item that&#39;s read multiple times can&#39;t change value. But the fact is that </span><span class="c1">Repeatable Read does allow a relation to change values if it&#39;s read multiple times</span><span>&nbsp;through what&#39;s known as </span><span class="c5 c1">phantom tuples</span><span class="c4">. </span></li><li class="c10 li-bullet-0"><span>Let me explain through an </span><span class="c20">example</span><span class="c4">. Let&#39;s suppose our first transaction inserts a hundred new students into the database. And that&#39;s run concurrently with our second transaction, which is right at the repeatable read isolation level and now we&#39;re just going to read the average GPA and we&#39;re going to follow that with the max GPA similar to one of our earlier examples. </span></li><li class="c10 li-bullet-0"><span>Now, repeatable </span><span>read</span><span>&nbsp;</span><span>actually does allow</span><span>&nbsp;behavior where this average is computed </span><span class="c1">before</span><span>&nbsp;T1 and this max is computed </span><span class="c1">after</span><span>&nbsp;T1. So the justification behind that is pretty much that when we do the second read of the GPA, </span><span class="c1">the tuples that we&#39;re reading for a second time</span><span>&nbsp;do still have the same value. So we are reading those some new tuples that were inserted and in fact if this max were an average instead of max we might get 2 different answers for the average, even with Repeatable Read as the isolation level. But that&#39;s what it allows and these hundred tuples here are what are known as the </span><span class="c1">phantom tuples</span><span class="c4">. They sort of emerged during execution out of nowhere. </span></li><li class="c10 li-bullet-0"><span>Now, I would have to say that my opinion is that </span><span class="c1">this behavior</span><span>&nbsp;within the repeatable read isolation level, although it&#39;s part of the standard, </span><span class="c1">is really an effect of the way repeatable read is implemented using </span><span class="c5 c1">Locks</span><span>. When a value is read once, it&#39;s locked and can&#39;t be modified, but when we insert new tuples, they aren&#39;t inserted with locks so they can be read in a second read of the same relation. Don&#39;t worry about the implementation details, but </span><span class="c13 c1">do worry about phantom tuples</span><span>&nbsp;because if you&#39;re using the repeatable read isolation level, </span><span class="c13 c1">you do need to know that insertions can be made by another transaction, even between two entire readings of a table</span><span class="c4">. </span></li><li class="c10 li-bullet-0"><span>Now on the other hand, </span><span class="c1">if what we do in our first transaction is </span><span class="c29 c1">delete</span><span class="c1">&nbsp;the hundred tuples instead of inserting them</span><span>, in that case we actually can </span><span class="c29 c1">not</span><span>&nbsp;get the behavior where the first statement is before and the second statement is after. Because once the average value has been read of the GPA, this deletion will not be allowed </span><span class="c1">because (again kind of an implementation) those values are </span><span class="c5 c1">locked</span><span class="c4">. And so in this case, the second read of that same relation wouldn&#39;t be allowed. </span></li><li class="c10 li-bullet-0"><span>So in summary </span><span class="c1">we may have phantom tuples</span><span>&nbsp;up here between two reads of the same relation in a repeatable read transaction, </span><span class="c1">but we won&#39;t have tuples disappear</span><span class="c4">&nbsp;from the relation in between two reads of it.</span></li></ul><h3 class="c34" id="h.ar9dwwcx3mqq"><span class="c36 c38">Read Only</span></h3><ul class="c8 lst-kix_dy60937dm7bn-0 start"><li class="c10 li-bullet-0"><span class="c4">So, that completes our three isolation levels, in addition to serializable we had at the weakest read-uncommitted, then read-committed, and then repeatable read. </span></li><li class="c10 li-bullet-0"><span>I did want to mention that we can also set transactions to be </span><span class="c5 c1">read-only</span><span>. That&#39;s sort of orthogonal to setting the isolation level, what it does is it </span><span class="c1">helps the system optimize performance</span><span class="c4">. </span></li><li class="c10 li-bullet-0"><span>So, for </span><span class="c20">example</span><span class="c4">, in our transaction, where we were just reading the average GPA and the max GPA, we can </span></li></ul><ul class="c8 lst-kix_dy60937dm7bn-1 start"><li class="c6 li-bullet-0"><span class="c4">set an isolation level, </span></li><li class="c6 li-bullet-0"><span>and then we can also tell the system that it&#39;s going to be a read only transaction. </span><span class="c1">That means that we are not going to perform any modifications to the database within the transaction</span><span class="c4">. </span></li></ul><ul class="c8 lst-kix_dy60937dm7bn-0"><li class="c10 li-bullet-0"><span>The system can use that as a hint to figure out its protocols to guarantee the right isolation level, but it might </span><span class="c1">not have as much overhead as if</span><span>&nbsp;the transaction had the possibility of performing </span><span class="c1">modifications </span><span class="c29 c1">as well as</span><span class="c1">&nbsp;performing reads</span><span class="c4">. </span></li><li class="c10 li-bullet-0"><span class="c4">OK, so the behavior of transactions can be rather confusing and it&#39;s very important to get it right or surprising things might happen. </span></li><li class="c10 li-bullet-0"><span>But I think we can </span><span class="c1">summarize</span><span class="c4">&nbsp;it pretty well with this table here. We&#39;re going here from the weakest to the strongest and we can classify the behavior of transactions based on, again, what happens with reading. Can they read uncommitted values? Can they have non-repeatable reads, where we read a value and then read a different one later in the same transaction, and can there be phantom tuples inserted during the transaction? </span><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 320.50px; height: 168.28px;"><img alt="" src="images/image1.png" style="width: 320.50px; height: 168.28px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></li><li class="c10 li-bullet-0"><span>If we set our isolation level to </span><span class="c1">serializable</span><span class="c4">, then we cannot have dirty reads, we cannot have non-repeatable reads and we cannot have phantoms. </span></li><li class="c10 li-bullet-0"><span>If we go one step weaker for a little more performance, and use </span><span class="c1">repeatable </span><span class="c1">read</span><span class="c4">, then we still won&#39;t have dirty reads, we still won&#39;t have non-repeatable reads, but we might have phantom tuples. </span></li><li class="c10 li-bullet-0"><span>Moving up with </span><span class="c1">Read Committed</span><span>, we still won&#39;t have dirty reads but we might have non-repeatable reads. So we might read a value that&#39;s committed both times we read </span><span>it. However</span><span class="c4">, a transaction wrote the value in between those two reads. So, it&#39;s different each time and we may have phantoms as well. </span></li><li class="c10 li-bullet-0"><span>Finally </span><span class="c1">read uncommitted</span><span class="c4">&nbsp;is the absolute weakest, not many guarantees at all. We might have dirty reads, we might have not repeatable reads, and we might have phantoms. </span></li></ul><h2 class="c24" id="h.u5w5xyv9m3c"><span class="c40 c36 c41">Summary + additional Remarks</span></h2><ul class="c8 lst-kix_dy60937dm7bn-0"><li class="c10 li-bullet-0"><span>So to wrap up transactions completely the standard default is serializable behavior, and we specified exactly what that means. Weaker isolation levels allow us to </span><span class="c1">increase concurrency</span><span>, </span><span class="c1">decrease overhead</span><span>&nbsp;so overall we will get an </span><span class="c1">increased performance</span><span>, but we have </span><span class="c1">weaker consistency</span><span class="c4">&nbsp;guarantees. </span></li><li class="c10 li-bullet-0"><span>I should mention that </span><span class="c13 c1">some prominent database systems have actually chosen to have repeatable </span><span class="c13 c1">read</span><span class="c13 c1">&nbsp;as their default</span><span>. </span><span class="c5 c1">Oracle </span><span>and</span><span class="c5 c1">&nbsp;MySQL</span><span>&nbsp;are examples of that. So, in those systems it&#39;s assumed that most applications will be willing to sacrifice a little </span><span>bit inconsistency</span><span class="c4">&nbsp;in order to get higher performance. </span></li><li class="c10 li-bullet-0"><span>And, finally, the </span><span class="c1">isolation level is set for each transaction</span><span>&nbsp;and </span><span class="c1">is in the eye of the beholder</span><span class="c4">, meaning that that transaction&#39;s reads must conform to its own isolation level but won&#39;t affect any concurrent transaction&#39;s isolation level. </span></li><li class="c10 li-bullet-0"><span class="c4">I hope I&#39;ve gotten the point across that transactions are one of the most important concepts in database systems. </span></li></ul><ul class="c8 lst-kix_dy60937dm7bn-1 start"><li class="c6 li-bullet-0"><span>They are what allow multiple clients, maybe thousands, tens of thousands of clients, to operate on a database, </span><span class="c1">all at the same time without concern</span><span class="c4">&nbsp;that the actions they perform on the data will affect each other in unpredictable ways. </span></li><li class="c6 li-bullet-0"><span>And furthermore, transactions are what allow database systems </span><span class="c1">to recover when there&#39;s an unexpected crash</span><span class="c4">&nbsp;into a consistent space.</span></li></ul><p class="c14"><span class="c4"></span></p><hr class="c69"><div><p class="c63 c52"><a href="#ftnt_ref1" id="ftnt1">[1]</a><span class="c23">&nbsp;</span><span class="c29 c37"><a class="c11" href="#id.my7qdc2v408e">sp&auml;ter</a></span><span>&nbsp;sagt sie auch hierzu: &ldquo;It&#39; s really quite similar to the analogy in programming languages.&rdquo;, d.h. </span><span class="c29 c37"><a class="c11" href="#id.9gu8288dnxzl">meine Interpretation</a></span><span>&nbsp;ist plausibel</span></p></div><div><p class="c52 c63"><a href="#ftnt_ref2" id="ftnt2">[2]</a><span class="c23">&nbsp;In programming we call a language </span><span class="c23 c1">loosely typed</span><span class="c23">&nbsp;(JavaScript, Python and Ruby) [</span><span class="c23 c1">= statically typed</span><span class="c23">&nbsp;(at</span><span class="c23"><a class="c11" href="https://www.google.com/url?q=https://en.wikipedia.org/wiki/Compile_time&amp;sa=D&amp;source=editors&amp;ust=1632356724359000&amp;usg=AOvVaw0o17xeIGDRjm8h7yh0777q">&nbsp;</a></span><span class="c29 c37 c23"><a class="c11" href="https://www.google.com/url?q=https://en.wikipedia.org/wiki/Compile_time&amp;sa=D&amp;source=editors&amp;ust=1632356724359000&amp;usg=AOvVaw0o17xeIGDRjm8h7yh0777q">compile time</a></span><span class="c23">)] when you don&rsquo;t have to explicitly specify types of variables and objects. A </span><span class="c23 c1">strongly typed</span><span class="c23">&nbsp;(C, Go, Java and Swift) [</span><span class="c23 c1">= dynamically typed</span><span class="c23">&nbsp;(at</span><span class="c23"><a class="c11" href="https://www.google.com/url?q=https://en.wikipedia.org/wiki/Run_time_(program_lifecycle_phase)&amp;sa=D&amp;source=editors&amp;ust=1632356724359000&amp;usg=AOvVaw0jGdU2yWxncbJhjgacLlHP">&nbsp;</a></span><span class="c29 c37 c23"><a class="c11" href="https://www.google.com/url?q=https://en.wikipedia.org/wiki/Run_time_(program_lifecycle_phase)&amp;sa=D&amp;source=editors&amp;ust=1632356724359000&amp;usg=AOvVaw0jGdU2yWxncbJhjgacLlHP">run time</a></span><span class="c23">)] language on the contrary wants types specified. (</span><span class="c29 c37 c23"><a class="c11" href="https://www.google.com/url?q=https://flaviocopes.com/loosely-strongly-typed/&amp;sa=D&amp;source=editors&amp;ust=1632356724360000&amp;usg=AOvVaw3BzgKbue5_k5rCQCdubsd3">https://flaviocopes.com/loosely-strongly-typed/</a></span><span class="c23">) (see also </span><span class="c29 c37 c23"><a class="c11" href="https://www.google.com/url?q=https://en.wikipedia.org/wiki/Type_system&amp;sa=D&amp;source=editors&amp;ust=1632356724360000&amp;usg=AOvVaw3URCRh7g91uo69CQ0cVgsv">https://en.wikipedia.org/wiki/Type_system</a></span><span class="c36 c23 c40">)</span></p><p class="c63 c52 c56"><span class="c40 c36 c23"></span></p></div><div><p class="c63 c52"><a href="#ftnt_ref3" id="ftnt3">[3]</a><span class="c40 c36 c23">&nbsp;zB cross-product, natural join, theta join &hellip; usw</span></p></div></body></html>